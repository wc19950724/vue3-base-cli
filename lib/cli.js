#!/usr/bin/env node
"use strict";var t=require("node:child_process"),e=require("node:fs"),i=require("node:path"),s=require("node:events"),r=require("node:process"),n=require("node:util"),o=require("node:url"),a=require("node:fs/promises"),h=require("node:stream"),l=require("node:string_decoder"),c=require("node:os"),u=require("node:tty"),p=require("node:assert"),d=require("node:readline");function f(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}var m=f(e);function g(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var y={exports:{}},w={},b={};let v=class extends Error{constructor(t,e,i){super(i),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=e,this.exitCode=t,this.nestedError=void 0}};b.CommanderError=v,b.InvalidArgumentError=class extends v{constructor(t){super(1,"commander.invalidArgument",t),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};const{InvalidArgumentError:x}=b;w.Argument=class{constructor(t,e){switch(this.description=e||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,t[0]){case"<":this.required=!0,this._name=t.slice(1,-1);break;case"[":this.required=!1,this._name=t.slice(1,-1);break;default:this.required=!0,this._name=t}this._name.length>3&&"..."===this._name.slice(-3)&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(t,e){return e!==this.defaultValue&&Array.isArray(e)?e.concat(t):[t]}default(t,e){return this.defaultValue=t,this.defaultValueDescription=e,this}argParser(t){return this.parseArg=t,this}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,e)=>{if(!this.argChoices.includes(t))throw new x(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,e):t},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}},w.humanReadableArgName=function(t){const e=t.name()+(!0===t.variadic?"...":"");return t.required?"<"+e+">":"["+e+"]"};var S={},k={};const{humanReadableArgName:_}=w;k.Help=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(t){const e=t.commands.filter((t=>!t._hidden));if(t._hasImplicitHelpCommand()){const[,i,s]=t._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),r=t.createCommand(i).helpOption(!1);r.description(t._helpCommandDescription),s&&r.arguments(s),e.push(r)}return this.sortSubcommands&&e.sort(((t,e)=>t.name().localeCompare(e.name()))),e}compareOptions(t,e){const i=t=>t.short?t.short.replace(/^-/,""):t.long.replace(/^--/,"");return i(t).localeCompare(i(e))}visibleOptions(t){const e=t.options.filter((t=>!t.hidden)),i=t._hasHelpOption&&t._helpShortFlag&&!t._findOption(t._helpShortFlag),s=t._hasHelpOption&&!t._findOption(t._helpLongFlag);if(i||s){let r;r=i?s?t.createOption(t._helpFlags,t._helpDescription):t.createOption(t._helpShortFlag,t._helpDescription):t.createOption(t._helpLongFlag,t._helpDescription),e.push(r)}return this.sortOptions&&e.sort(this.compareOptions),e}visibleGlobalOptions(t){if(!this.showGlobalOptions)return[];const e=[];for(let i=t.parent;i;i=i.parent){const t=i.options.filter((t=>!t.hidden));e.push(...t)}return this.sortOptions&&e.sort(this.compareOptions),e}visibleArguments(t){return t._argsDescription&&t._args.forEach((e=>{e.description=e.description||t._argsDescription[e.name()]||""})),t._args.find((t=>t.description))?t._args:[]}subcommandTerm(t){const e=t._args.map((t=>_(t))).join(" ");return t._name+(t._aliases[0]?"|"+t._aliases[0]:"")+(t.options.length?" [options]":"")+(e?" "+e:"")}optionTerm(t){return t.flags}argumentTerm(t){return t.name()}longestSubcommandTermLength(t,e){return e.visibleCommands(t).reduce(((t,i)=>Math.max(t,e.subcommandTerm(i).length)),0)}longestOptionTermLength(t,e){return e.visibleOptions(t).reduce(((t,i)=>Math.max(t,e.optionTerm(i).length)),0)}longestGlobalOptionTermLength(t,e){return e.visibleGlobalOptions(t).reduce(((t,i)=>Math.max(t,e.optionTerm(i).length)),0)}longestArgumentTermLength(t,e){return e.visibleArguments(t).reduce(((t,i)=>Math.max(t,e.argumentTerm(i).length)),0)}commandUsage(t){let e=t._name;t._aliases[0]&&(e=e+"|"+t._aliases[0]);let i="";for(let e=t.parent;e;e=e.parent)i=e.name()+" "+i;return i+e+" "+t.usage()}commandDescription(t){return t.description()}subcommandDescription(t){return t.summary()||t.description()}optionDescription(t){const e=[];if(t.argChoices&&e.push(`choices: ${t.argChoices.map((t=>JSON.stringify(t))).join(", ")}`),void 0!==t.defaultValue){(t.required||t.optional||t.isBoolean()&&"boolean"==typeof t.defaultValue)&&e.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`)}return void 0!==t.presetArg&&t.optional&&e.push(`preset: ${JSON.stringify(t.presetArg)}`),void 0!==t.envVar&&e.push(`env: ${t.envVar}`),e.length>0?`${t.description} (${e.join(", ")})`:t.description}argumentDescription(t){const e=[];if(t.argChoices&&e.push(`choices: ${t.argChoices.map((t=>JSON.stringify(t))).join(", ")}`),void 0!==t.defaultValue&&e.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),e.length>0){const i=`(${e.join(", ")})`;return t.description?`${t.description} ${i}`:i}return t.description}formatHelp(t,e){const i=e.padWidth(t,e),s=e.helpWidth||80;function r(t,r){if(r){const n=`${t.padEnd(i+2)}${r}`;return e.wrap(n,s-2,i+2)}return t}function n(t){return t.join("\n").replace(/^/gm," ".repeat(2))}let o=[`Usage: ${e.commandUsage(t)}`,""];const a=e.commandDescription(t);a.length>0&&(o=o.concat([e.wrap(a,s,0),""]));const h=e.visibleArguments(t).map((t=>r(e.argumentTerm(t),e.argumentDescription(t))));h.length>0&&(o=o.concat(["Arguments:",n(h),""]));const l=e.visibleOptions(t).map((t=>r(e.optionTerm(t),e.optionDescription(t))));if(l.length>0&&(o=o.concat(["Options:",n(l),""])),this.showGlobalOptions){const i=e.visibleGlobalOptions(t).map((t=>r(e.optionTerm(t),e.optionDescription(t))));i.length>0&&(o=o.concat(["Global Options:",n(i),""]))}const c=e.visibleCommands(t).map((t=>r(e.subcommandTerm(t),e.subcommandDescription(t))));return c.length>0&&(o=o.concat(["Commands:",n(c),""])),o.join("\n")}padWidth(t,e){return Math.max(e.longestOptionTermLength(t,e),e.longestGlobalOptionTermLength(t,e),e.longestSubcommandTermLength(t,e),e.longestArgumentTermLength(t,e))}wrap(t,e,i,s=40){const r=new RegExp("[\\n][ \\f\\t\\v   -   　\ufeff]+");if(t.match(r))return t;const n=e-i;if(n<s)return t;const o=t.slice(0,i),a=t.slice(i).replace("\r\n","\n"),h=" ".repeat(i),l="\\s​",c=new RegExp(`\n|.{1,${n-1}}([${l}]|$)|[^${l}]+?([${l}]|$)`,"g");return o+(a.match(c)||[]).map(((t,e)=>"\n"===t?"":(e>0?h:"")+t.trimEnd())).join("\n")}};var O={};const{InvalidArgumentError:C}=b;function E(t){let e,i;const s=t.split(/[ |,]+/);return s.length>1&&!/^[[<]/.test(s[1])&&(e=s.shift()),i=s.shift(),!e&&/^-[^-]$/.test(i)&&(e=i,i=void 0),{shortFlag:e,longFlag:i}}O.Option=class{constructor(t,e){this.flags=t,this.description=e||"",this.required=t.includes("<"),this.optional=t.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(t),this.mandatory=!1;const i=E(t);this.short=i.shortFlag,this.long=i.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(t,e){return this.defaultValue=t,this.defaultValueDescription=e,this}preset(t){return this.presetArg=t,this}conflicts(t){return this.conflictsWith=this.conflictsWith.concat(t),this}implies(t){let e=t;return"string"==typeof t&&(e={[t]:!0}),this.implied=Object.assign(this.implied||{},e),this}env(t){return this.envVar=t,this}argParser(t){return this.parseArg=t,this}makeOptionMandatory(t=!0){return this.mandatory=!!t,this}hideHelp(t=!0){return this.hidden=!!t,this}_concatValue(t,e){return e!==this.defaultValue&&Array.isArray(e)?e.concat(t):[t]}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,e)=>{if(!this.argChoices.includes(t))throw new C(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,e):t},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.name().replace(/^no-/,"").split("-").reduce(((t,e)=>t+e[0].toUpperCase()+e.slice(1)))}is(t){return this.short===t||this.long===t}isBoolean(){return!this.required&&!this.optional&&!this.negate}},O.splitOptionFlags=E,O.DualOptions=class{constructor(t){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,t.forEach((t=>{t.negate?this.negativeOptions.set(t.attributeName(),t):this.positiveOptions.set(t.attributeName(),t)})),this.negativeOptions.forEach(((t,e)=>{this.positiveOptions.has(e)&&this.dualOptions.add(e)}))}valueFromOption(t,e){const i=e.attributeName();if(!this.dualOptions.has(i))return!0;const s=this.negativeOptions.get(i).presetArg,r=void 0!==s&&s;return e.negate===(r===t)}};var A={};const T=3;A.suggestSimilar=function(t,e){if(!e||0===e.length)return"";e=Array.from(new Set(e));const i=t.startsWith("--");i&&(t=t.slice(2),e=e.map((t=>t.slice(2))));let s=[],r=T;return e.forEach((e=>{if(e.length<=1)return;const i=function(t,e){if(Math.abs(t.length-e.length)>T)return Math.max(t.length,e.length);const i=[];for(let e=0;e<=t.length;e++)i[e]=[e];for(let t=0;t<=e.length;t++)i[0][t]=t;for(let s=1;s<=e.length;s++)for(let r=1;r<=t.length;r++){let n=1;n=t[r-1]===e[s-1]?0:1,i[r][s]=Math.min(i[r-1][s]+1,i[r][s-1]+1,i[r-1][s-1]+n),r>1&&s>1&&t[r-1]===e[s-2]&&t[r-2]===e[s-1]&&(i[r][s]=Math.min(i[r][s],i[r-2][s-2]+1))}return i[t.length][e.length]}(t,e),n=Math.max(t.length,e.length);(n-i)/n>.4&&(i<r?(r=i,s=[e]):i===r&&s.push(e))})),s.sort(((t,e)=>t.localeCompare(e))),i&&(s=s.map((t=>`--${t}`))),s.length>1?`\n(Did you mean one of ${s.join(", ")}?)`:1===s.length?`\n(Did you mean ${s[0]}?)`:""};const M=s.EventEmitter,R=t,$=i,P=e,L=r,{Argument:F,humanReadableArgName:N}=w,{CommanderError:j}=b,{Help:D}=k,{Option:B,splitOptionFlags:I,DualOptions:z}=O,{suggestSimilar:W}=A;function H(t,e){t._hasHelpOption&&e.find((e=>e===t._helpLongFlag||e===t._helpShortFlag))&&(t.outputHelp(),t._exit(0,"commander.helpDisplayed","(outputHelp)"))}function V(t){return t.map((t=>{if(!t.startsWith("--inspect"))return t;let e,i,s="127.0.0.1",r="9229";return null!==(i=t.match(/^(--inspect(-brk)?)$/))?e=i[1]:null!==(i=t.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(e=i[1],/^\d+$/.test(i[3])?r=i[3]:s=i[3]):null!==(i=t.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(e=i[1],s=i[3],r=i[4]),e&&"0"!==r?`${e}=${s}:${parseInt(r)+1}`:t}))}function U(t){const e=[];for(let i=t;i;i=i.parent)e.push(i);return e}S.Command=class t extends M{constructor(t){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this._args=[],this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=t||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:t=>L.stdout.write(t),writeErr:t=>L.stderr.write(t),getOutHelpWidth:()=>L.stdout.isTTY?L.stdout.columns:void 0,getErrHelpWidth:()=>L.stderr.isTTY?L.stderr.columns:void 0,outputError:(t,e)=>e(t)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(t){return this._outputConfiguration=t._outputConfiguration,this._hasHelpOption=t._hasHelpOption,this._helpFlags=t._helpFlags,this._helpDescription=t._helpDescription,this._helpShortFlag=t._helpShortFlag,this._helpLongFlag=t._helpLongFlag,this._helpCommandName=t._helpCommandName,this._helpCommandnameAndArgs=t._helpCommandnameAndArgs,this._helpCommandDescription=t._helpCommandDescription,this._helpConfiguration=t._helpConfiguration,this._exitCallback=t._exitCallback,this._storeOptionsAsProperties=t._storeOptionsAsProperties,this._combineFlagAndOptionalValue=t._combineFlagAndOptionalValue,this._allowExcessArguments=t._allowExcessArguments,this._enablePositionalOptions=t._enablePositionalOptions,this._showHelpAfterError=t._showHelpAfterError,this._showSuggestionAfterError=t._showSuggestionAfterError,this}command(t,e,i){let s=e,r=i;"object"==typeof s&&null!==s&&(r=s,s=null),r=r||{};const[,n,o]=t.match(/([^ ]+) *(.*)/),a=this.createCommand(n);return s&&(a.description(s),a._executableHandler=!0),r.isDefault&&(this._defaultCommandName=a._name),a._hidden=!(!r.noHelp&&!r.hidden),a._executableFile=r.executableFile||null,o&&a.arguments(o),this.commands.push(a),a.parent=this,a.copyInheritedSettings(this),s?this:a}createCommand(e){return new t(e)}createHelp(){return Object.assign(new D,this.configureHelp())}configureHelp(t){return void 0===t?this._helpConfiguration:(this._helpConfiguration=t,this)}configureOutput(t){return void 0===t?this._outputConfiguration:(Object.assign(this._outputConfiguration,t),this)}showHelpAfterError(t=!0){return"string"!=typeof t&&(t=!!t),this._showHelpAfterError=t,this}showSuggestionAfterError(t=!0){return this._showSuggestionAfterError=!!t,this}addCommand(t,e){if(!t._name)throw new Error("Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()");return(e=e||{}).isDefault&&(this._defaultCommandName=t._name),(e.noHelp||e.hidden)&&(t._hidden=!0),this.commands.push(t),t.parent=this,this}createArgument(t,e){return new F(t,e)}argument(t,e,i,s){const r=this.createArgument(t,e);return"function"==typeof i?r.default(s).argParser(i):r.default(i),this.addArgument(r),this}arguments(t){return t.split(/ +/).forEach((t=>{this.argument(t)})),this}addArgument(t){const e=this._args.slice(-1)[0];if(e&&e.variadic)throw new Error(`only the last argument can be variadic '${e.name()}'`);if(t.required&&void 0!==t.defaultValue&&void 0===t.parseArg)throw new Error(`a default value for a required argument is never used: '${t.name()}'`);return this._args.push(t),this}addHelpCommand(t,e){return!1===t?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,"string"==typeof t&&(this._helpCommandName=t.split(" ")[0],this._helpCommandnameAndArgs=t),this._helpCommandDescription=e||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return void 0===this._addImplicitHelpCommand?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}hook(t,e){const i=["preSubcommand","preAction","postAction"];if(!i.includes(t))throw new Error(`Unexpected value for event passed to hook : '${t}'.\nExpecting one of '${i.join("', '")}'`);return this._lifeCycleHooks[t]?this._lifeCycleHooks[t].push(e):this._lifeCycleHooks[t]=[e],this}exitOverride(t){return this._exitCallback=t||(t=>{if("commander.executeSubCommandAsync"!==t.code)throw t}),this}_exit(t,e,i){this._exitCallback&&this._exitCallback(new j(t,e,i)),L.exit(t)}action(t){return this._actionHandler=e=>{const i=this._args.length,s=e.slice(0,i);return this._storeOptionsAsProperties?s[i]=this:s[i]=this.opts(),s.push(this),t.apply(this,s)},this}createOption(t,e){return new B(t,e)}addOption(t){const e=t.name(),i=t.attributeName();if(t.negate){const e=t.long.replace(/^--no-/,"--");this._findOption(e)||this.setOptionValueWithSource(i,void 0===t.defaultValue||t.defaultValue,"default")}else void 0!==t.defaultValue&&this.setOptionValueWithSource(i,t.defaultValue,"default");this.options.push(t);const s=(e,s,r)=>{null==e&&void 0!==t.presetArg&&(e=t.presetArg);const n=this.getOptionValue(i);if(null!==e&&t.parseArg)try{e=t.parseArg(e,n)}catch(t){if("commander.invalidArgument"===t.code){const e=`${s} ${t.message}`;this.error(e,{exitCode:t.exitCode,code:t.code})}throw t}else null!==e&&t.variadic&&(e=t._concatValue(e,n));null==e&&(e=!t.negate&&(!(!t.isBoolean()&&!t.optional)||"")),this.setOptionValueWithSource(i,e,r)};return this.on("option:"+e,(e=>{const i=`error: option '${t.flags}' argument '${e}' is invalid.`;s(e,i,"cli")})),t.envVar&&this.on("optionEnv:"+e,(e=>{const i=`error: option '${t.flags}' value '${e}' from env '${t.envVar}' is invalid.`;s(e,i,"env")})),this}_optionEx(t,e,i,s,r){if("object"==typeof e&&e instanceof B)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");const n=this.createOption(e,i);if(n.makeOptionMandatory(!!t.mandatory),"function"==typeof s)n.default(r).argParser(s);else if(s instanceof RegExp){const t=s;s=(e,i)=>{const s=t.exec(e);return s?s[0]:i},n.default(r).argParser(s)}else n.default(s);return this.addOption(n)}option(t,e,i,s){return this._optionEx({},t,e,i,s)}requiredOption(t,e,i,s){return this._optionEx({mandatory:!0},t,e,i,s)}combineFlagAndOptionalValue(t=!0){return this._combineFlagAndOptionalValue=!!t,this}allowUnknownOption(t=!0){return this._allowUnknownOption=!!t,this}allowExcessArguments(t=!0){return this._allowExcessArguments=!!t,this}enablePositionalOptions(t=!0){return this._enablePositionalOptions=!!t,this}passThroughOptions(t=!0){if(this._passThroughOptions=!!t,this.parent&&t&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(t=!0){if(this._storeOptionsAsProperties=!!t,this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this}getOptionValue(t){return this._storeOptionsAsProperties?this[t]:this._optionValues[t]}setOptionValue(t,e){return this.setOptionValueWithSource(t,e,void 0)}setOptionValueWithSource(t,e,i){return this._storeOptionsAsProperties?this[t]=e:this._optionValues[t]=e,this._optionValueSources[t]=i,this}getOptionValueSource(t){return this._optionValueSources[t]}getOptionValueSourceWithGlobals(t){let e;return U(this).forEach((i=>{void 0!==i.getOptionValueSource(t)&&(e=i.getOptionValueSource(t))})),e}_prepareUserArgs(t,e){if(void 0!==t&&!Array.isArray(t))throw new Error("first parameter to parse must be array or undefined");let i;switch(e=e||{},void 0===t&&(t=L.argv,L.versions&&L.versions.electron&&(e.from="electron")),this.rawArgs=t.slice(),e.from){case void 0:case"node":this._scriptPath=t[1],i=t.slice(2);break;case"electron":L.defaultApp?(this._scriptPath=t[1],i=t.slice(2)):i=t.slice(1);break;case"user":i=t.slice(0);break;default:throw new Error(`unexpected parse option { from: '${e.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",i}parse(t,e){const i=this._prepareUserArgs(t,e);return this._parseCommand([],i),this}async parseAsync(t,e){const i=this._prepareUserArgs(t,e);return await this._parseCommand([],i),this}_executeSubCommand(t,e){e=e.slice();let i=!1;const s=[".js",".ts",".tsx",".mjs",".cjs"];function r(t,e){const i=$.resolve(t,e);if(P.existsSync(i))return i;if(s.includes($.extname(e)))return;const r=s.find((t=>P.existsSync(`${i}${t}`)));return r?`${i}${r}`:void 0}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let n,o=t._executableFile||`${this._name}-${t._name}`,a=this._executableDir||"";if(this._scriptPath){let t;try{t=P.realpathSync(this._scriptPath)}catch(e){t=this._scriptPath}a=$.resolve($.dirname(t),a)}if(a){let e=r(a,o);if(!e&&!t._executableFile&&this._scriptPath){const i=$.basename(this._scriptPath,$.extname(this._scriptPath));i!==this._name&&(e=r(a,`${i}-${t._name}`))}o=e||o}if(i=s.includes($.extname(o)),"win32"!==L.platform?i?(e.unshift(o),e=V(L.execArgv).concat(e),n=R.spawn(L.argv[0],e,{stdio:"inherit"})):n=R.spawn(o,e,{stdio:"inherit"}):(e.unshift(o),e=V(L.execArgv).concat(e),n=R.spawn(L.execPath,e,{stdio:"inherit"})),!n.killed){["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((t=>{L.on(t,(()=>{!1===n.killed&&null===n.exitCode&&n.kill(t)}))}))}const h=this._exitCallback;h?n.on("close",(()=>{h(new j(L.exitCode||0,"commander.executeSubCommandAsync","(close)"))})):n.on("close",L.exit.bind(L)),n.on("error",(e=>{if("ENOENT"===e.code){const e=a?`searched for local subcommand relative to directory '${a}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",i=`'${o}' does not exist\n - if '${t._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${e}`;throw new Error(i)}if("EACCES"===e.code)throw new Error(`'${o}' not executable`);if(h){const t=new j(1,"commander.executeSubCommandAsync","(error)");t.nestedError=e,h(t)}else L.exit(1)})),this.runningCommand=n}_dispatchSubcommand(t,e,i){const s=this._findCommand(t);let r;return s||this.help({error:!0}),r=this._chainOrCallSubCommandHook(r,s,"preSubcommand"),r=this._chainOrCall(r,(()=>{if(!s._executableHandler)return s._parseCommand(e,i);this._executeSubCommand(s,e.concat(i))})),r}_checkNumberOfArguments(){this._args.forEach(((t,e)=>{t.required&&null==this.args[e]&&this.missingArgument(t.name())})),this._args.length>0&&this._args[this._args.length-1].variadic||this.args.length>this._args.length&&this._excessArguments(this.args)}_processArguments(){const t=(t,e,i)=>{let s=e;if(null!==e&&t.parseArg)try{s=t.parseArg(e,i)}catch(i){if("commander.invalidArgument"===i.code){const s=`error: command-argument value '${e}' is invalid for argument '${t.name()}'. ${i.message}`;this.error(s,{exitCode:i.exitCode,code:i.code})}throw i}return s};this._checkNumberOfArguments();const e=[];this._args.forEach(((i,s)=>{let r=i.defaultValue;i.variadic?s<this.args.length?(r=this.args.slice(s),i.parseArg&&(r=r.reduce(((e,s)=>t(i,s,e)),i.defaultValue))):void 0===r&&(r=[]):s<this.args.length&&(r=this.args[s],i.parseArg&&(r=t(i,r,i.defaultValue))),e[s]=r})),this.processedArgs=e}_chainOrCall(t,e){return t&&t.then&&"function"==typeof t.then?t.then((()=>e())):e()}_chainOrCallHooks(t,e){let i=t;const s=[];return U(this).reverse().filter((t=>void 0!==t._lifeCycleHooks[e])).forEach((t=>{t._lifeCycleHooks[e].forEach((e=>{s.push({hookedCommand:t,callback:e})}))})),"postAction"===e&&s.reverse(),s.forEach((t=>{i=this._chainOrCall(i,(()=>t.callback(t.hookedCommand,this)))})),i}_chainOrCallSubCommandHook(t,e,i){let s=t;return void 0!==this._lifeCycleHooks[i]&&this._lifeCycleHooks[i].forEach((t=>{s=this._chainOrCall(s,(()=>t(this,e)))})),s}_parseCommand(t,e){const i=this.parseOptions(e);if(this._parseOptionsEnv(),this._parseOptionsImplied(),t=t.concat(i.operands),e=i.unknown,this.args=t.concat(e),t&&this._findCommand(t[0]))return this._dispatchSubcommand(t[0],t.slice(1),e);if(this._hasImplicitHelpCommand()&&t[0]===this._helpCommandName)return 1===t.length&&this.help(),this._dispatchSubcommand(t[1],[],[this._helpLongFlag]);if(this._defaultCommandName)return H(this,e),this._dispatchSubcommand(this._defaultCommandName,t,e);!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this.help({error:!0}),H(this,i.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();const s=()=>{i.unknown.length>0&&this.unknownOption(i.unknown[0])},r=`command:${this.name()}`;if(this._actionHandler){let i;return s(),this._processArguments(),i=this._chainOrCallHooks(i,"preAction"),i=this._chainOrCall(i,(()=>this._actionHandler(this.processedArgs))),this.parent&&(i=this._chainOrCall(i,(()=>{this.parent.emit(r,t,e)}))),i=this._chainOrCallHooks(i,"postAction"),i}if(this.parent&&this.parent.listenerCount(r))s(),this._processArguments(),this.parent.emit(r,t,e);else if(t.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",t,e);this.listenerCount("command:*")?this.emit("command:*",t,e):this.commands.length?this.unknownCommand():(s(),this._processArguments())}else this.commands.length?(s(),this.help({error:!0})):(s(),this._processArguments())}_findCommand(t){if(t)return this.commands.find((e=>e._name===t||e._aliases.includes(t)))}_findOption(t){return this.options.find((e=>e.is(t)))}_checkForMissingMandatoryOptions(){for(let t=this;t;t=t.parent)t.options.forEach((e=>{e.mandatory&&void 0===t.getOptionValue(e.attributeName())&&t.missingMandatoryOptionValue(e)}))}_checkForConflictingLocalOptions(){const t=this.options.filter((t=>{const e=t.attributeName();return void 0!==this.getOptionValue(e)&&"default"!==this.getOptionValueSource(e)})),e=t.filter((t=>t.conflictsWith.length>0));e.forEach((e=>{const i=t.find((t=>e.conflictsWith.includes(t.attributeName())));i&&this._conflictingOption(e,i)}))}_checkForConflictingOptions(){for(let t=this;t;t=t.parent)t._checkForConflictingLocalOptions()}parseOptions(t){const e=[],i=[];let s=e;const r=t.slice();function n(t){return t.length>1&&"-"===t[0]}let o=null;for(;r.length;){const t=r.shift();if("--"===t){s===i&&s.push(t),s.push(...r);break}if(!o||n(t)){if(o=null,n(t)){const e=this._findOption(t);if(e){if(e.required){const t=r.shift();void 0===t&&this.optionMissingArgument(e),this.emit(`option:${e.name()}`,t)}else if(e.optional){let t=null;r.length>0&&!n(r[0])&&(t=r.shift()),this.emit(`option:${e.name()}`,t)}else this.emit(`option:${e.name()}`);o=e.variadic?e:null;continue}}if(t.length>2&&"-"===t[0]&&"-"!==t[1]){const e=this._findOption(`-${t[1]}`);if(e){e.required||e.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${e.name()}`,t.slice(2)):(this.emit(`option:${e.name()}`),r.unshift(`-${t.slice(2)}`));continue}}if(/^--[^=]+=/.test(t)){const e=t.indexOf("="),i=this._findOption(t.slice(0,e));if(i&&(i.required||i.optional)){this.emit(`option:${i.name()}`,t.slice(e+1));continue}}if(n(t)&&(s=i),(this._enablePositionalOptions||this._passThroughOptions)&&0===e.length&&0===i.length){if(this._findCommand(t)){e.push(t),r.length>0&&i.push(...r);break}if(t===this._helpCommandName&&this._hasImplicitHelpCommand()){e.push(t),r.length>0&&e.push(...r);break}if(this._defaultCommandName){i.push(t),r.length>0&&i.push(...r);break}}if(this._passThroughOptions){s.push(t),r.length>0&&s.push(...r);break}s.push(t)}else this.emit(`option:${o.name()}`,t)}return{operands:e,unknown:i}}opts(){if(this._storeOptionsAsProperties){const t={},e=this.options.length;for(let i=0;i<e;i++){const e=this.options[i].attributeName();t[e]=e===this._versionOptionName?this._version:this[e]}return t}return this._optionValues}optsWithGlobals(){return U(this).reduce(((t,e)=>Object.assign(t,e.opts())),{})}error(t,e){this._outputConfiguration.outputError(`${t}\n`,this._outputConfiguration.writeErr),"string"==typeof this._showHelpAfterError?this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`):this._showHelpAfterError&&(this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0}));const i=e||{},s=i.exitCode||1,r=i.code||"commander.error";this._exit(s,r,t)}_parseOptionsEnv(){this.options.forEach((t=>{if(t.envVar&&t.envVar in L.env){const e=t.attributeName();(void 0===this.getOptionValue(e)||["default","config","env"].includes(this.getOptionValueSource(e)))&&(t.required||t.optional?this.emit(`optionEnv:${t.name()}`,L.env[t.envVar]):this.emit(`optionEnv:${t.name()}`))}}))}_parseOptionsImplied(){const t=new z(this.options),e=t=>void 0!==this.getOptionValue(t)&&!["default","implied"].includes(this.getOptionValueSource(t));this.options.filter((i=>void 0!==i.implied&&e(i.attributeName())&&t.valueFromOption(this.getOptionValue(i.attributeName()),i))).forEach((t=>{Object.keys(t.implied).filter((t=>!e(t))).forEach((e=>{this.setOptionValueWithSource(e,t.implied[e],"implied")}))}))}missingArgument(t){const e=`error: missing required argument '${t}'`;this.error(e,{code:"commander.missingArgument"})}optionMissingArgument(t){const e=`error: option '${t.flags}' argument missing`;this.error(e,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(t){const e=`error: required option '${t.flags}' not specified`;this.error(e,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(t,e){const i=t=>{const e=t.attributeName(),i=this.getOptionValue(e),s=this.options.find((t=>t.negate&&e===t.attributeName())),r=this.options.find((t=>!t.negate&&e===t.attributeName()));return s&&(void 0===s.presetArg&&!1===i||void 0!==s.presetArg&&i===s.presetArg)?s:r||t},s=t=>{const e=i(t),s=e.attributeName();return"env"===this.getOptionValueSource(s)?`environment variable '${e.envVar}'`:`option '${e.flags}'`},r=`error: ${s(t)} cannot be used with ${s(e)}`;this.error(r,{code:"commander.conflictingOption"})}unknownOption(t){if(this._allowUnknownOption)return;let e="";if(t.startsWith("--")&&this._showSuggestionAfterError){let i=[],s=this;do{const t=s.createHelp().visibleOptions(s).filter((t=>t.long)).map((t=>t.long));i=i.concat(t),s=s.parent}while(s&&!s._enablePositionalOptions);e=W(t,i)}const i=`error: unknown option '${t}'${e}`;this.error(i,{code:"commander.unknownOption"})}_excessArguments(t){if(this._allowExcessArguments)return;const e=this._args.length,i=1===e?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${e} argument${i} but got ${t.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){const t=this.args[0];let e="";if(this._showSuggestionAfterError){const i=[];this.createHelp().visibleCommands(this).forEach((t=>{i.push(t.name()),t.alias()&&i.push(t.alias())})),e=W(t,i)}const i=`error: unknown command '${t}'${e}`;this.error(i,{code:"commander.unknownCommand"})}version(t,e,i){if(void 0===t)return this._version;this._version=t,e=e||"-V, --version",i=i||"output the version number";const s=this.createOption(e,i);return this._versionOptionName=s.attributeName(),this.options.push(s),this.on("option:"+s.name(),(()=>{this._outputConfiguration.writeOut(`${t}\n`),this._exit(0,"commander.version",t)})),this}description(t,e){return void 0===t&&void 0===e?this._description:(this._description=t,e&&(this._argsDescription=e),this)}summary(t){return void 0===t?this._summary:(this._summary=t,this)}alias(t){if(void 0===t)return this._aliases[0];let e=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(e=this.commands[this.commands.length-1]),t===e._name)throw new Error("Command alias can't be the same as its name");return e._aliases.push(t),this}aliases(t){return void 0===t?this._aliases:(t.forEach((t=>this.alias(t))),this)}usage(t){if(void 0===t){if(this._usage)return this._usage;const t=this._args.map((t=>N(t)));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?t:[]).join(" ")}return this._usage=t,this}name(t){return void 0===t?this._name:(this._name=t,this)}nameFromFilename(t){return this._name=$.basename(t,$.extname(t)),this}executableDir(t){return void 0===t?this._executableDir:(this._executableDir=t,this)}helpInformation(t){const e=this.createHelp();return void 0===e.helpWidth&&(e.helpWidth=t&&t.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),e.formatHelp(this,e)}_getHelpContext(t){const e={error:!!(t=t||{}).error};let i;return i=e.error?t=>this._outputConfiguration.writeErr(t):t=>this._outputConfiguration.writeOut(t),e.write=t.write||i,e.command=this,e}outputHelp(t){let e;"function"==typeof t&&(e=t,t=void 0);const i=this._getHelpContext(t);U(this).reverse().forEach((t=>t.emit("beforeAllHelp",i))),this.emit("beforeHelp",i);let s=this.helpInformation(i);if(e&&(s=e(s),"string"!=typeof s&&!Buffer.isBuffer(s)))throw new Error("outputHelp callback must return a string or a Buffer");i.write(s),this.emit(this._helpLongFlag),this.emit("afterHelp",i),U(this).forEach((t=>t.emit("afterAllHelp",i)))}helpOption(t,e){if("boolean"==typeof t)return this._hasHelpOption=t,this;this._helpFlags=t||this._helpFlags,this._helpDescription=e||this._helpDescription;const i=I(this._helpFlags);return this._helpShortFlag=i.shortFlag,this._helpLongFlag=i.longFlag,this}help(t){this.outputHelp(t);let e=L.exitCode||0;0===e&&t&&"function"!=typeof t&&t.error&&(e=1),this._exit(e,"commander.help","(outputHelp)")}addHelpText(t,e){const i=["beforeAll","before","after","afterAll"];if(!i.includes(t))throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${i.join("', '")}'`);const s=`${t}Help`;return this.on(s,(t=>{let i;i="function"==typeof e?e({error:t.error,command:t.command}):e,i&&t.write(`${i}\n`)})),this}},function(t,e){const{Argument:i}=w,{Command:s}=S,{CommanderError:r,InvalidArgumentError:n}=b,{Help:o}=k,{Option:a}=O;(e=t.exports=new s).program=e,e.Argument=i,e.Command=s,e.CommanderError=r,e.Help=o,e.InvalidArgumentError=n,e.InvalidOptionArgumentError=n,e.Option=a}(y,y.exports);var G=g(y.exports);const{program:q,createCommand:Y,createArgument:J,createOption:K,CommanderError:Z,InvalidArgumentError:Q,InvalidOptionArgumentError:X,Command:tt,Argument:et,Option:it,Help:st}=G,rt=t=>{fr(t);const{glob:e,...i}=t;if(!e)return i;const s=!0===e?t.signal?{signal:t.signal}:{}:t.signal?{signal:t.signal,...e}:e;return{...i,glob:{...s,absolute:!0,withFileTypes:!1}}};var nt=process.env.__TESTING_RIMRAF_PLATFORM__||process.platform;const ot=(t,e={})=>{const s=typeof t;if("string"!==s){const e=t&&"object"===s&&t.constructor,i=`The "path" argument must be of type string. Received ${e&&e.name?`an instance of ${e.name}`:"object"===s?n.inspect(t):`type ${s} ${t}`}`;throw Object.assign(new TypeError(i),{path:t,code:"ERR_INVALID_ARG_TYPE"})}if(/\0/.test(t)){const e="path must be a string without null bytes";throw Object.assign(new TypeError(e),{path:t,code:"ERR_INVALID_ARG_VALUE"})}t=i.resolve(t);const{root:r}=i.parse(t);if(t===r&&!1!==e.preserveRoot){const e="refusing to remove root directory without preserveRoot:false";throw Object.assign(new Error(e),{path:t,code:"ERR_PRESERVE_ROOT"})}if("win32"===nt){const e=/[*|"<>?:]/,{root:s}=i.parse(t);if(e.test(t.substring(s.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};var at=ht;function ht(t,e,i){t instanceof RegExp&&(t=lt(t,i)),e instanceof RegExp&&(e=lt(e,i));var s=ct(t,e,i);return s&&{start:s[0],end:s[1],pre:i.slice(0,s[0]),body:i.slice(s[0]+t.length,s[1]),post:i.slice(s[1]+e.length)}}function lt(t,e){var i=e.match(t);return i?i[0]:null}function ct(t,e,i){var s,r,n,o,a,h=i.indexOf(t),l=i.indexOf(e,h+1),c=h;if(h>=0&&l>0){if(t===e)return[h,l];for(s=[],n=i.length;c>=0&&!a;)c==h?(s.push(c),h=i.indexOf(t,c+1)):1==s.length?a=[s.pop(),l]:((r=s.pop())<n&&(n=r,o=l),l=i.indexOf(e,c+1)),c=h<l&&h>=0?h:l;s.length&&(a=[n,o])}return a}ht.range=ct;var ut=at,pt=function(t){if(!t)return[];"{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2));return Ot(function(t){return t.split("\\\\").join(dt).split("\\{").join(ft).split("\\}").join(mt).split("\\,").join(gt).split("\\.").join(yt)}(t),!0).map(bt)},dt="\0SLASH"+Math.random()+"\0",ft="\0OPEN"+Math.random()+"\0",mt="\0CLOSE"+Math.random()+"\0",gt="\0COMMA"+Math.random()+"\0",yt="\0PERIOD"+Math.random()+"\0";function wt(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function bt(t){return t.split(dt).join("\\").split(ft).join("{").split(mt).join("}").split(gt).join(",").split(yt).join(".")}function vt(t){if(!t)return[""];var e=[],i=ut("{","}",t);if(!i)return t.split(",");var s=i.pre,r=i.body,n=i.post,o=s.split(",");o[o.length-1]+="{"+r+"}";var a=vt(n);return n.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function xt(t){return"{"+t+"}"}function St(t){return/^-?0\d/.test(t)}function kt(t,e){return t<=e}function _t(t,e){return t>=e}function Ot(t,e){var i=[],s=ut("{","}",t);if(!s)return[t];var r=s.pre,n=s.post.length?Ot(s.post,!1):[""];if(/\$$/.test(s.pre))for(var o=0;o<n.length;o++){var a=r+"{"+s.body+"}"+n[o];i.push(a)}else{var h,l,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),p=c||u,d=s.body.indexOf(",")>=0;if(!p&&!d)return s.post.match(/,.*\}/)?Ot(t=s.pre+"{"+s.body+mt+s.post):[t];if(p)h=s.body.split(/\.\./);else if(1===(h=vt(s.body)).length&&1===(h=Ot(h[0],!1).map(xt)).length)return n.map((function(t){return s.pre+h[0]+t}));if(p){var f=wt(h[0]),m=wt(h[1]),g=Math.max(h[0].length,h[1].length),y=3==h.length?Math.abs(wt(h[2])):1,w=kt;m<f&&(y*=-1,w=_t);var b=h.some(St);l=[];for(var v=f;w(v,m);v+=y){var x;if(u)"\\"===(x=String.fromCharCode(v))&&(x="");else if(x=String(v),b){var S=g-x.length;if(S>0){var k=new Array(S+1).join("0");x=v<0?"-"+k+x.slice(1):k+x}}l.push(x)}}else{l=[];for(var _=0;_<h.length;_++)l.push.apply(l,Ot(h[_],!1))}for(_=0;_<l.length;_++)for(o=0;o<n.length;o++){a=r+l[_]+n[o];(!e||p||a)&&i.push(a)}}return i}var Ct=g(pt);const Et=t=>{if("string"!=typeof t)throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},At={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Tt=t=>t.replace(/[[\]\\-]/g,"\\$&"),Mt=t=>t.join(""),Rt=(t,e)=>{const i=e;if("["!==t.charAt(i))throw new Error("not in a brace expression");const s=[],r=[];let n=i+1,o=!1,a=!1,h=!1,l=!1,c=i,u="";t:for(;n<t.length;){const e=t.charAt(n);if("!"!==e&&"^"!==e||n!==i+1){if("]"===e&&o&&!h){c=n+1;break}if(o=!0,"\\"!==e||h){if("["===e&&!h)for(const[e,[o,h,l]]of Object.entries(At))if(t.startsWith(e,n)){if(u)return["$.",!1,t.length-i,!0];n+=e.length,l?r.push(o):s.push(o),a=a||h;continue t}h=!1,u?(e>u?s.push(Tt(u)+"-"+Tt(e)):e===u&&s.push(Tt(e)),u="",n++):t.startsWith("-]",n+1)?(s.push(Tt(e+"-")),n+=2):t.startsWith("-",n+1)?(u=e,n+=2):(s.push(Tt(e)),n++)}else h=!0,n++}else l=!0,n++}if(c<n)return["",!1,0,!1];if(!s.length&&!r.length)return["$.",!1,t.length-i,!0];if(0===r.length&&1===s.length&&/^\\?.$/.test(s[0])&&!l){const t=2===s[0].length?s[0].slice(-1):s[0];return[(p=t,p.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,c-i,!1]}var p;const d="["+(l?"^":"")+Mt(s)+"]",f="["+(l?"":"^")+Mt(r)+"]";return[s.length&&r.length?"("+d+"|"+f+")":s.length?d:f,a,c-i,!0]},$t=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),Pt=new Set(["!","?","+","*","@"]),Lt=t=>Pt.has(t),Ft="(?!\\.)",Nt=new Set(["[","."]),jt=new Set(["..","."]),Dt=new Set("().*{}+?[]^$\\!"),Bt="[^/]",It=Bt+"*?",zt=Bt+"+?";class Wt{type;#t;#e;#i=!1;#s=[];#r;#n;#o;#a=!1;#h;#l;#c=!1;constructor(t,e,i={}){this.type=t,t&&(this.#e=!0),this.#r=e,this.#t=this.#r?this.#r.#t:this,this.#h=this.#t===this?i:this.#t.#h,this.#o=this.#t===this?[]:this.#t.#o,"!"!==t||this.#t.#a||this.#o.push(this),this.#n=this.#r?this.#r.#s.length:0}get hasMagic(){if(void 0!==this.#e)return this.#e;for(const t of this.#s)if("string"!=typeof t&&(t.type||t.hasMagic))return this.#e=!0;return this.#e}toString(){return void 0!==this.#l?this.#l:this.type?this.#l=this.type+"("+this.#s.map((t=>String(t))).join("|")+")":this.#l=this.#s.map((t=>String(t))).join("")}#u(){if(this!==this.#t)throw new Error("should only call on root");if(this.#a)return this;let t;for(this.toString(),this.#a=!0;t=this.#o.pop();){if("!"!==t.type)continue;let e=t,i=e.#r;for(;i;){for(let s=e.#n+1;!i.type&&s<i.#s.length;s++)for(const e of t.#s){if("string"==typeof e)throw new Error("string part in extglob AST??");e.copyIn(i.#s[s])}e=i,i=e.#r}}return this}push(...t){for(const e of t)if(""!==e){if("string"!=typeof e&&!(e instanceof Wt&&e.#r===this))throw new Error("invalid part: "+e);this.#s.push(e)}}toJSON(){const t=null===this.type?this.#s.slice().map((t=>"string"==typeof t?t:t.toJSON())):[this.type,...this.#s.map((t=>t.toJSON()))];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#a&&"!"===this.#r?.type)&&t.push({}),t}isStart(){if(this.#t===this)return!0;if(!this.#r?.isStart())return!1;if(0===this.#n)return!0;const t=this.#r;for(let e=0;e<this.#n;e++){const i=t.#s[e];if(!(i instanceof Wt&&"!"===i.type))return!1}return!0}isEnd(){if(this.#t===this)return!0;if("!"===this.#r?.type)return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();const t=this.#r?this.#r.#s.length:0;return this.#n===t-1}copyIn(t){"string"==typeof t?this.push(t):this.push(t.clone(this))}clone(t){const e=new Wt(this.type,t);for(const t of this.#s)e.copyIn(t);return e}static#p(t,e,i,s){let r=!1,n=!1,o=-1,a=!1;if(null===e.type){let h=i,l="";for(;h<t.length;){const i=t.charAt(h++);if(r||"\\"===i)r=!r,l+=i;else if(n)h===o+1?"^"!==i&&"!"!==i||(a=!0):"]"!==i||h===o+2&&a||(n=!1),l+=i;else if("["!==i)if(s.noext||!Lt(i)||"("!==t.charAt(h))l+=i;else{e.push(l),l="";const r=new Wt(i,e);h=Wt.#p(t,r,h,s),e.push(r)}else n=!0,o=h,a=!1,l+=i}return e.push(l),h}let h=i+1,l=new Wt(null,e);const c=[];let u="";for(;h<t.length;){const i=t.charAt(h++);if(r||"\\"===i)r=!r,u+=i;else if(n)h===o+1?"^"!==i&&"!"!==i||(a=!0):"]"!==i||h===o+2&&a||(n=!1),u+=i;else if("["!==i)if(Lt(i)&&"("===t.charAt(h)){l.push(u),u="";const e=new Wt(i,l);l.push(e),h=Wt.#p(t,e,h,s)}else if("|"!==i){if(")"===i)return""===u&&0===e.#s.length&&(e.#c=!0),l.push(u),u="",e.push(...c,l),h;u+=i}else l.push(u),u="",c.push(l),l=new Wt(null,e);else n=!0,o=h,a=!1,u+=i}return e.type=null,e.#e=void 0,e.#s=[t.substring(i-1)],h}static fromGlob(t,e={}){const i=new Wt(null,void 0,e);return Wt.#p(t,i,0,e),i}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();const t=this.toString(),[e,i,s,r]=this.toRegExpSource();if(!(s||this.#e||this.#h.nocase&&!this.#h.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return i;const n=(this.#h.nocase?"i":"")+(r?"u":"");return Object.assign(new RegExp(`^${e}$`,n),{_src:e,_glob:t})}toRegExpSource(){if(this.#t===this&&this.#u(),!this.type){const t=this.isStart()&&this.isEnd(),e=this.#s.map((e=>{const[i,s,r,n]="string"==typeof e?Wt.#d(e,this.#e,t):e.toRegExpSource();return this.#e=this.#e||r,this.#i=this.#i||n,i})).join("");let i="";if(this.isStart()&&"string"==typeof this.#s[0]){if(!(1===this.#s.length&&jt.has(this.#s[0]))){const t=Nt,s=this.#h.dot&&t.has(e.charAt(0))||e.startsWith("\\.")&&t.has(e.charAt(2))||e.startsWith("\\.\\.")&&t.has(e.charAt(4)),r=!this.#h.dot&&t.has(e.charAt(0));i=s?"(?!\\.\\.?(?:$|/))":r?Ft:""}}let s="";this.isEnd()&&this.#t.#a&&"!"===this.#r?.type&&(s="(?:$|\\/)");return[i+e+s,$t(e),this.#e=!!this.#e,this.#i]}const t="!"===this.type?"(?:(?!(?:":"(?:",e=this.#s.map((t=>{if("string"==typeof t)throw new Error("string type in extglob ast??");const[e,i,s,r]=t.toRegExpSource();return this.#i=this.#i||r,e})).filter((t=>!(this.isStart()&&this.isEnd()&&!t))).join("|");if(this.isStart()&&this.isEnd()&&!e&&"!"!==this.type){const t=this.toString();return this.#s=[t],this.type=null,this.#e=void 0,[t,$t(this.toString()),!1,!1]}let i="";if("!"===this.type&&this.#c)i=(this.isStart()&&!this.#h.dot?Ft:"")+zt;else{i=t+e+("!"===this.type?"))"+(this.isStart()&&!this.#h.dot?Ft:"")+It+")":"@"===this.type?")":`)${this.type}`)}return[i,$t(e),this.#e=!!this.#e,this.#i]}static#d(t,e,i=!1){let s=!1,r="",n=!1;for(let o=0;o<t.length;o++){const a=t.charAt(o);if(s)s=!1,r+=(Dt.has(a)?"\\":"")+a;else if("\\"!==a){if("["===a){const[i,s,a,h]=Rt(t,o);if(a){r+=i,n=n||s,o+=a-1,e=e||h;continue}}"*"!==a?"?"!==a?r+=a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):(r+=Bt,e=!0):(r+=i&&"*"===t?zt:It,e=!0)}else o===t.length-1?r+="\\\\":s=!0}return[r,$t(t),!!e,n]}}const Ht=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),Vt=(t,e,i={})=>(Et(e),!(!i.nocomment&&"#"===e.charAt(0))&&new ge(e,i).match(t)),Ut=/^\*+([^+@!?\*\[\(]*)$/,Gt=t=>e=>!e.startsWith(".")&&e.endsWith(t),qt=t=>e=>e.endsWith(t),Yt=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Jt=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),Kt=/^\*+\.\*+$/,Zt=t=>!t.startsWith(".")&&t.includes("."),Qt=t=>"."!==t&&".."!==t&&t.includes("."),Xt=/^\.\*+$/,te=t=>"."!==t&&".."!==t&&t.startsWith("."),ee=/^\*+$/,ie=t=>0!==t.length&&!t.startsWith("."),se=t=>0!==t.length&&"."!==t&&".."!==t,re=/^\?+([^+@!?\*\[\(]*)?$/,ne=([t,e=""])=>{const i=le([t]);return e?(e=e.toLowerCase(),t=>i(t)&&t.toLowerCase().endsWith(e)):i},oe=([t,e=""])=>{const i=ce([t]);return e?(e=e.toLowerCase(),t=>i(t)&&t.toLowerCase().endsWith(e)):i},ae=([t,e=""])=>{const i=ce([t]);return e?t=>i(t)&&t.endsWith(e):i},he=([t,e=""])=>{const i=le([t]);return e?t=>i(t)&&t.endsWith(e):i},le=([t])=>{const e=t.length;return t=>t.length===e&&!t.startsWith(".")},ce=([t])=>{const e=t.length;return t=>t.length===e&&"."!==t&&".."!==t},ue="object"==typeof process&&process?"object"==typeof process.env&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";Vt.sep="win32"===ue?{sep:"\\"}.sep:{sep:"/"}.sep;const pe=Symbol("globstar **");Vt.GLOBSTAR=pe;Vt.filter=(t,e={})=>i=>Vt(i,t,e);const de=(t,e={})=>Object.assign({},t,e);Vt.defaults=t=>{if(!t||"object"!=typeof t||!Object.keys(t).length)return Vt;const e=Vt;return Object.assign(((i,s,r={})=>e(i,s,de(t,r))),{Minimatch:class extends e.Minimatch{constructor(e,i={}){super(e,de(t,i))}static defaults(i){return e.defaults(de(t,i)).Minimatch}},AST:class extends e.AST{constructor(e,i,s={}){super(e,i,de(t,s))}static fromGlob(i,s={}){return e.AST.fromGlob(i,de(t,s))}},unescape:(i,s={})=>e.unescape(i,de(t,s)),escape:(i,s={})=>e.escape(i,de(t,s)),filter:(i,s={})=>e.filter(i,de(t,s)),defaults:i=>e.defaults(de(t,i)),makeRe:(i,s={})=>e.makeRe(i,de(t,s)),braceExpand:(i,s={})=>e.braceExpand(i,de(t,s)),match:(i,s,r={})=>e.match(i,s,de(t,r)),sep:e.sep,GLOBSTAR:pe})};const fe=(t,e={})=>(Et(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:Ct(t));Vt.braceExpand=fe;Vt.makeRe=(t,e={})=>new ge(t,e).makeRe();Vt.match=(t,e,i={})=>{const s=new ge(e,i);return t=t.filter((t=>s.match(t))),s.options.nonull&&!t.length&&t.push(e),t};const me=/[?*]|[+@!]\(.*?\)|\[|\]/;class ge{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){Et(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||ue,this.isWindows="win32"===this.platform,this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||!1===e.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=void 0!==e.windowsNoMagicRoot?e.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const t of this.set)for(const e of t)if("string"!=typeof e)return!0;return!1}debug(...t){}make(){const t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...t)=>console.error(...t)),this.debug(this.pattern,this.globSet);const i=this.globSet.map((t=>this.slashSplit(t)));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let s=this.globParts.map(((t,e,i)=>{if(this.isWindows&&this.windowsNoMagicRoot){const e=!(""!==t[0]||""!==t[1]||"?"!==t[2]&&me.test(t[2])||me.test(t[3])),i=/^[a-z]:/i.test(t[0]);if(e)return[...t.slice(0,4),...t.slice(4).map((t=>this.parse(t)))];if(i)return[t[0],...t.slice(1).map((t=>this.parse(t)))]}return t.map((t=>this.parse(t)))}));if(this.debug(this.pattern,s),this.set=s.filter((t=>-1===t.indexOf(!1))),this.isWindows)for(let t=0;t<this.set.length;t++){const e=this.set[t];""===e[0]&&""===e[1]&&"?"===this.globParts[t][2]&&"string"==typeof e[3]&&/^[a-z]:$/i.test(e[3])&&(e[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let e=0;e<t.length;e++)for(let i=0;i<t[e].length;i++)"**"===t[e][i]&&(t[e][i]="*");const{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):t=e>=1?this.levelOneOptimize(t):this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map((t=>{let e=-1;for(;-1!==(e=t.indexOf("**",e+1));){let i=e;for(;"**"===t[i+1];)i++;i!==e&&t.splice(e,i-e)}return t}))}levelOneOptimize(t){return t.map((t=>0===(t=t.reduce(((t,e)=>{const i=t[t.length-1];return"**"===e&&"**"===i?t:".."===e&&i&&".."!==i&&"."!==i&&"**"!==i?(t.pop(),t):(t.push(e),t)}),[])).length?[""]:t))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let i=1;i<t.length-1;i++){const s=t[i];1===i&&""===s&&""===t[0]||("."!==s&&""!==s||(e=!0,t.splice(i,1),i--))}"."!==t[0]||2!==t.length||"."!==t[1]&&""!==t[1]||(e=!0,t.pop())}let i=0;for(;-1!==(i=t.indexOf("..",i+1));){const s=t[i-1];s&&"."!==s&&".."!==s&&"**"!==s&&(e=!0,t.splice(i-1,2),i-=2)}}while(e);return 0===t.length?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let i of t){let s=-1;for(;-1!==(s=i.indexOf("**",s+1));){let r=s;for(;"**"===i[r+1];)r++;r>s&&i.splice(s+1,r-s);let n=i[s+1];const o=i[s+2],a=i[s+3];if(".."!==n)continue;if(!o||"."===o||".."===o||!a||"."===a||".."===a)continue;e=!0,i.splice(s,1);const h=i.slice(0);h[s]="**",t.push(h),s--}if(!this.preserveMultipleSlashes){for(let t=1;t<i.length-1;t++){const s=i[t];1===t&&""===s&&""===i[0]||("."!==s&&""!==s||(e=!0,i.splice(t,1),t--))}"."!==i[0]||2!==i.length||"."!==i[1]&&""!==i[1]||(e=!0,i.pop())}let r=0;for(;-1!==(r=i.indexOf("..",r+1));){const t=i[r-1];if(t&&"."!==t&&".."!==t&&"**"!==t){e=!0;const t=1===r&&"**"===i[r+1]?["."]:[];i.splice(r-1,2,...t),0===i.length&&i.push(""),r-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let i=e+1;i<t.length;i++){const s=this.partsMatch(t[e],t[i],!this.preserveMultipleSlashes);s&&(t[e]=s,t[i]=[])}return t.filter((t=>t.length))}partsMatch(t,e,i=!1){let s=0,r=0,n=[],o="";for(;s<t.length&&r<e.length;)if(t[s]===e[r])n.push("b"===o?e[r]:t[s]),s++,r++;else if(i&&"**"===t[s]&&e[r]===t[s+1])n.push(t[s]),s++;else if(i&&"**"===e[r]&&t[s]===e[r+1])n.push(e[r]),r++;else if("*"!==t[s]||!e[r]||!this.options.dot&&e[r].startsWith(".")||"**"===e[r]){if("*"!==e[r]||!t[s]||!this.options.dot&&t[s].startsWith(".")||"**"===t[s])return!1;if("a"===o)return!1;o="b",n.push(e[r]),s++,r++}else{if("b"===o)return!1;o="a",n.push(t[s]),s++,r++}return t.length===e.length&&n}parseNegate(){if(this.nonegate)return;const t=this.pattern;let e=!1,i=0;for(let s=0;s<t.length&&"!"===t.charAt(s);s++)e=!e,i++;i&&(this.pattern=t.slice(i)),this.negate=e}matchOne(t,e,i=!1){const s=this.options;if(this.isWindows){const i=""===t[0]&&""===t[1]&&"?"===t[2]&&"string"==typeof t[3]&&/^[a-z]:$/i.test(t[3]),s=""===e[0]&&""===e[1]&&"?"===e[2]&&"string"==typeof e[3]&&/^[a-z]:$/i.test(e[3]);if(i&&s){const i=t[3],s=e[3];i.toLowerCase()===s.toLowerCase()&&(t[3]=s)}else if(s&&"string"==typeof t[0]){const i=e[3],s=t[0];i.toLowerCase()===s.toLowerCase()&&(e[3]=s,e=e.slice(3))}else if(i&&"string"==typeof e[0]){const i=t[3];i.toLowerCase()===e[0].toLowerCase()&&(e[0]=i,t=t.slice(3))}}const{optimizationLevel:r=1}=this.options;r>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var n=0,o=0,a=t.length,h=e.length;n<a&&o<h;n++,o++){this.debug("matchOne loop");var l=e[o],c=t[n];if(this.debug(e,l,c),!1===l)return!1;if(l===pe){this.debug("GLOBSTAR",[e,l,c]);var u=n,p=o+1;if(p===h){for(this.debug("** at the end");n<a;n++)if("."===t[n]||".."===t[n]||!s.dot&&"."===t[n].charAt(0))return!1;return!0}for(;u<a;){var d=t[u];if(this.debug("\nglobstar while",t,u,e,p,d),this.matchOne(t.slice(u),e.slice(p),i))return this.debug("globstar found match!",u,a,d),!0;if("."===d||".."===d||!s.dot&&"."===d.charAt(0)){this.debug("dot detected!",t,u,e,p);break}this.debug("globstar swallow a segment, and continue"),u++}return!(!i||(this.debug("\n>>> no match, partial?",t,u,e,p),u!==a))}let r;if("string"==typeof l?(r=c===l,this.debug("string match",l,c,r)):(r=l.test(c),this.debug("pattern match",l,c,r)),!r)return!1}if(n===a&&o===h)return!0;if(n===a)return i;if(o===h)return n===a-1&&""===t[n];throw new Error("wtf?")}braceExpand(){return fe(this.pattern,this.options)}parse(t){Et(t);const e=this.options;if("**"===t)return pe;if(""===t)return"";let i,s=null;(i=t.match(ee))?s=e.dot?se:ie:(i=t.match(Ut))?s=(e.nocase?e.dot?Jt:Yt:e.dot?qt:Gt)(i[1]):(i=t.match(re))?s=(e.nocase?e.dot?oe:ne:e.dot?ae:he)(i):(i=t.match(Kt))?s=e.dot?Qt:Zt:(i=t.match(Xt))&&(s=te);const r=Wt.fromGlob(t,this.options).toMMPattern();return s?Object.assign(r,{test:s}):r}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const e=this.options,i=e.noglobstar?"[^/]*?":e.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",s=new Set(e.nocase?["i"]:[]);let r=t.map((t=>{const e=t.map((t=>{if(t instanceof RegExp)for(const e of t.flags.split(""))s.add(e);return"string"==typeof t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):t===pe?pe:t._src}));return e.forEach(((t,s)=>{const r=e[s+1],n=e[s-1];t===pe&&n!==pe&&(void 0===n?void 0!==r&&r!==pe?e[s+1]="(?:\\/|"+i+"\\/)?"+r:e[s]=i:void 0===r?e[s-1]=n+"(?:\\/|"+i+")?":r!==pe&&(e[s-1]=n+"(?:\\/|\\/"+i+"\\/)"+r,e[s+1]=pe))})),e.filter((t=>t!==pe)).join("/")})).join("|");const[n,o]=t.length>1?["(?:",")"]:["",""];r="^"+n+r+o+"$",this.negate&&(r="^(?!"+r+").+$");try{this.regexp=new RegExp(r,[...s].join(""))}catch(t){this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;const i=this.options;this.isWindows&&(t=t.split("\\").join("/"));const s=this.slashSplit(t);this.debug(this.pattern,"split",s);const r=this.set;this.debug(this.pattern,"set",r);let n=s[s.length-1];if(!n)for(let t=s.length-2;!n&&t>=0;t--)n=s[t];for(let t=0;t<r.length;t++){const o=r[t];let a=s;i.matchBase&&1===o.length&&(a=[n]);if(this.matchOne(a,o,e))return!!i.flipNegate||!this.negate}return!i.flipNegate&&this.negate}static defaults(t){return Vt.defaults(t).Minimatch}}Vt.AST=Wt,Vt.Minimatch=ge,Vt.escape=Ht,Vt.unescape=$t;const ye="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,we=new Set,be="object"==typeof process&&process?process:{},ve=(t,e,i,s)=>{"function"==typeof be.emitWarning?be.emitWarning(t,e,i,s):console.error(`[${i}] ${e}: ${t}`)};let xe=globalThis.AbortController,Se=globalThis.AbortSignal;if(void 0===xe){Se=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,e){this._onabort.push(e)}},xe=class{constructor(){e()}signal=new Se;abort(t){if(!this.signal.aborted){this.signal.reason=t,this.signal.aborted=!0;for(const e of this.signal._onabort)e(t);this.signal.onabort?.(t)}}};let t="1"!==be.env?.LRU_CACHE_IGNORE_AC_WARNING;const e=()=>{t&&(t=!1,ve("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const ke=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),_e=t=>ke(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Oe:null:null;class Oe extends Array{constructor(t){super(t),this.fill(0)}}class Ce{heap;length;static#f=!1;static create(t){const e=_e(t);if(!e)return[];Ce.#f=!0;const i=new Ce(t,e);return Ce.#f=!1,i}constructor(t,e){if(!Ce.#f)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class Ee{#m;#g;#y;#w;#b;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#v;#x;#S;#k;#_;#O;#C;#E;#A;#T;#M;#R;#$;#P;#L;#F;#N;static unsafeExposeInternals(t){return{starts:t.#$,ttls:t.#P,sizes:t.#R,keyMap:t.#S,keyList:t.#k,valList:t.#_,next:t.#O,prev:t.#C,get head(){return t.#E},get tail(){return t.#A},free:t.#T,isBackgroundFetch:e=>t.#j(e),backgroundFetch:(e,i,s,r)=>t.#D(e,i,s,r),moveToTail:e=>t.#B(e),indexes:e=>t.#I(e),rindexes:e=>t.#z(e),isStale:e=>t.#W(e)}}get max(){return this.#m}get maxSize(){return this.#g}get calculatedSize(){return this.#x}get size(){return this.#v}get fetchMethod(){return this.#b}get dispose(){return this.#y}get disposeAfter(){return this.#w}constructor(t){const{max:e=0,ttl:i,ttlResolution:s=1,ttlAutopurge:r,updateAgeOnGet:n,updateAgeOnHas:o,allowStale:a,dispose:h,disposeAfter:l,noDisposeOnSet:c,noUpdateTTL:u,maxSize:p=0,maxEntrySize:d=0,sizeCalculation:f,fetchMethod:m,noDeleteOnFetchRejection:g,noDeleteOnStaleGet:y,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:b,ignoreFetchAbort:v}=t;if(0!==e&&!ke(e))throw new TypeError("max option must be a nonnegative integer");const x=e?_e(e):Array;if(!x)throw new Error("invalid max value: "+e);if(this.#m=e,this.#g=p,this.maxEntrySize=d||this.#g,this.sizeCalculation=f,this.sizeCalculation){if(!this.#g&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==m&&"function"!=typeof m)throw new TypeError("fetchMethod must be a function if specified");if(this.#b=m,this.#F=!!m,this.#S=new Map,this.#k=new Array(e).fill(void 0),this.#_=new Array(e).fill(void 0),this.#O=new x(e),this.#C=new x(e),this.#E=0,this.#A=0,this.#T=Ce.create(e),this.#v=0,this.#x=0,"function"==typeof h&&(this.#y=h),"function"==typeof l?(this.#w=l,this.#M=[]):(this.#w=void 0,this.#M=void 0),this.#L=!!this.#y,this.#N=!!this.#w,this.noDisposeOnSet=!!c,this.noUpdateTTL=!!u,this.noDeleteOnFetchRejection=!!g,this.allowStaleOnFetchRejection=!!w,this.allowStaleOnFetchAbort=!!b,this.ignoreFetchAbort=!!v,0!==this.maxEntrySize){if(0!==this.#g&&!ke(this.#g))throw new TypeError("maxSize must be a positive integer if specified");if(!ke(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#H()}if(this.allowStale=!!a,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!n,this.updateAgeOnHas=!!o,this.ttlResolution=ke(s)||0===s?s:1,this.ttlAutopurge=!!r,this.ttl=i||0,this.ttl){if(!ke(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#V()}if(0===this.#m&&0===this.ttl&&0===this.#g)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#m&&!this.#g){const t="LRU_CACHE_UNBOUNDED";if((t=>!we.has(t))(t)){we.add(t);ve("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,Ee)}}}getRemainingTTL(t){return this.#S.has(t)?1/0:0}#V(){const t=new Oe(this.#m),e=new Oe(this.#m);this.#P=t,this.#$=e,this.#U=(i,s,r=ye.now())=>{if(e[i]=0!==s?r:0,t[i]=s,0!==s&&this.ttlAutopurge){const t=setTimeout((()=>{this.#W(i)&&this.delete(this.#k[i])}),s+1);t.unref&&t.unref()}},this.#G=i=>{e[i]=0!==t[i]?ye.now():0},this.#q=(r,n)=>{if(t[n]){const o=t[n],a=e[n];r.ttl=o,r.start=a,r.now=i||s();const h=r.now-a;r.remainingTTL=o-h}};let i=0;const s=()=>{const t=ye.now();if(this.ttlResolution>0){i=t;const e=setTimeout((()=>i=0),this.ttlResolution);e.unref&&e.unref()}return t};this.getRemainingTTL=r=>{const n=this.#S.get(r);if(void 0===n)return 0;const o=t[n],a=e[n];if(0===o||0===a)return 1/0;return o-((i||s())-a)},this.#W=r=>0!==t[r]&&0!==e[r]&&(i||s())-e[r]>t[r]}#G=()=>{};#q=()=>{};#U=()=>{};#W=()=>!1;#H(){const t=new Oe(this.#m);this.#x=0,this.#R=t,this.#Y=e=>{this.#x-=t[e],t[e]=0},this.#J=(t,e,i,s)=>{if(this.#j(e))return 0;if(!ke(i)){if(!s)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof s)throw new TypeError("sizeCalculation must be a function");if(i=s(e,t),!ke(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return i},this.#K=(e,i,s)=>{if(t[e]=i,this.#g){const i=this.#g-t[e];for(;this.#x>i;)this.#Z(!0)}this.#x+=t[e],s&&(s.entrySize=i,s.totalCalculatedSize=this.#x)}}#Y=t=>{};#K=(t,e,i)=>{};#J=(t,e,i,s)=>{if(i||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#I({allowStale:t=this.allowStale}={}){if(this.#v)for(let e=this.#A;this.#Q(e)&&(!t&&this.#W(e)||(yield e),e!==this.#E);)e=this.#C[e]}*#z({allowStale:t=this.allowStale}={}){if(this.#v)for(let e=this.#E;this.#Q(e)&&(!t&&this.#W(e)||(yield e),e!==this.#A);)e=this.#O[e]}#Q(t){return void 0!==t&&this.#S.get(this.#k[t])===t}*entries(){for(const t of this.#I())void 0===this.#_[t]||void 0===this.#k[t]||this.#j(this.#_[t])||(yield[this.#k[t],this.#_[t]])}*rentries(){for(const t of this.#z())void 0===this.#_[t]||void 0===this.#k[t]||this.#j(this.#_[t])||(yield[this.#k[t],this.#_[t]])}*keys(){for(const t of this.#I()){const e=this.#k[t];void 0===e||this.#j(this.#_[t])||(yield e)}}*rkeys(){for(const t of this.#z()){const e=this.#k[t];void 0===e||this.#j(this.#_[t])||(yield e)}}*values(){for(const t of this.#I()){void 0===this.#_[t]||this.#j(this.#_[t])||(yield this.#_[t])}}*rvalues(){for(const t of this.#z()){void 0===this.#_[t]||this.#j(this.#_[t])||(yield this.#_[t])}}[Symbol.iterator](){return this.entries()}find(t,e={}){for(const i of this.#I()){const s=this.#_[i],r=this.#j(s)?s.__staleWhileFetching:s;if(void 0!==r&&t(r,this.#k[i],this))return this.get(this.#k[i],e)}}forEach(t,e=this){for(const i of this.#I()){const s=this.#_[i],r=this.#j(s)?s.__staleWhileFetching:s;void 0!==r&&t.call(e,r,this.#k[i],this)}}rforEach(t,e=this){for(const i of this.#z()){const s=this.#_[i],r=this.#j(s)?s.__staleWhileFetching:s;void 0!==r&&t.call(e,r,this.#k[i],this)}}purgeStale(){let t=!1;for(const e of this.#z({allowStale:!0}))this.#W(e)&&(this.delete(this.#k[e]),t=!0);return t}dump(){const t=[];for(const e of this.#I({allowStale:!0})){const i=this.#k[e],s=this.#_[e],r=this.#j(s)?s.__staleWhileFetching:s;if(void 0===r||void 0===i)continue;const n={value:r};if(this.#P&&this.#$){n.ttl=this.#P[e];const t=ye.now()-this.#$[e];n.start=Math.floor(Date.now()-t)}this.#R&&(n.size=this.#R[e]),t.unshift([i,n])}return t}load(t){this.clear();for(const[e,i]of t){if(i.start){const t=Date.now()-i.start;i.start=ye.now()-t}this.set(e,i.value,i)}}set(t,e,i={}){if(void 0===e)return this.delete(t),this;const{ttl:s=this.ttl,start:r,noDisposeOnSet:n=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=i;let{noUpdateTTL:h=this.noUpdateTTL}=i;const l=this.#J(t,e,i.size||0,o);if(this.maxEntrySize&&l>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.delete(t),this;let c=0===this.#v?void 0:this.#S.get(t);if(void 0===c)c=0===this.#v?this.#A:0!==this.#T.length?this.#T.pop():this.#v===this.#m?this.#Z(!1):this.#v,this.#k[c]=t,this.#_[c]=e,this.#S.set(t,c),this.#O[this.#A]=c,this.#C[c]=this.#A,this.#A=c,this.#v++,this.#K(c,l,a),a&&(a.set="add"),h=!1;else{this.#B(c);const i=this.#_[c];if(e!==i){if(this.#F&&this.#j(i)?i.__abortController.abort(new Error("replaced")):n||(this.#L&&this.#y?.(i,t,"set"),this.#N&&this.#M?.push([i,t,"set"])),this.#Y(c),this.#K(c,l,a),this.#_[c]=e,a){a.set="replace";const t=i&&this.#j(i)?i.__staleWhileFetching:i;void 0!==t&&(a.oldValue=t)}}else a&&(a.set="update")}if(0===s||this.#P||this.#V(),this.#P&&(h||this.#U(c,s,r),a&&this.#q(a,c)),!n&&this.#N&&this.#M){const t=this.#M;let e;for(;e=t?.shift();)this.#w?.(...e)}return this}pop(){try{for(;this.#v;){const t=this.#_[this.#E];if(this.#Z(!0),this.#j(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(void 0!==t)return t}}finally{if(this.#N&&this.#M){const t=this.#M;let e;for(;e=t?.shift();)this.#w?.(...e)}}}#Z(t){const e=this.#E,i=this.#k[e],s=this.#_[e];return this.#F&&this.#j(s)?s.__abortController.abort(new Error("evicted")):(this.#L||this.#N)&&(this.#L&&this.#y?.(s,i,"evict"),this.#N&&this.#M?.push([s,i,"evict"])),this.#Y(e),t&&(this.#k[e]=void 0,this.#_[e]=void 0,this.#T.push(e)),1===this.#v?(this.#E=this.#A=0,this.#T.length=0):this.#E=this.#O[e],this.#S.delete(i),this.#v--,e}has(t,e={}){const{updateAgeOnHas:i=this.updateAgeOnHas,status:s}=e,r=this.#S.get(t);if(void 0!==r){const t=this.#_[r];if(this.#j(t)&&void 0===t.__staleWhileFetching)return!1;if(!this.#W(r))return i&&this.#G(r),s&&(s.has="hit",this.#q(s,r)),!0;s&&(s.has="stale",this.#q(s,r))}else s&&(s.has="miss");return!1}peek(t,e={}){const{allowStale:i=this.allowStale}=e,s=this.#S.get(t);if(void 0!==s&&(i||!this.#W(s))){const t=this.#_[s];return this.#j(t)?t.__staleWhileFetching:t}}#D(t,e,i,s){const r=void 0===e?void 0:this.#_[e];if(this.#j(r))return r;const n=new xe,{signal:o}=i;o?.addEventListener("abort",(()=>n.abort(o.reason)),{signal:n.signal});const a={signal:n.signal,options:i,context:s},h=(s,r=!1)=>{const{aborted:o}=n.signal,h=i.ignoreFetchAbort&&void 0!==s;if(i.status&&(o&&!r?(i.status.fetchAborted=!0,i.status.fetchError=n.signal.reason,h&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),o&&!h&&!r)return l(n.signal.reason);const u=c;return this.#_[e]===c&&(void 0===s?u.__staleWhileFetching?this.#_[e]=u.__staleWhileFetching:this.delete(t):(i.status&&(i.status.fetchUpdated=!0),this.set(t,s,a.options))),s},l=s=>{const{aborted:r}=n.signal,o=r&&i.allowStaleOnFetchAbort,a=o||i.allowStaleOnFetchRejection,h=a||i.noDeleteOnFetchRejection,l=c;if(this.#_[e]===c){!h||void 0===l.__staleWhileFetching?this.delete(t):o||(this.#_[e]=l.__staleWhileFetching)}if(a)return i.status&&void 0!==l.__staleWhileFetching&&(i.status.returnedStale=!0),l.__staleWhileFetching;if(l.__returned===l)throw s};i.status&&(i.status.fetchDispatched=!0);const c=new Promise(((e,s)=>{const o=this.#b?.(t,r,a);o&&o instanceof Promise&&o.then((t=>e(t)),s),n.signal.addEventListener("abort",(()=>{i.ignoreFetchAbort&&!i.allowStaleOnFetchAbort||(e(),i.allowStaleOnFetchAbort&&(e=t=>h(t,!0)))}))})).then(h,(t=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=t),l(t)))),u=Object.assign(c,{__abortController:n,__staleWhileFetching:r,__returned:void 0});return void 0===e?(this.set(t,u,{...a.options,status:void 0}),e=this.#S.get(t)):this.#_[e]=u,u}#j(t){if(!this.#F)return!1;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof xe}async fetch(t,e={}){const{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:u=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:d=this.allowStaleOnFetchAbort,context:f,forceRefresh:m=!1,status:g,signal:y}=e;if(!this.#F)return g&&(g.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:r,status:g});const w={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:r,ttl:n,noDisposeOnSet:o,size:a,sizeCalculation:h,noUpdateTTL:l,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:u,allowStaleOnFetchAbort:d,ignoreFetchAbort:p,status:g,signal:y};let b=this.#S.get(t);if(void 0===b){g&&(g.fetch="miss");const e=this.#D(t,b,w,f);return e.__returned=e}{const e=this.#_[b];if(this.#j(e)){const t=i&&void 0!==e.__staleWhileFetching;return g&&(g.fetch="inflight",t&&(g.returnedStale=!0)),t?e.__staleWhileFetching:e.__returned=e}const r=this.#W(b);if(!m&&!r)return g&&(g.fetch="hit"),this.#B(b),s&&this.#G(b),g&&this.#q(g,b),e;const n=this.#D(t,b,w,f),o=void 0!==n.__staleWhileFetching&&i;return g&&(g.fetch=r?"stale":"refresh",o&&r&&(g.returnedStale=!0)),o?n.__staleWhileFetching:n.__returned=n}}get(t,e={}){const{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:n}=e,o=this.#S.get(t);if(void 0!==o){const e=this.#_[o],a=this.#j(e);return n&&this.#q(n,o),this.#W(o)?(n&&(n.get="stale"),a?(n&&i&&void 0!==e.__staleWhileFetching&&(n.returnedStale=!0),i?e.__staleWhileFetching:void 0):(r||this.delete(t),n&&i&&(n.returnedStale=!0),i?e:void 0)):(n&&(n.get="hit"),a?e.__staleWhileFetching:(this.#B(o),s&&this.#G(o),e))}n&&(n.get="miss")}#X(t,e){this.#C[e]=t,this.#O[t]=e}#B(t){t!==this.#A&&(t===this.#E?this.#E=this.#O[t]:this.#X(this.#C[t],this.#O[t]),this.#X(this.#A,t),this.#A=t)}delete(t){let e=!1;if(0!==this.#v){const i=this.#S.get(t);if(void 0!==i)if(e=!0,1===this.#v)this.clear();else{this.#Y(i);const e=this.#_[i];this.#j(e)?e.__abortController.abort(new Error("deleted")):(this.#L||this.#N)&&(this.#L&&this.#y?.(e,t,"delete"),this.#N&&this.#M?.push([e,t,"delete"])),this.#S.delete(t),this.#k[i]=void 0,this.#_[i]=void 0,i===this.#A?this.#A=this.#C[i]:i===this.#E?this.#E=this.#O[i]:(this.#O[this.#C[i]]=this.#O[i],this.#C[this.#O[i]]=this.#C[i]),this.#v--,this.#T.push(i)}}if(this.#N&&this.#M?.length){const t=this.#M;let e;for(;e=t?.shift();)this.#w?.(...e)}return e}clear(){for(const t of this.#z({allowStale:!0})){const e=this.#_[t];if(this.#j(e))e.__abortController.abort(new Error("deleted"));else{const i=this.#k[t];this.#L&&this.#y?.(e,i,"delete"),this.#N&&this.#M?.push([e,i,"delete"])}}if(this.#S.clear(),this.#_.fill(void 0),this.#k.fill(void 0),this.#P&&this.#$&&(this.#P.fill(0),this.#$.fill(0)),this.#R&&this.#R.fill(0),this.#E=0,this.#A=0,this.#T.length=0,this.#x=0,this.#v=0,this.#N&&this.#M){const t=this.#M;let e;for(;e=t?.shift();)this.#w?.(...e)}}}const Ae="object"==typeof process&&process?process:{stdout:null,stderr:null},Te=l.StringDecoder,Me=Symbol("EOF"),Re=Symbol("maybeEmitEnd"),$e=Symbol("emittedEnd"),Pe=Symbol("emittingEnd"),Le=Symbol("emittedError"),Fe=Symbol("closed"),Ne=Symbol("read"),je=Symbol("flush"),De=Symbol("flushChunk"),Be=Symbol("encoding"),Ie=Symbol("decoder"),ze=Symbol("flowing"),We=Symbol("paused"),He=Symbol("resume"),Ve=Symbol("buffer"),Ue=Symbol("pipes"),Ge=Symbol("bufferLength"),qe=Symbol("bufferPush"),Ye=Symbol("bufferShift"),Je=Symbol("objectMode"),Ke=Symbol("destroyed"),Ze=Symbol("error"),Qe=Symbol("emitData"),Xe=Symbol("emitEnd"),ti=Symbol("emitEnd2"),ei=Symbol("async"),ii=Symbol("abort"),si=Symbol("aborted"),ri=Symbol("signal"),ni=t=>Promise.resolve().then(t),oi="1"!==global._MP_NO_ITERATOR_SYMBOLS_,ai=oi&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),hi=oi&&Symbol.iterator||Symbol("iterator not implemented");class li{constructor(t,e,i){this.src=t,this.dest=e,this.opts=i,this.ondrain=()=>t[He](),e.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class ci extends li{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,i){super(t,e,i),this.proxyErrors=t=>e.emit("error",t),t.on("error",this.proxyErrors)}}class ui extends h{constructor(t){super(),this[ze]=!1,this[We]=!1,this[Ue]=[],this[Ve]=[],this[Je]=t&&t.objectMode||!1,this[Je]?this[Be]=null:this[Be]=t&&t.encoding||null,"buffer"===this[Be]&&(this[Be]=null),this[ei]=t&&!!t.async||!1,this[Ie]=this[Be]?new Te(this[Be]):null,this[Me]=!1,this[$e]=!1,this[Pe]=!1,this[Fe]=!1,this[Le]=null,this.writable=!0,this.readable=!0,this[Ge]=0,this[Ke]=!1,t&&!0===t.debugExposeBuffer&&Object.defineProperty(this,"buffer",{get:()=>this[Ve]}),t&&!0===t.debugExposePipes&&Object.defineProperty(this,"pipes",{get:()=>this[Ue]}),this[ri]=t&&t.signal,this[si]=!1,this[ri]&&(this[ri].addEventListener("abort",(()=>this[ii]())),this[ri].aborted&&this[ii]())}get bufferLength(){return this[Ge]}get encoding(){return this[Be]}set encoding(t){if(this[Je])throw new Error("cannot set encoding in objectMode");if(this[Be]&&t!==this[Be]&&(this[Ie]&&this[Ie].lastNeed||this[Ge]))throw new Error("cannot change encoding");this[Be]!==t&&(this[Ie]=t?new Te(t):null,this[Ve].length&&(this[Ve]=this[Ve].map((t=>this[Ie].write(t))))),this[Be]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[Je]}set objectMode(t){this[Je]=this[Je]||!!t}get async(){return this[ei]}set async(t){this[ei]=this[ei]||!!t}[ii](){this[si]=!0,this.emit("abort",this[ri].reason),this.destroy(this[ri].reason)}get aborted(){return this[si]}set aborted(t){}write(t,e,i){if(this[si])return!1;if(this[Me])throw new Error("write after end");if(this[Ke])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;"function"==typeof e&&(i=e,e="utf8"),e||(e="utf8");const s=this[ei]?ni:t=>t();var r;return this[Je]||Buffer.isBuffer(t)||(r=t,!Buffer.isBuffer(r)&&ArrayBuffer.isView(r)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(t=>t instanceof ArrayBuffer||"object"==typeof t&&t.constructor&&"ArrayBuffer"===t.constructor.name&&t.byteLength>=0)(t)?t=Buffer.from(t):"string"!=typeof t&&(this.objectMode=!0)),this[Je]?(this.flowing&&0!==this[Ge]&&this[je](!0),this.flowing?this.emit("data",t):this[qe](t),0!==this[Ge]&&this.emit("readable"),i&&s(i),this.flowing):t.length?("string"!=typeof t||e===this[Be]&&!this[Ie].lastNeed||(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[Be]&&(t=this[Ie].write(t)),this.flowing&&0!==this[Ge]&&this[je](!0),this.flowing?this.emit("data",t):this[qe](t),0!==this[Ge]&&this.emit("readable"),i&&s(i),this.flowing):(0!==this[Ge]&&this.emit("readable"),i&&s(i),this.flowing)}read(t){if(this[Ke])return null;if(0===this[Ge]||0===t||t>this[Ge])return this[Re](),null;this[Je]&&(t=null),this[Ve].length>1&&!this[Je]&&(this.encoding?this[Ve]=[this[Ve].join("")]:this[Ve]=[Buffer.concat(this[Ve],this[Ge])]);const e=this[Ne](t||null,this[Ve][0]);return this[Re](),e}[Ne](t,e){return t===e.length||null===t?this[Ye]():(this[Ve][0]=e.slice(t),e=e.slice(0,t),this[Ge]-=t),this.emit("data",e),this[Ve].length||this[Me]||this.emit("drain"),e}end(t,e,i){return"function"==typeof t&&(i=t,t=null),"function"==typeof e&&(i=e,e="utf8"),t&&this.write(t,e),i&&this.once("end",i),this[Me]=!0,this.writable=!1,!this.flowing&&this[We]||this[Re](),this}[He](){this[Ke]||(this[We]=!1,this[ze]=!0,this.emit("resume"),this[Ve].length?this[je]():this[Me]?this[Re]():this.emit("drain"))}resume(){return this[He]()}pause(){this[ze]=!1,this[We]=!0}get destroyed(){return this[Ke]}get flowing(){return this[ze]}get paused(){return this[We]}[qe](t){this[Je]?this[Ge]+=1:this[Ge]+=t.length,this[Ve].push(t)}[Ye](){return this[Je]?this[Ge]-=1:this[Ge]-=this[Ve][0].length,this[Ve].shift()}[je](t){do{}while(this[De](this[Ye]())&&this[Ve].length);t||this[Ve].length||this[Me]||this.emit("drain")}[De](t){return this.emit("data",t),this.flowing}pipe(t,e){if(this[Ke])return;const i=this[$e];return e=e||{},t===Ae.stdout||t===Ae.stderr?e.end=!1:e.end=!1!==e.end,e.proxyErrors=!!e.proxyErrors,i?e.end&&t.end():(this[Ue].push(e.proxyErrors?new ci(this,t,e):new li(this,t,e)),this[ei]?ni((()=>this[He]())):this[He]()),t}unpipe(t){const e=this[Ue].find((e=>e.dest===t));e&&(this[Ue].splice(this[Ue].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){const i=super.on(t,e);return"data"!==t||this[Ue].length||this.flowing?"readable"===t&&0!==this[Ge]?super.emit("readable"):(t=>"end"===t||"finish"===t||"prefinish"===t)(t)&&this[$e]?(super.emit(t),this.removeAllListeners(t)):"error"===t&&this[Le]&&(this[ei]?ni((()=>e.call(this,this[Le]))):e.call(this,this[Le])):this[He](),i}get emittedEnd(){return this[$e]}[Re](){this[Pe]||this[$e]||this[Ke]||0!==this[Ve].length||!this[Me]||(this[Pe]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Fe]&&this.emit("close"),this[Pe]=!1)}emit(t,e,...i){if("error"!==t&&"close"!==t&&t!==Ke&&this[Ke])return;if("data"===t)return!(!this[Je]&&!e)&&(this[ei]?ni((()=>this[Qe](e))):this[Qe](e));if("end"===t)return this[Xe]();if("close"===t){if(this[Fe]=!0,!this[$e]&&!this[Ke])return;const t=super.emit("close");return this.removeAllListeners("close"),t}if("error"===t){this[Le]=e,super.emit(Ze,e);const t=!(this[ri]&&!this.listeners("error").length)&&super.emit("error",e);return this[Re](),t}if("resume"===t){const t=super.emit("resume");return this[Re](),t}if("finish"===t||"prefinish"===t){const e=super.emit(t);return this.removeAllListeners(t),e}const s=super.emit(t,e,...i);return this[Re](),s}[Qe](t){for(const e of this[Ue])!1===e.dest.write(t)&&this.pause();const e=super.emit("data",t);return this[Re](),e}[Xe](){this[$e]||(this[$e]=!0,this.readable=!1,this[ei]?ni((()=>this[ti]())):this[ti]())}[ti](){if(this[Ie]){const t=this[Ie].end();if(t){for(const e of this[Ue])e.dest.write(t);super.emit("data",t)}}for(const t of this[Ue])t.end();const t=super.emit("end");return this.removeAllListeners("end"),t}collect(){const t=[];this[Je]||(t.dataLength=0);const e=this.promise();return this.on("data",(e=>{t.push(e),this[Je]||(t.dataLength+=e.length)})),e.then((()=>t))}concat(){return this[Je]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then((t=>this[Je]?Promise.reject(new Error("cannot concat in objectMode")):this[Be]?t.join(""):Buffer.concat(t,t.dataLength)))}promise(){return new Promise(((t,e)=>{this.on(Ke,(()=>e(new Error("stream destroyed")))),this.on("error",(t=>e(t))),this.on("end",(()=>t()))}))}[ai](){let t=!1;const e=()=>(this.pause(),t=!0,Promise.resolve({done:!0}));return{next:()=>{if(t)return e();const i=this.read();if(null!==i)return Promise.resolve({done:!1,value:i});if(this[Me])return e();let s=null,r=null;const n=t=>{this.removeListener("data",o),this.removeListener("end",a),this.removeListener(Ke,h),e(),r(t)},o=t=>{this.removeListener("error",n),this.removeListener("end",a),this.removeListener(Ke,h),this.pause(),s({value:t,done:!!this[Me]})},a=()=>{this.removeListener("error",n),this.removeListener("data",o),this.removeListener(Ke,h),e(),s({done:!0})},h=()=>n(new Error("stream destroyed"));return new Promise(((t,e)=>{r=e,s=t,this.once(Ke,h),this.once("error",n),this.once("end",a),this.once("data",o)}))},throw:e,return:e,[ai](){return this}}}[hi](){let t=!1;const e=()=>(this.pause(),this.removeListener(Ze,e),this.removeListener(Ke,e),this.removeListener("end",e),t=!0,{done:!0});return this.once("end",e),this.once(Ze,e),this.once(Ke,e),{next:()=>{if(t)return e();const i=this.read();return null===i?e():{value:i}},throw:e,return:e,[hi](){return this}}}destroy(t){return this[Ke]?(t?this.emit("error",t):this.emit(Ke),this):(this[Ke]=!0,this[Ve].length=0,this[Ge]=0,"function"!=typeof this.close||this[Fe]||this.close(),t?this.emit("error",t):this.emit(Ke),this)}static isStream(t){return!!t&&(t instanceof ui||t instanceof h||t instanceof s&&("function"==typeof t.pipe||"function"==typeof t.write&&"function"==typeof t.end))}}const pi=e.realpathSync.native,di={lstatSync:e.lstatSync,readdir:e.readdir,readdirSync:e.readdirSync,readlinkSync:e.readlinkSync,realpathSync:pi,promises:{lstat:a.lstat,readdir:a.readdir,readlink:a.readlink,realpath:a.realpath}},fi=t=>t&&t!==di&&t!==m?{...di,...t,promises:{...di.promises,...t.promises||{}}}:di,mi=/^\\\\\?\\([a-z]:)\\?$/i,gi=/[\\\/]/,yi=10,wi=15,bi=-16,vi=128,xi=256,Si=512,ki=t=>t.isFile()?8:t.isDirectory()?4:t.isSymbolicLink()?yi:t.isCharacterDevice()?2:t.isBlockDevice()?6:t.isSocket()?12:t.isFIFO()?1:0,_i=new Map,Oi=t=>{const e=_i.get(t);if(e)return e;const i=t.normalize("NFKD");return _i.set(t,i),i},Ci=new Map,Ei=t=>{const e=Ci.get(t);if(e)return e;const i=Oi(t.toLowerCase());return Ci.set(t,i),i};class Ai extends Ee{constructor(){super({max:256})}}class Ti extends Ee{constructor(t=16384){super({maxSize:t,sizeCalculation:t=>t.length+1})}}class Mi{name;root;roots;parent;nocase;#tt;#et;get dev(){return this.#et}#it;get mode(){return this.#it}#st;get nlink(){return this.#st}#rt;get uid(){return this.#rt}#nt;get gid(){return this.#nt}#ot;get rdev(){return this.#ot}#at;get blksize(){return this.#at}#ht;get ino(){return this.#ht}#v;get size(){return this.#v}#lt;get blocks(){return this.#lt}#ct;get atimeMs(){return this.#ct}#ut;get mtimeMs(){return this.#ut}#pt;get ctimeMs(){return this.#pt}#dt;get birthtimeMs(){return this.#dt}#ft;get atime(){return this.#ft}#mt;get mtime(){return this.#mt}#gt;get ctime(){return this.#gt}#yt;get birthtime(){return this.#yt}#wt;#bt;#vt;#xt;#St;#kt;#_t;#Ot;#Ct;#Et;constructor(t,e=0,i,s,r,n,o){this.name=t,this.#wt=r?Ei(t):Oi(t),this.#_t=1023&e,this.nocase=r,this.roots=s,this.root=i||this,this.#Ot=n,this.#vt=o.fullpath,this.#St=o.relative,this.#kt=o.relativePosix,this.parent=o.parent,this.parent?this.#tt=this.parent.#tt:this.#tt=fi(o.fs)}depth(){return void 0!==this.#bt?this.#bt:this.parent?this.#bt=this.parent.depth()+1:this.#bt=0}childrenCache(){return this.#Ot}resolve(t){if(!t)return this;const e=this.getRootString(t),i=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#At(i):this.#At(i)}#At(t){let e=this;for(const i of t)e=e.child(i);return e}children(){const t=this.#Ot.get(this);if(t)return t;const e=Object.assign([],{provisional:0});return this.#Ot.set(this,e),this.#_t&=-17,e}child(t,e){if(""===t||"."===t)return this;if(".."===t)return this.parent||this;const i=this.children(),s=this.nocase?Ei(t):Oi(t);for(const t of i)if(t.#wt===s)return t;const r=this.parent?this.sep:"",n=this.#vt?this.#vt+r+t:void 0,o=this.newChild(t,0,{...e,parent:this,fullpath:n});return this.canReaddir()||(o.#_t|=vi),i.push(o),o}relative(){if(void 0!==this.#St)return this.#St;const t=this.name,e=this.parent;if(!e)return this.#St=this.name;const i=e.relative(),s=i+(i&&e.parent?this.sep:"")+t;return this.#St=s}relativePosix(){if("/"===this.sep)return this.relative();if(void 0!==this.#kt)return this.#kt;const t=this.name,e=this.parent;if(!e)return this.#kt=this.fullpathPosix();const i=e.relativePosix(),s=i+(i&&e.parent?"/":"")+t;return this.#kt=s}fullpath(){if(void 0!==this.#vt)return this.#vt;const t=this.name,e=this.parent;if(!e)return this.#vt=this.name;const i=e.fullpath()+(e.parent?this.sep:"")+t;return this.#vt=i}fullpathPosix(){if(void 0!==this.#xt)return this.#xt;if("/"===this.sep)return this.#xt=this.fullpath();if(!this.parent){const t=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(t)?this.#xt=`//?/${t}`:this.#xt=t}const t=this.parent,e=t.fullpathPosix(),i=e+(e&&t.parent?"/":"")+this.name;return this.#xt=i}isUnknown(){return 0==(this.#_t&wi)}isFile(){return 8==(this.#_t&wi)}isDirectory(){return 4==(this.#_t&wi)}isCharacterDevice(){return 2==(this.#_t&wi)}isBlockDevice(){return 6==(this.#_t&wi)}isFIFO(){return 1==(this.#_t&wi)}isSocket(){return 12==(this.#_t&wi)}isSymbolicLink(){return(this.#_t&yi)===yi}lstatCached(){return 32&this.#_t?this:void 0}readlinkCached(){return this.#Ct}realpathCached(){return this.#Et}readdirCached(){const t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#Ct)return!0;if(!this.parent)return!1;const t=this.#_t&wi;return!(0!==t&&t!==yi||this.#_t&xi||this.#_t&vi)}calledReaddir(){return!!(16&this.#_t)}isENOENT(){return!!(this.#_t&vi)}isNamed(t){return this.nocase?this.#wt===Ei(t):this.#wt===Oi(t)}async readlink(){const t=this.#Ct;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=await this.#tt.promises.readlink(this.fullpath()),e=this.parent.resolve(t);if(e)return this.#Ct=e}catch(t){return void this.#Tt(t.code)}}readlinkSync(){const t=this.#Ct;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=this.#tt.readlinkSync(this.fullpath()),e=this.parent.resolve(t);if(e)return this.#Ct=e}catch(t){return void this.#Tt(t.code)}}#Mt(t){this.#_t|=16;for(let e=t.provisional;e<t.length;e++)t[e].#Rt()}#Rt(){this.#_t&vi||(this.#_t=(this.#_t|vi)&bi,this.#$t())}#$t(){const t=this.children();t.provisional=0;for(const e of t)e.#Rt()}#Pt(){this.#_t|=Si,this.#Lt()}#Lt(){if(64&this.#_t)return;let t=this.#_t;4==(t&wi)&&(t&=bi),this.#_t=64|t,this.#$t()}#Ft(t=""){"ENOTDIR"===t||"EPERM"===t?this.#Lt():"ENOENT"===t?this.#Rt():this.children().provisional=0}#Nt(t=""){if("ENOTDIR"===t){this.parent.#Lt()}else"ENOENT"===t&&this.#Rt()}#Tt(t=""){let e=this.#_t;e|=xi,"ENOENT"===t&&(e|=vi),"EINVAL"!==t&&"UNKNOWN"!==t||(e&=bi),this.#_t=e,"ENOTDIR"===t&&this.parent&&this.parent.#Lt()}#jt(t,e){return this.#Dt(t,e)||this.#Bt(t,e)}#Bt(t,e){const i=ki(t),s=this.newChild(t.name,i,{parent:this}),r=s.#_t&wi;return 4!==r&&r!==yi&&0!==r&&(s.#_t|=64),e.unshift(s),e.provisional++,s}#Dt(t,e){for(let i=e.provisional;i<e.length;i++){const s=e[i];if((this.nocase?Ei(t.name):Oi(t.name))===s.#wt)return this.#It(t,s,i,e)}}#It(t,e,i,s){const r=e.name;return e.#_t=e.#_t&bi|ki(t),r!==t.name&&(e.name=t.name),i!==s.provisional&&(i===s.length-1?s.pop():s.splice(i,1),s.unshift(e)),s.provisional++,e}async lstat(){if(0==(this.#_t&vi))try{return this.#zt(await this.#tt.promises.lstat(this.fullpath())),this}catch(t){this.#Nt(t.code)}}lstatSync(){if(0==(this.#_t&vi))try{return this.#zt(this.#tt.lstatSync(this.fullpath())),this}catch(t){this.#Nt(t.code)}}#zt(t){const{atime:e,atimeMs:i,birthtime:s,birthtimeMs:r,blksize:n,blocks:o,ctime:a,ctimeMs:h,dev:l,gid:c,ino:u,mode:p,mtime:d,mtimeMs:f,nlink:m,rdev:g,size:y,uid:w}=t;this.#ft=e,this.#ct=i,this.#yt=s,this.#dt=r,this.#at=n,this.#lt=o,this.#gt=a,this.#pt=h,this.#et=l,this.#nt=c,this.#ht=u,this.#it=p,this.#mt=d,this.#ut=f,this.#st=m,this.#ot=g,this.#v=y,this.#rt=w;const b=ki(t);this.#_t=this.#_t&bi|b|32,0!==b&&4!==b&&b!==yi&&(this.#_t|=64)}#Wt=[];#Ht=!1;#Vt(t){this.#Ht=!1;const e=this.#Wt.slice();this.#Wt.length=0,e.forEach((e=>e(null,t)))}readdirCB(t,e=!1){if(!this.canReaddir())return void(e?t(null,[]):queueMicrotask((()=>t(null,[]))));const i=this.children();if(this.calledReaddir()){const s=i.slice(0,i.provisional);return void(e?t(null,s):queueMicrotask((()=>t(null,s))))}if(this.#Wt.push(t),this.#Ht)return;this.#Ht=!0;const s=this.fullpath();this.#tt.readdir(s,{withFileTypes:!0},((t,e)=>{if(t)this.#Ft(t.code),i.provisional=0;else{for(const t of e)this.#jt(t,i);this.#Mt(i)}this.#Vt(i.slice(0,i.provisional))}))}#Ut;async readdir(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();if(this.#Ut)await this.#Ut;else{let i=()=>{};this.#Ut=new Promise((t=>i=t));try{for(const i of await this.#tt.promises.readdir(e,{withFileTypes:!0}))this.#jt(i,t);this.#Mt(t)}catch(e){this.#Ft(e.code),t.provisional=0}this.#Ut=void 0,i()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();try{for(const i of this.#tt.readdirSync(e,{withFileTypes:!0}))this.#jt(i,t);this.#Mt(t)}catch(e){this.#Ft(e.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(704&this.#_t)return!1;const t=wi&this.#_t;return 0===t||4===t||t===yi}shouldWalk(t,e){return 4==(4&this.#_t)&&!(704&this.#_t)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#Et)return this.#Et;if(!(896&this.#_t))try{const t=await this.#tt.promises.realpath(this.fullpath());return this.#Et=this.resolve(t)}catch(t){this.#Pt()}}realpathSync(){if(this.#Et)return this.#Et;if(!(896&this.#_t))try{const t=this.#tt.realpathSync(this.fullpath());return this.#Et=this.resolve(t)}catch(t){this.#Pt()}}}class Ri extends Mi{sep="\\";splitSep=gi;constructor(t,e=0,i,s,r,n,o){super(t,e,i,s,r,n,o)}newChild(t,e=0,i={}){return new Ri(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(t){return i.win32.parse(t).root}getRoot(t){if((t=(t=>t.replace(/\//g,"\\").replace(mi,"$1\\"))(t.toUpperCase()))===this.root.name)return this.root;for(const[e,i]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=i;return this.roots[t]=new Li(t,this).root}sameRoot(t,e=this.root.name){return(t=t.toUpperCase().replace(/\//g,"\\").replace(mi,"$1\\"))===e}}class $i extends Mi{splitSep="/";sep="/";constructor(t,e=0,i,s,r,n,o){super(t,e,i,s,r,n,o)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=0,i={}){return new $i(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}}class Pi{root;rootPath;roots;cwd;#Gt;#qt;#Ot;nocase;#tt;constructor(t=process.cwd(),e,i,{nocase:s,childrenCacheSize:r=16384,fs:n=di}={}){this.#tt=fi(n),(t instanceof URL||t.startsWith("file://"))&&(t=o.fileURLToPath(t));const a=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#Gt=new Ai,this.#qt=new Ai,this.#Ot=new Ti(r);const h=a.substring(this.rootPath.length).split(i);if(1!==h.length||h[0]||h.pop(),void 0===s)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=s,this.root=this.newRoot(this.#tt),this.roots[this.rootPath]=this.root;let l=this.root,c=h.length-1;const u=e.sep;let p=this.rootPath,d=!1;for(const t of h){const e=c--;l=l.child(t,{relative:new Array(e).fill("..").join(u),relativePosix:new Array(e).fill("..").join("/"),fullpath:p+=(d?"":u)+t}),d=!0}this.cwd=l}depth(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#Ot}resolve(...t){let e="";for(let i=t.length-1;i>=0;i--){const s=t[i];if(s&&"."!==s&&(e=e?`${s}/${e}`:s,this.isAbsolute(s)))break}const i=this.#Gt.get(e);if(void 0!==i)return i;const s=this.cwd.resolve(e).fullpath();return this.#Gt.set(e,s),s}resolvePosix(...t){let e="";for(let i=t.length-1;i>=0;i--){const s=t[i];if(s&&"."!==s&&(e=e?`${s}/${e}`:s,this.isAbsolute(s)))break}const i=this.#qt.get(e);if(void 0!==i)return i;const s=this.cwd.resolve(e).fullpathPosix();return this.#qt.set(e,s),s}relative(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t,t=this.cwd);const{withFileTypes:i}=e;if(t.canReaddir()){const e=await t.readdir();return i?e:e.map((t=>t.name))}return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t,t=this.cwd);const{withFileTypes:i=!0}=e;return t.canReaddir()?i?t.readdirSync():t.readdirSync().map((t=>t.name)):[]}async lstat(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t.withFileTypes,t=this.cwd);const i=await t.readlink();return e?i:i?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t.withFileTypes,t=this.cwd);const i=t.readlinkSync();return e?i:i?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t.withFileTypes,t=this.cwd);const i=await t.realpath();return e?i:i?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t.withFileTypes,t=this.cwd);const i=t.realpathSync();return e?i:i?.fullpath()}async walk(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:n}=e,o=[];r&&!r(t)||o.push(i?t:t.fullpath());const a=new Set,h=(t,e)=>{a.add(t),t.readdirCB(((t,l)=>{if(t)return e(t);let c=l.length;if(!c)return e();const u=()=>{0==--c&&e()};for(const t of l)r&&!r(t)||o.push(i?t:t.fullpath()),s&&t.isSymbolicLink()?t.realpath().then((t=>t?.isUnknown()?t.lstat():t)).then((t=>t?.shouldWalk(a,n)?h(t,u):u())):t.shouldWalk(a,n)?h(t,u):u()}),!0)},l=t;return new Promise(((t,e)=>{h(l,(i=>{if(i)return e(i);t(o)}))}))}walkSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:n}=e,o=[];r&&!r(t)||o.push(i?t:t.fullpath());const a=new Set([t]);for(const t of a){const e=t.readdirSync();for(const t of e){r&&!r(t)||o.push(i?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!s||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(a,n)&&a.add(e)}}return o}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:n}=e;r&&!r(t)||(yield i?t:t.fullpath());const o=new Set([t]);for(const t of o){const e=t.readdirSync();for(const t of e){r&&!r(t)||(yield i?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!s||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(o,n)&&o.add(e)}}}stream(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:n}=e,o=new ui({objectMode:!0});r&&!r(t)||o.write(i?t:t.fullpath());const a=new Set,h=[t];let l=0;const c=()=>{let t=!1;for(;!t;){const e=h.shift();if(!e)return void(0===l&&o.end());l++,a.add(e);const u=(e,d,f=!1)=>{if(e)return o.emit("error",e);if(s&&!f){const t=[];for(const e of d)e.isSymbolicLink()&&t.push(e.realpath().then((t=>t?.isUnknown()?t.lstat():t)));if(t.length)return void Promise.all(t).then((()=>u(null,d,!0)))}for(const e of d)!e||r&&!r(e)||o.write(i?e:e.fullpath())||(t=!0);l--;for(const t of d){const e=t.realpathCached()||t;e.shouldWalk(a,n)&&h.push(e)}t&&!o.flowing?o.once("drain",c):p||c()};let p=!0;e.readdirCB(u,!0),p=!1}};return c(),o}streamSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Mi||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:n}=e,o=new ui({objectMode:!0}),a=new Set;r&&!r(t)||o.write(i?t:t.fullpath());const h=[t];let l=0;const c=()=>{let t=!1;for(;!t;){const e=h.shift();if(!e)return void(0===l&&o.end());l++,a.add(e);const c=e.readdirSync();for(const e of c)r&&!r(e)||o.write(i?e:e.fullpath())||(t=!0);l--;for(const t of c){let e=t;if(t.isSymbolicLink()){if(!s||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(a,n)&&h.push(e)}}t&&!o.flowing&&o.once("drain",c)};return c(),o}}class Li extends Pi{sep="\\";constructor(t=process.cwd(),e={}){const{nocase:s=!0}=e;super(t,i.win32,"\\",{...e,nocase:s}),this.nocase=s;for(let t=this.cwd;t;t=t.parent)t.nocase=this.nocase}parseRootPath(t){return i.win32.parse(t).root.toUpperCase()}newRoot(t){return new Ri(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}}class Fi extends Pi{sep="/";constructor(t=process.cwd(),e={}){const{nocase:s=!1}=e;super(t,i.posix,"/",{...e,nocase:s}),this.nocase=s}parseRootPath(t){return"/"}newRoot(t){return new $i(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}}class Ni extends Fi{constructor(t=process.cwd(),e={}){const{nocase:i=!0}=e;super(t,{...e,nocase:i})}}process.platform;const ji="win32"===process.platform?Li:"darwin"===process.platform?Ni:Fi;class Di{#Yt;#Jt;#Kt;length;#Zt;#Qt;#Xt;#te;#ee;#ie;#se=!0;constructor(t,e,i,s){if(!(t.length>=1))throw new TypeError("empty pattern list");if(!(e.length>=1))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#Yt=t,this.#Jt=e,this.#Kt=i,this.#Zt=s,0===this.#Kt)if(this.isUNC()){const[t,e,i,s,...r]=this.#Yt,[n,o,a,h,...l]=this.#Jt;""===r[0]&&(r.shift(),l.shift());const c=[t,e,i,s,""].join("/"),u=[n,o,a,h,""].join("/");this.#Yt=[c,...r],this.#Jt=[u,...l],this.length=this.#Yt.length}else if(this.isDrive()||this.isAbsolute()){const[t,...e]=this.#Yt,[i,...s]=this.#Jt;""===e[0]&&(e.shift(),s.shift());const r=t+"/",n=i+"/";this.#Yt=[r,...e],this.#Jt=[n,...s],this.length=this.#Yt.length}}pattern(){return this.#Yt[this.#Kt]}isString(){return"string"==typeof this.#Yt[this.#Kt]}isGlobstar(){return this.#Yt[this.#Kt]===pe}isRegExp(){return this.#Yt[this.#Kt]instanceof RegExp}globString(){return this.#Xt=this.#Xt||(0===this.#Kt?this.isAbsolute()?this.#Jt[0]+this.#Jt.slice(1).join("/"):this.#Jt.join("/"):this.#Jt.slice(this.#Kt).join("/"))}hasMore(){return this.length>this.#Kt+1}rest(){return void 0!==this.#Qt?this.#Qt:this.hasMore()?(this.#Qt=new Di(this.#Yt,this.#Jt,this.#Kt+1,this.#Zt),this.#Qt.#ie=this.#ie,this.#Qt.#ee=this.#ee,this.#Qt.#te=this.#te,this.#Qt):this.#Qt=null}isUNC(){const t=this.#Yt;return void 0!==this.#ee?this.#ee:this.#ee="win32"===this.#Zt&&0===this.#Kt&&""===t[0]&&""===t[1]&&"string"==typeof t[2]&&!!t[2]&&"string"==typeof t[3]&&!!t[3]}isDrive(){const t=this.#Yt;return void 0!==this.#te?this.#te:this.#te="win32"===this.#Zt&&0===this.#Kt&&this.length>1&&"string"==typeof t[0]&&/^[a-z]:$/i.test(t[0])}isAbsolute(){const t=this.#Yt;return void 0!==this.#ie?this.#ie:this.#ie=""===t[0]&&t.length>1||this.isDrive()||this.isUNC()}root(){const t=this.#Yt[0];return"string"==typeof t&&this.isAbsolute()&&0===this.#Kt?t:""}checkFollowGlobstar(){return!(0===this.#Kt||!this.isGlobstar()||!this.#se)}markFollowGlobstar(){return!(0===this.#Kt||!this.isGlobstar()||!this.#se)&&(this.#se=!1,!0)}}const Bi="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";class Ii{relative;relativeChildren;absolute;absoluteChildren;constructor(t,{nobrace:e,nocase:i,noext:s,noglobstar:r,platform:n=Bi}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];const o={dot:!0,nobrace:e,nocase:i,noext:s,noglobstar:r,optimizationLevel:2,platform:n,nocomment:!0,nonegate:!0};for(const e of t){const t=new ge(e,o);for(let e=0;e<t.set.length;e++){const i=t.set[e],s=t.globParts[e],r=new Di(i,s,0,n),a=new ge(r.globString(),o),h="**"===s[s.length-1],l=r.isAbsolute();l?this.absolute.push(a):this.relative.push(a),h&&(l?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}}ignored(t){const e=t.fullpath(),i=`${e}/`,s=t.relative()||".",r=`${s}/`;for(const t of this.relative)if(t.match(s)||t.match(r))return!0;for(const t of this.absolute)if(t.match(e)||t.match(i))return!0;return!1}childrenIgnored(t){const e=t.fullpath()+"/",i=(t.relative()||".")+"/";for(const t of this.relativeChildren)if(t.match(i))return!0;for(const t of this.absoluteChildren)t.match(e);return!1}}class zi{store;constructor(t=new Map){this.store=t}copy(){return new zi(new Map(this.store))}hasWalked(t,e){return this.store.get(t.fullpath())?.has(e.globString())}storeWalked(t,e){const i=t.fullpath(),s=this.store.get(i);s?s.add(e.globString()):this.store.set(i,new Set([e.globString()]))}}class Wi{store=new Map;add(t,e,i){const s=(e?2:0)|(i?1:0),r=this.store.get(t);this.store.set(t,void 0===r?s:s&r)}entries(){return[...this.store.entries()].map((([t,e])=>[t,!!(2&e),!!(1&e)]))}}class Hi{store=new Map;add(t,e){if(!t.canReaddir())return;const i=this.store.get(t);i?i.find((t=>t.globString()===e.globString()))||i.push(e):this.store.set(t,[e])}get(t){const e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map((t=>[t,this.store.get(t)]))}keys(){return[...this.store.keys()].filter((t=>t.canReaddir()))}}class Vi{hasWalkedCache;matches=new Wi;subwalks=new Hi;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new zi}processPatterns(t,e){this.patterns=e;const i=e.map((e=>[t,e]));for(let[t,e]of i){this.hasWalkedCache.storeWalked(t,e);const i=e.root(),s=e.isAbsolute()&&!1!==this.opts.absolute;if(i){t=t.resolve("/"===i&&void 0!==this.opts.root?this.opts.root:i);const s=e.rest();if(!s){this.matches.add(t,!0,!1);continue}e=s}if(t.isENOENT())continue;let r,n,o=!1;for(;"string"==typeof(r=e.pattern())&&(n=e.rest());){const i=t.resolve(r);if(i.isUnknown()&&".."!==r)break;t=i,e=n,o=!0}if(r=e.pattern(),n=e.rest(),o){if(this.hasWalkedCache.hasWalked(t,e))continue;this.hasWalkedCache.storeWalked(t,e)}if("string"!=typeof r)if(r===pe){(!t.isSymbolicLink()||this.follow||e.checkFollowGlobstar())&&this.subwalks.add(t,e);const i=n?.pattern(),r=n?.rest();if(n&&(""!==i&&"."!==i||r)){if(".."===i){const e=t.parent||t;r?this.hasWalkedCache.hasWalked(e,r)||this.subwalks.add(e,r):this.matches.add(e,s,!0)}}else this.matches.add(t,s,""===i||"."===i)}else r instanceof RegExp&&this.subwalks.add(t,e);else if(n)this.subwalks.add(t,e);else{const e=".."===r||""===r||"."===r;this.matches.add(t.resolve(r),s,e)}}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new Vi(this.opts,this.hasWalkedCache)}filterEntries(t,e){const i=this.subwalks.get(t),s=this.child();for(const t of e)for(const e of i){const i=e.isAbsolute(),r=e.pattern(),n=e.rest();r===pe?s.testGlobstar(t,e,n,i):r instanceof RegExp?s.testRegExp(t,r,n,i):s.testString(t,r,n,i)}return s}testGlobstar(t,e,i,s){if(!this.dot&&t.name.startsWith(".")||(e.hasMore()||this.matches.add(t,s,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(i&&e.checkFollowGlobstar()?this.subwalks.add(t,i):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),i){const e=i.pattern();if("string"==typeof e&&".."!==e&&""!==e&&"."!==e)this.testString(t,e,i.rest(),s);else if(".."===e){const e=t.parent||t;this.subwalks.add(e,i)}else e instanceof RegExp&&this.testRegExp(t,e,i.rest(),s)}}testRegExp(t,e,i,s){e.test(t.name)&&(i?this.subwalks.add(t,i):this.matches.add(t,s,!1))}testString(t,e,i,s){t.isNamed(e)&&(i?this.subwalks.add(t,i):this.matches.add(t,s,!1))}}class Ui{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#re=[];#ne;#oe;signal;maxDepth;constructor(t,e,i){this.patterns=t,this.path=e,this.opts=i,this.#oe=i.posix||"win32"!==i.platform?"/":"\\",i.ignore&&(this.#ne=((t,e)=>"string"==typeof t?new Ii([t],e):Array.isArray(t)?new Ii(t,e):t)(i.ignore,i)),this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",(()=>{this.#re.length=0})))}#ae(t){return this.seen.has(t)||!!this.#ne?.ignored?.(t)}#he(t){return!!this.#ne?.childrenIgnored?.(t)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;let t;for(this.paused=!1;!this.paused&&(t=this.#re.shift());)t()}onResume(t){this.signal?.aborted||(this.paused?this.#re.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||await t.realpath(),!i)return;t=i}const s=t.isUnknown()||this.opts.stat;return this.matchCheckTest(s?await t.lstat():t,e)}matchCheckTest(t,e){return!t||!(this.maxDepth===1/0||t.depth()<=this.maxDepth)||e&&!t.canReaddir()||this.opts.nodir&&t.isDirectory()||this.#ae(t)?void 0:t}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||t.realpathSync(),!i)return;t=i}const s=t.isUnknown()||this.opts.stat;return this.matchCheckTest(s?t.lstatSync():t,e)}matchFinish(t,e){if(this.#ae(t))return;const i=void 0===this.opts.absolute?e:this.opts.absolute;this.seen.add(t);const s=this.opts.mark&&t.isDirectory()?this.#oe:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(i){const e=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(e+s)}else{const e=this.opts.posix?t.relativePosix():t.relative(),i=this.opts.dotRelative&&!e.startsWith(".."+this.#oe)?"."+this.#oe:"";this.matchEmit(e?i+e+s:"."+s)}}async match(t,e,i){const s=await this.matchCheck(t,i);s&&this.matchFinish(s,e)}matchSync(t,e,i){const s=this.matchCheckSync(t,i);s&&this.matchFinish(s,e)}walkCB(t,e,i){this.signal?.aborted&&i(),this.walkCB2(t,e,new Vi(this.opts),i)}walkCB2(t,e,i,s){if(this.#he(t))return s();if(this.signal?.aborted&&s(),this.paused)return void this.onResume((()=>this.walkCB2(t,e,i,s)));i.processPatterns(t,e);let r=1;const n=()=>{0==--r&&s()};for(const[t,e,s]of i.matches.entries())this.#ae(t)||(r++,this.match(t,e,s).then((()=>n())));for(const t of i.subwalkTargets()){if(this.maxDepth!==1/0&&t.depth()>=this.maxDepth)continue;r++;const e=t.readdirCached();t.calledReaddir()?this.walkCB3(t,e,i,n):t.readdirCB(((e,s)=>this.walkCB3(t,s,i,n)),!0)}n()}walkCB3(t,e,i,s){i=i.filterEntries(t,e);let r=1;const n=()=>{0==--r&&s()};for(const[t,e,s]of i.matches.entries())this.#ae(t)||(r++,this.match(t,e,s).then((()=>n())));for(const[t,e]of i.subwalks.entries())r++,this.walkCB2(t,e,i.child(),n);n()}walkCBSync(t,e,i){this.signal?.aborted&&i(),this.walkCB2Sync(t,e,new Vi(this.opts),i)}walkCB2Sync(t,e,i,s){if(this.#he(t))return s();if(this.signal?.aborted&&s(),this.paused)return void this.onResume((()=>this.walkCB2Sync(t,e,i,s)));i.processPatterns(t,e);let r=1;const n=()=>{0==--r&&s()};for(const[t,e,s]of i.matches.entries())this.#ae(t)||this.matchSync(t,e,s);for(const t of i.subwalkTargets()){if(this.maxDepth!==1/0&&t.depth()>=this.maxDepth)continue;r++;const e=t.readdirSync();this.walkCB3Sync(t,e,i,n)}n()}walkCB3Sync(t,e,i,s){i=i.filterEntries(t,e);let r=1;const n=()=>{0==--r&&s()};for(const[t,e,s]of i.matches.entries())this.#ae(t)||this.matchSync(t,e,s);for(const[t,e]of i.subwalks.entries())r++,this.walkCB2Sync(t,e,i.child(),n);n()}}class Gi extends Ui{matches;constructor(t,e,i){super(t,e,i),this.matches=new Set}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise(((t,e)=>{this.walkCB(this.path,this.patterns,(()=>{this.signal?.aborted?e(this.signal.reason):t(this.matches)}))})),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>{if(this.signal?.aborted)throw this.signal.reason})),this.matches}}class qi extends Ui{results;constructor(t,e,i){super(t,e,i),this.results=new ui({signal:this.signal,objectMode:!0}),this.results.on("drain",(()=>this.resume())),this.results.on("resume",(()=>this.resume()))}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){const t=this.path;return t.isUnknown()?t.lstat().then((()=>{this.walkCB(t,this.patterns,(()=>this.results.end()))})):this.walkCB(t,this.patterns,(()=>this.results.end())),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>this.results.end())),this.results}}const Yi="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";class Ji{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(t,e){if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=o.fileURLToPath(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth="number"==typeof e.maxDepth?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&void 0!==this.absolute)throw new Error("cannot set absolute and withFileTypes:true");if("string"==typeof t&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||!1===e.allowWindowsEscape,this.windowsPathsNoEscape&&(t=t.map((t=>t.replace(/\\/g,"/")))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map((t=>t.includes("/")?t:`./**/${t}`))}if(this.pattern=t,this.platform=e.platform||Yi,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,void 0!==e.nocase&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{const t="win32"===e.platform?Li:"darwin"===e.platform?Ni:e.platform?Fi:ji;this.scurry=new t(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;const i={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:!0,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map((t=>new ge(t,i))),[r,n]=s.reduce(((t,e)=>(t[0].push(...e.set),t[1].push(...e.globParts),t)),[[],[]]);this.patterns=r.map(((t,e)=>new Di(t,n[e],0,this.platform)))}async walk(){return[...await new Gi(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new Gi(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new qi(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new qi(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}function Ki(t,e={}){return new Ji(t,e).streamSync()}function Zi(t,e={}){return new Ji(t,e).stream()}function Qi(t,e={}){return new Ji(t,e).walkSync()}async function Xi(t,e={}){return new Ji(t,e).walk()}function ts(t,e={}){return new Ji(t,e).iterateSync()}function es(t,e={}){return new Ji(t,e).iterate()}const is=Ki,ss=Object.assign(Zi,{sync:Ki}),rs=ts,ns=Object.assign(es,{sync:ts}),os=Object.assign(Qi,{stream:Ki,iterate:ts}),as=Object.assign(Xi,{glob:Xi,globSync:Qi,sync:os,globStream:Zi,stream:ss,globStreamSync:Ki,streamSync:is,globIterate:es,iterate:ns,globIterateSync:ts,iterateSync:rs,Glob:Ji,hasMagic:(t,e={})=>{Array.isArray(t)||(t=[t]);for(const i of t)if(new ge(i,e).hasMagic())return!0;return!1},escape:Ht,unescape:$t});as.glob=as;const hs={chmod:(t,i)=>new Promise(((s,r)=>e.chmod(t,i,((t,...e)=>t?r(t):s(...e))))),mkdir:(t,i)=>new Promise(((s,r)=>e.mkdir(t,i,((t,e)=>t?r(t):s(e))))),readdir:t=>new Promise(((i,s)=>e.readdir(t,{withFileTypes:!0},((t,e)=>t?s(t):i(e))))),rename:(t,i)=>new Promise(((s,r)=>e.rename(t,i,((t,...e)=>t?r(t):s(...e))))),rm:(t,i)=>new Promise(((s,r)=>e.rm(t,i,((t,...e)=>t?r(t):s(...e))))),rmdir:t=>new Promise(((i,s)=>e.rmdir(t,((t,...e)=>t?s(t):i(...e))))),stat:t=>new Promise(((i,s)=>e.stat(t,((t,e)=>t?s(t):i(e))))),lstat:t=>new Promise(((i,s)=>e.lstat(t,((t,e)=>t?s(t):i(e))))),unlink:t=>new Promise(((i,s)=>e.unlink(t,((t,...e)=>t?s(t):i(...e)))))},{readdir:ls}=hs,cs=t=>ls(t).catch((t=>t)),us=t=>{try{return(t=>e.readdirSync(t,{withFileTypes:!0}))(t)}catch(t){return t}},ps=async t=>t.catch((t=>{if("ENOENT"!==t.code)throw t})),ds=t=>{try{return t()}catch(t){if("ENOENT"!==t?.code)throw t}},{lstat:fs,rmdir:ms,unlink:gs}=hs,ys=async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await bs(t,e,await fs(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},ws=(t,i)=>{if(i?.signal?.aborted)throw i.signal.reason;try{return vs(t,i,e.lstatSync(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},bs=async(t,e,s)=>{if(e?.signal?.aborted)throw e.signal.reason;const r=s.isDirectory()?await cs(t):null;if(!Array.isArray(r)){if(r){if("ENOENT"===r.code)return!0;if("ENOTDIR"!==r.code)throw r}return!(e.filter&&!await e.filter(t,s))&&(await ps(gs(t)),!0)}const n=(await Promise.all(r.map((s=>bs(i.resolve(t,s.name),e,s))))).reduce(((t,e)=>t&&e),!0);return!!n&&((!1!==e.preserveRoot||t!==i.parse(t).root)&&(!(e.filter&&!await e.filter(t,s))&&(await ps(ms(t)),!0)))},vs=(t,s,r)=>{if(s?.signal?.aborted)throw s.signal.reason;const n=r.isDirectory()?us(t):null;if(!Array.isArray(n)){if(n){if("ENOENT"===n.code)return!0;if("ENOTDIR"!==n.code)throw n}return!(s.filter&&!s.filter(t,r))&&(ds((()=>e.unlinkSync(t))),!0)}let o=!0;for(const e of n){const r=i.resolve(t,e.name);o=vs(r,s,e)&&o}return(!1!==s.preserveRoot||t!==i.parse(t).root)&&(!!o&&(!(s.filter&&!s.filter(t,r))&&(ds((()=>e.rmdirSync(t))),!0)))},{chmod:xs}=hs,Ss=t=>async e=>{try{return await t(e)}catch(i){const s=i;if("ENOENT"===s?.code)return;if("EPERM"===s?.code){try{await xs(e,438)}catch(t){const e=t;if("ENOENT"===e?.code)return;throw i}return await t(e)}throw i}},ks=t=>i=>{try{return t(i)}catch(s){const r=s;if("ENOENT"===r?.code)return;if("EPERM"===r?.code){try{e.chmodSync(i,438)}catch(t){const e=t;if("ENOENT"===e?.code)return;throw s}return t(i)}throw s}},_s=new Set(["EMFILE","ENFILE","EBUSY"]),Os=t=>{const e=async(i,s,r=1,n=0)=>{const o=s.maxBackoff||200,a=s.backoff||1.2,h=s.maxRetries||10;let l=0;for(;;)try{return await t(i)}catch(t){const c=t;if(c?.path===i&&c?.code&&_s.has(c.code)){if(r=Math.ceil(r*a),(n=r+n)<o)return new Promise(((t,o)=>{setTimeout((()=>{e(i,s,r,n).then(t,o)}),r)}));if(l<h){l++;continue}}throw t}};return e},Cs=t=>(e,i)=>{const s=i.maxRetries||10;let r=0;for(;;)try{return t(e)}catch(t){const i=t;if(i?.path===e&&i?.code&&_s.has(i.code)&&r<s){r++;continue}throw t}},{stat:Es}=hs,As="win32"===nt?async t=>{const{root:e}=i.parse(t),s=c.tmpdir(),{root:r}=i.parse(s);if(e.toLowerCase()===r.toLowerCase())return s;const n=i.resolve(e,"/temp");return await(t=>Es(t).then((t=>t.isDirectory()),(()=>!1)))(n)?n:e}:async()=>c.tmpdir(),Ts="win32"===nt?t=>{const{root:s}=i.parse(t),r=c.tmpdir(),{root:n}=i.parse(r);if(s.toLowerCase()===n.toLowerCase())return r;const o=i.resolve(s,"/temp");return(t=>{try{return e.statSync(t).isDirectory()}catch(t){return!1}})(o)?o:s}:()=>c.tmpdir(),{lstat:Ms,rename:Rs,unlink:$s,rmdir:Ps,chmod:Ls}=hs,Fs=t=>`.${i.basename(t)}.${Math.random()}`,Ns=async t=>$s(t).catch((e=>{if("EPERM"===e.code)return Ls(t,438).then((()=>$s(t)),(t=>{if("ENOENT"!==t.code)throw e}));if("ENOENT"!==e.code)throw e})),js=t=>{try{e.unlinkSync(t)}catch(i){if("EPERM"===i?.code)try{return e.chmodSync(t,438)}catch(t){if("ENOENT"===t?.code)return;throw i}else if("ENOENT"===i?.code)return;throw i}},Ds=async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await Bs(t,e,await Ms(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},Bs=async(t,e,s)=>{if(e?.signal?.aborted)throw e.signal.reason;if(!e.tmp)return Bs(t,{...e,tmp:await As(t)},s);if(t===e.tmp&&i.parse(t).root!==t)throw new Error("cannot delete temp directory used for deletion");const r=s.isDirectory()?await cs(t):null;if(!Array.isArray(r)){if(r){if("ENOENT"===r.code)return!0;if("ENOTDIR"!==r.code)throw r}return!(e.filter&&!await e.filter(t,s))&&(await ps(Is(t,e.tmp,Ns)),!0)}const n=(await Promise.all(r.map((s=>Bs(i.resolve(t,s.name),e,s))))).reduce(((t,e)=>t&&e),!0);return!!n&&((!1!==e.preserveRoot||t!==i.parse(t).root)&&(!(e.filter&&!await e.filter(t,s))&&(await ps(Is(t,e.tmp,Ps)),!0)))},Is=async(t,e,s)=>{const r=i.resolve(e,Fs(t));return await Rs(t,r),await s(r)},zs=(t,i)=>{if(i?.signal?.aborted)throw i.signal.reason;try{return Ws(t,i,e.lstatSync(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},Ws=(t,s,r)=>{if(s?.signal?.aborted)throw s.signal.reason;if(!s.tmp)return Ws(t,{...s,tmp:Ts(t)},r);const n=s.tmp;if(t===s.tmp&&i.parse(t).root!==t)throw new Error("cannot delete temp directory used for deletion");const o=r.isDirectory()?us(t):null;if(!Array.isArray(o)){if(o){if("ENOENT"===o.code)return!0;if("ENOTDIR"!==o.code)throw o}return!(s.filter&&!s.filter(t,r))&&(ds((()=>Hs(t,n,js))),!0)}let a=!0;for(const e of o){const r=i.resolve(t,e.name);a=Ws(r,s,e)&&a}return!!a&&((!1!==s.preserveRoot||t!==i.parse(t).root)&&(!(s.filter&&!s.filter(t,r))&&(ds((()=>Hs(t,n,e.rmdirSync))),!0)))},Hs=(t,s,r)=>{const n=i.resolve(s,Fs(t));return e.renameSync(t,n),r(n)},{unlink:Vs,rmdir:Us,lstat:Gs}=hs,qs=Os(Ss(Vs)),Ys=Cs(ks(e.unlinkSync)),Js=Os(Ss(Us)),Ks=Cs(ks(e.rmdirSync)),Zs=Symbol("start"),Qs=Symbol("child"),Xs=Symbol("finish"),tr=async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await ir(t,e,await Gs(t),Zs)}catch(t){if("ENOENT"===t?.code)return!0;throw t}},er=(t,i)=>{if(i?.signal?.aborted)throw i.signal.reason;try{return sr(t,i,e.lstatSync(t),Zs)}catch(t){if("ENOENT"===t?.code)return!0;throw t}},ir=async(t,e,s,r=Zs)=>{if(e?.signal?.aborted)throw e.signal.reason;const n=s.isDirectory()?await cs(t):null;if(!Array.isArray(n)){if(n){if("ENOENT"===n.code)return!0;if("ENOTDIR"!==n.code)throw n}return!(e.filter&&!await e.filter(t,s))&&(await ps(qs(t,e)),!0)}const o=r===Zs?Qs:r,a=(await Promise.all(n.map((s=>ir(i.resolve(t,s.name),e,s,o))))).reduce(((t,e)=>t&&e),!0);if(r===Zs)return ir(t,e,s,Xs);if(r===Xs){if(!1===e.preserveRoot&&t===i.parse(t).root)return!1;if(!a)return!1;if(e.filter&&!await e.filter(t,s))return!1;await ps((async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;const{filter:i,...s}=e;try{return await Js(t,s)}catch(e){if("ENOTEMPTY"===e?.code)return await Ds(t,s);throw e}})(t,e))}return!0},sr=(t,e,s,r=Zs)=>{const n=s.isDirectory()?us(t):null;if(!Array.isArray(n)){if(n){if("ENOENT"===n.code)return!0;if("ENOTDIR"!==n.code)throw n}return!(e.filter&&!e.filter(t,s))&&(ds((()=>Ys(t,e))),!0)}let o=!0;for(const s of n){const n=r===Zs?Qs:r,a=i.resolve(t,s.name);o=sr(a,e,s,n)&&o}if(r===Zs)return sr(t,e,s,Xs);if(r===Xs){if(!1===e.preserveRoot&&t===i.parse(t).root)return!1;if(!o)return!1;if(e.filter&&!e.filter(t,s))return!1;ds((()=>{((t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;const{filter:i,...s}=e;try{return Ks(t,s)}catch(e){const i=e;if("ENOTEMPTY"===i?.code)return zs(t,s);throw e}})(t,e)}))}return!0},rr="win32"===nt?tr:ys,nr="win32"===nt?er:ws,{rm:or}=hs,ar=async(t,e)=>(await or(t,{...e,force:!0,recursive:!0}),!0),hr=(t,i)=>(e.rmSync(t,{...i,force:!0,recursive:!0}),!0),lr=(process.env.__TESTING_RIMRAF_NODE_VERSION__||process.version).replace(/^v/,"").split("."),cr=+lr[0]>14||14==+lr[0]&&+lr[1]>=14,ur=cr&&"win32"!==nt?t=>!t?.signal&&!t?.filter:()=>!1,pr=cr&&"win32"!==nt?t=>!t?.signal&&!t?.filter:()=>!1,dr=(t,e)=>void 0===t||typeof t===e,fr=t=>{if(!(t=>!!t&&"object"==typeof t&&dr(t.preserveRoot,"boolean")&&dr(t.tmp,"string")&&dr(t.maxRetries,"number")&&dr(t.retryDelay,"number")&&dr(t.backoff,"number")&&dr(t.maxBackoff,"number")&&(dr(t.glob,"boolean")||t.glob&&"object"==typeof t.glob)&&dr(t.filter,"function"))(t))throw new Error("invalid rimraf options")},mr=t=>async(e,i)=>{const s=((t={})=>rt(t))(i);return s.glob&&(e=await as(e,s.glob)),Array.isArray(e)?!!(await Promise.all(e.map((e=>t(ot(e,s),s))))).reduce(((t,e)=>t&&e),!0):!!await t(ot(e,s),s)},gr=t=>(e,i)=>{const s=((t={})=>rt(t))(i);return s.glob&&(e=Qi(e,s.glob)),Array.isArray(e)?!!e.map((e=>t(ot(e,s),s))).reduce(((t,e)=>t&&e),!0):!!t(ot(e,s),s)},yr=gr(hr),wr=Object.assign(mr(ar),{sync:yr}),br=gr(nr),vr=Object.assign(mr(rr),{sync:br}),xr=gr(er),Sr=Object.assign(mr(tr),{sync:xr}),kr=gr(ws),_r=Object.assign(mr(ys),{sync:kr}),Or=gr(zs),Cr=Object.assign(mr(Ds),{sync:Or}),Er=gr(((t,e)=>pr(e)?hr(t,e):nr(t,e))),Ar=mr(((t,e)=>ur(e)?ar(t,e):rr(t,e))),Tr=Object.assign(Ar,{rimraf:Ar,sync:Er,rimrafSync:Er,manual:vr,manualSync:br,native:wr,nativeSync:yr,posix:_r,posixSync:kr,windows:Sr,windowsSync:xr,moveRemove:Cr,moveRemoveSync:Or});Tr.rimraf=Tr;var Mr,Rr,$r,Pr,Lr,Fr,Nr,jr,Dr="https://github.com/wc19950724/vue3-base.git",Br="start",Ir={exports:{}};function zr(){if(Pr)return $r;Pr=1;const t=Rr?Mr:(Rr=1,Mr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),e={};for(const i of Object.keys(t))e[t[i]]=i;const i={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};$r=i;for(const t of Object.keys(i)){if(!("channels"in i[t]))throw new Error("missing channels property: "+t);if(!("labels"in i[t]))throw new Error("missing channel labels property: "+t);if(i[t].labels.length!==i[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:s}=i[t];delete i[t].channels,delete i[t].labels,Object.defineProperty(i[t],"channels",{value:e}),Object.defineProperty(i[t],"labels",{value:s})}return i.rgb.hsl=function(t){const e=t[0]/255,i=t[1]/255,s=t[2]/255,r=Math.min(e,i,s),n=Math.max(e,i,s),o=n-r;let a,h;n===r?a=0:e===n?a=(i-s)/o:i===n?a=2+(s-e)/o:s===n&&(a=4+(e-i)/o),a=Math.min(60*a,360),a<0&&(a+=360);const l=(r+n)/2;return h=n===r?0:l<=.5?o/(n+r):o/(2-n-r),[a,100*h,100*l]},i.rgb.hsv=function(t){let e,i,s,r,n;const o=t[0]/255,a=t[1]/255,h=t[2]/255,l=Math.max(o,a,h),c=l-Math.min(o,a,h),u=function(t){return(l-t)/6/c+.5};return 0===c?(r=0,n=0):(n=c/l,e=u(o),i=u(a),s=u(h),o===l?r=s-i:a===l?r=1/3+e-s:h===l&&(r=2/3+i-e),r<0?r+=1:r>1&&(r-=1)),[360*r,100*n,100*l]},i.rgb.hwb=function(t){const e=t[0],s=t[1];let r=t[2];const n=i.rgb.hsl(t)[0],o=1/255*Math.min(e,Math.min(s,r));return r=1-1/255*Math.max(e,Math.max(s,r)),[n,100*o,100*r]},i.rgb.cmyk=function(t){const e=t[0]/255,i=t[1]/255,s=t[2]/255,r=Math.min(1-e,1-i,1-s);return[100*((1-e-r)/(1-r)||0),100*((1-i-r)/(1-r)||0),100*((1-s-r)/(1-r)||0),100*r]},i.rgb.keyword=function(i){const s=e[i];if(s)return s;let r,n=1/0;for(const e of Object.keys(t)){const s=t[e],h=(a=s,((o=i)[0]-a[0])**2+(o[1]-a[1])**2+(o[2]-a[2])**2);h<n&&(n=h,r=e)}var o,a;return r},i.keyword.rgb=function(e){return t[e]},i.rgb.xyz=function(t){let e=t[0]/255,i=t[1]/255,s=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;return[100*(.4124*e+.3576*i+.1805*s),100*(.2126*e+.7152*i+.0722*s),100*(.0193*e+.1192*i+.9505*s)]},i.rgb.lab=function(t){const e=i.rgb.xyz(t);let s=e[0],r=e[1],n=e[2];s/=95.047,r/=100,n/=108.883,s=s>.008856?s**(1/3):7.787*s+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;return[116*r-16,500*(s-r),200*(r-n)]},i.hsl.rgb=function(t){const e=t[0]/360,i=t[1]/100,s=t[2]/100;let r,n,o;if(0===i)return o=255*s,[o,o,o];r=s<.5?s*(1+i):s+i-s*i;const a=2*s-r,h=[0,0,0];for(let t=0;t<3;t++)n=e+1/3*-(t-1),n<0&&n++,n>1&&n--,o=6*n<1?a+6*(r-a)*n:2*n<1?r:3*n<2?a+(r-a)*(2/3-n)*6:a,h[t]=255*o;return h},i.hsl.hsv=function(t){const e=t[0];let i=t[1]/100,s=t[2]/100,r=i;const n=Math.max(s,.01);s*=2,i*=s<=1?s:2-s,r*=n<=1?n:2-n;return[e,100*(0===s?2*r/(n+r):2*i/(s+i)),100*((s+i)/2)]},i.hsv.rgb=function(t){const e=t[0]/60,i=t[1]/100;let s=t[2]/100;const r=Math.floor(e)%6,n=e-Math.floor(e),o=255*s*(1-i),a=255*s*(1-i*n),h=255*s*(1-i*(1-n));switch(s*=255,r){case 0:return[s,h,o];case 1:return[a,s,o];case 2:return[o,s,h];case 3:return[o,a,s];case 4:return[h,o,s];case 5:return[s,o,a]}},i.hsv.hsl=function(t){const e=t[0],i=t[1]/100,s=t[2]/100,r=Math.max(s,.01);let n,o;o=(2-i)*s;const a=(2-i)*r;return n=i*r,n/=a<=1?a:2-a,n=n||0,o/=2,[e,100*n,100*o]},i.hwb.rgb=function(t){const e=t[0]/360;let i=t[1]/100,s=t[2]/100;const r=i+s;let n;r>1&&(i/=r,s/=r);const o=Math.floor(6*e),a=1-s;n=6*e-o,0!=(1&o)&&(n=1-n);const h=i+n*(a-i);let l,c,u;switch(o){default:case 6:case 0:l=a,c=h,u=i;break;case 1:l=h,c=a,u=i;break;case 2:l=i,c=a,u=h;break;case 3:l=i,c=h,u=a;break;case 4:l=h,c=i,u=a;break;case 5:l=a,c=i,u=h}return[255*l,255*c,255*u]},i.cmyk.rgb=function(t){const e=t[0]/100,i=t[1]/100,s=t[2]/100,r=t[3]/100;return[255*(1-Math.min(1,e*(1-r)+r)),255*(1-Math.min(1,i*(1-r)+r)),255*(1-Math.min(1,s*(1-r)+r))]},i.xyz.rgb=function(t){const e=t[0]/100,i=t[1]/100,s=t[2]/100;let r,n,o;return r=3.2406*e+-1.5372*i+-.4986*s,n=-.9689*e+1.8758*i+.0415*s,o=.0557*e+-.204*i+1.057*s,r=r>.0031308?1.055*r**(1/2.4)-.055:12.92*r,n=n>.0031308?1.055*n**(1/2.4)-.055:12.92*n,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,r=Math.min(Math.max(0,r),1),n=Math.min(Math.max(0,n),1),o=Math.min(Math.max(0,o),1),[255*r,255*n,255*o]},i.xyz.lab=function(t){let e=t[0],i=t[1],s=t[2];e/=95.047,i/=100,s/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;return[116*i-16,500*(e-i),200*(i-s)]},i.lab.xyz=function(t){let e,i,s;i=(t[0]+16)/116,e=t[1]/500+i,s=i-t[2]/200;const r=i**3,n=e**3,o=s**3;return i=r>.008856?r:(i-16/116)/7.787,e=n>.008856?n:(e-16/116)/7.787,s=o>.008856?o:(s-16/116)/7.787,e*=95.047,i*=100,s*=108.883,[e,i,s]},i.lab.lch=function(t){const e=t[0],i=t[1],s=t[2];let r;r=360*Math.atan2(s,i)/2/Math.PI,r<0&&(r+=360);return[e,Math.sqrt(i*i+s*s),r]},i.lch.lab=function(t){const e=t[0],i=t[1],s=t[2]/360*2*Math.PI;return[e,i*Math.cos(s),i*Math.sin(s)]},i.rgb.ansi16=function(t,e=null){const[s,r,n]=t;let o=null===e?i.rgb.hsv(t)[2]:e;if(o=Math.round(o/50),0===o)return 30;let a=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(s/255));return 2===o&&(a+=60),a},i.hsv.ansi16=function(t){return i.rgb.ansi16(i.hsv.rgb(t),t[2])},i.rgb.ansi256=function(t){const e=t[0],i=t[1],s=t[2];if(e===i&&i===s)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;return 16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(s/255*5)},i.ansi16.rgb=function(t){let e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const i=.5*(1+~~(t>50));return[(1&e)*i*255,(e>>1&1)*i*255,(e>>2&1)*i*255]},i.ansi256.rgb=function(t){if(t>=232){const e=10*(t-232)+8;return[e,e,e]}let e;t-=16;return[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255]},i.rgb.hex=function(t){const e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},i.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let i=e[0];3===e[0].length&&(i=i.split("").map((t=>t+t)).join(""));const s=parseInt(i,16);return[s>>16&255,s>>8&255,255&s]},i.rgb.hcg=function(t){const e=t[0]/255,i=t[1]/255,s=t[2]/255,r=Math.max(Math.max(e,i),s),n=Math.min(Math.min(e,i),s),o=r-n;let a,h;return a=o<1?n/(1-o):0,h=o<=0?0:r===e?(i-s)/o%6:r===i?2+(s-e)/o:4+(e-i)/o,h/=6,h%=1,[360*h,100*o,100*a]},i.hsl.hcg=function(t){const e=t[1]/100,i=t[2]/100,s=i<.5?2*e*i:2*e*(1-i);let r=0;return s<1&&(r=(i-.5*s)/(1-s)),[t[0],100*s,100*r]},i.hsv.hcg=function(t){const e=t[1]/100,i=t[2]/100,s=e*i;let r=0;return s<1&&(r=(i-s)/(1-s)),[t[0],100*s,100*r]},i.hcg.rgb=function(t){const e=t[0]/360,i=t[1]/100,s=t[2]/100;if(0===i)return[255*s,255*s,255*s];const r=[0,0,0],n=e%1*6,o=n%1,a=1-o;let h=0;switch(Math.floor(n)){case 0:r[0]=1,r[1]=o,r[2]=0;break;case 1:r[0]=a,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=o;break;case 3:r[0]=0,r[1]=a,r[2]=1;break;case 4:r[0]=o,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=a}return h=(1-i)*s,[255*(i*r[0]+h),255*(i*r[1]+h),255*(i*r[2]+h)]},i.hcg.hsv=function(t){const e=t[1]/100,i=e+t[2]/100*(1-e);let s=0;return i>0&&(s=e/i),[t[0],100*s,100*i]},i.hcg.hsl=function(t){const e=t[1]/100,i=t[2]/100*(1-e)+.5*e;let s=0;return i>0&&i<.5?s=e/(2*i):i>=.5&&i<1&&(s=e/(2*(1-i))),[t[0],100*s,100*i]},i.hcg.hwb=function(t){const e=t[1]/100,i=e+t[2]/100*(1-e);return[t[0],100*(i-e),100*(1-i)]},i.hwb.hcg=function(t){const e=t[1]/100,i=1-t[2]/100,s=i-e;let r=0;return s<1&&(r=(i-s)/(1-s)),[t[0],100*s,100*r]},i.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},i.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},i.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},i.gray.hsl=function(t){return[0,0,t[0]]},i.gray.hsv=i.gray.hsl,i.gray.hwb=function(t){return[0,100,t[0]]},i.gray.cmyk=function(t){return[0,0,0,t[0]]},i.gray.lab=function(t){return[t[0],0,0]},i.gray.hex=function(t){const e=255&Math.round(t[0]/100*255),i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i},i.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]},$r}function Wr(){if(Fr)return Lr;Fr=1;const t=zr();function e(e){const i=function(){const e={},i=Object.keys(t);for(let t=i.length,s=0;s<t;s++)e[i[s]]={distance:-1,parent:null};return e}(),s=[e];for(i[e].distance=0;s.length;){const e=s.pop(),r=Object.keys(t[e]);for(let t=r.length,n=0;n<t;n++){const t=r[n],o=i[t];-1===o.distance&&(o.distance=i[e].distance+1,o.parent=e,s.unshift(t))}}return i}function i(t,e){return function(i){return e(t(i))}}function s(e,s){const r=[s[e].parent,e];let n=t[s[e].parent][e],o=s[e].parent;for(;s[o].parent;)r.unshift(s[o].parent),n=i(t[s[o].parent][o],n),o=s[o].parent;return n.conversion=r,n}return Lr=function(t){const i=e(t),r={},n=Object.keys(i);for(let t=n.length,e=0;e<t;e++){const t=n[e];null!==i[t].parent&&(r[t]=s(t,i))}return r}}function Hr(){if(jr)return Nr;jr=1;const t=zr(),e=Wr(),i={};return Object.keys(t).forEach((s=>{i[s]={},Object.defineProperty(i[s],"channels",{value:t[s].channels}),Object.defineProperty(i[s],"labels",{value:t[s].labels});const r=e(s);Object.keys(r).forEach((t=>{const e=r[t];i[s][t]=function(t){const e=function(...e){const i=e[0];if(null==i)return i;i.length>1&&(e=i);const s=t(e);if("object"==typeof s)for(let t=s.length,e=0;e<t;e++)s[e]=Math.round(s[e]);return s};return"conversion"in t&&(e.conversion=t.conversion),e}(e),i[s][t].raw=function(t){const e=function(...e){const i=e[0];return null==i?i:(i.length>1&&(e=i),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(e)}))})),Nr=i}!function(t){const e=(t,e)=>(...i)=>`[${t(...i)+e}m`,i=(t,e)=>(...i)=>{const s=t(...i);return`[${38+e};5;${s}m`},s=(t,e)=>(...i)=>{const s=t(...i);return`[${38+e};2;${s[0]};${s[1]};${s[2]}m`},r=t=>t,n=(t,e,i)=>[t,e,i],o=(t,e,i)=>{Object.defineProperty(t,e,{get:()=>{const s=i();return Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0}),s},enumerable:!0,configurable:!0})};let a;const h=(t,e,i,s)=>{void 0===a&&(a=Hr());const r=s?10:0,n={};for(const[s,o]of Object.entries(a)){const a="ansi16"===s?"ansi":s;s===e?n[a]=t(i,r):"object"==typeof o&&(n[a]=t(o[e],r))}return n};Object.defineProperty(t,"exports",{enumerable:!0,get:function(){const t=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[e,i]of Object.entries(a)){for(const[e,s]of Object.entries(i))a[e]={open:`[${s[0]}m`,close:`[${s[1]}m`},i[e]=a[e],t.set(s[0],s[1]);Object.defineProperty(a,e,{value:i,enumerable:!1})}return Object.defineProperty(a,"codes",{value:t,enumerable:!1}),a.color.close="[39m",a.bgColor.close="[49m",o(a.color,"ansi",(()=>h(e,"ansi16",r,!1))),o(a.color,"ansi256",(()=>h(i,"ansi256",r,!1))),o(a.color,"ansi16m",(()=>h(s,"rgb",n,!1))),o(a.bgColor,"ansi",(()=>h(e,"ansi16",r,!0))),o(a.bgColor,"ansi256",(()=>h(i,"ansi256",r,!0))),o(a.bgColor,"ansi16m",(()=>h(s,"rgb",n,!0))),a}})}(Ir);var Vr=Ir.exports;const Ur=c,Gr=u,qr=(t,e=process.argv)=>{const i=t.startsWith("-")?"":1===t.length?"-":"--",s=e.indexOf(i+t),r=e.indexOf("--");return-1!==s&&(-1===r||s<r)},{env:Yr}=process;let Jr;function Kr(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Zr(t,e){if(0===Jr)return 0;if(qr("color=16m")||qr("color=full")||qr("color=truecolor"))return 3;if(qr("color=256"))return 2;if(t&&!e&&void 0===Jr)return 0;const i=Jr||0;if("dumb"===Yr.TERM)return i;if("win32"===process.platform){const t=Ur.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in Yr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((t=>t in Yr))||"codeship"===Yr.CI_NAME?1:i;if("TEAMCITY_VERSION"in Yr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Yr.TEAMCITY_VERSION)?1:0;if("truecolor"===Yr.COLORTERM)return 3;if("TERM_PROGRAM"in Yr){const t=parseInt((Yr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Yr.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Yr.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Yr.TERM)||"COLORTERM"in Yr?1:i}qr("no-color")||qr("no-colors")||qr("color=false")||qr("color=never")?Jr=0:(qr("color")||qr("colors")||qr("color=true")||qr("color=always"))&&(Jr=1),"FORCE_COLOR"in Yr&&(Jr="true"===Yr.FORCE_COLOR?1:"false"===Yr.FORCE_COLOR?0:0===Yr.FORCE_COLOR.length?1:Math.min(parseInt(Yr.FORCE_COLOR,10),3));var Qr={supportsColor:function(t){return Kr(Zr(t,t&&t.isTTY))},stdout:Kr(Zr(!0,Gr.isatty(1))),stderr:Kr(Zr(!0,Gr.isatty(2)))};var Xr,tn,en={stringReplaceAll:(t,e,i)=>{let s=t.indexOf(e);if(-1===s)return t;const r=e.length;let n=0,o="";do{o+=t.substr(n,s-n)+e+i,n=s+r,s=t.indexOf(e,n)}while(-1!==s);return o+=t.substr(n),o},stringEncaseCRLFWithFirstIndex:(t,e,i,s)=>{let r=0,n="";do{const o="\r"===t[s-1];n+=t.substr(r,(o?s-1:s)-r)+e+(o?"\r\n":"\n")+i,r=s+1,s=t.indexOf("\n",r)}while(-1!==s);return n+=t.substr(r),n}};const sn=Vr,{stdout:rn,stderr:nn}=Qr,{stringReplaceAll:on,stringEncaseCRLFWithFirstIndex:an}=en,{isArray:hn}=Array,ln=["ansi","ansi","ansi256","ansi16m"],cn=Object.create(null);class un{constructor(t){return pn(t)}}const pn=t=>{const e={};return((t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const i=rn?rn.level:0;t.level=void 0===e.level?i:e.level})(e,t),e.template=(...t)=>vn(e.template,...t),Object.setPrototypeOf(e,dn.prototype),Object.setPrototypeOf(e.template,e),e.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},e.template.Instance=un,e.template};function dn(t){return pn(t)}for(const[t,e]of Object.entries(sn))cn[t]={get(){const i=yn(this,gn(e.open,e.close,this._styler),this._isEmpty);return Object.defineProperty(this,t,{value:i}),i}};cn.visible={get(){const t=yn(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:t}),t}};const fn=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const t of fn)cn[t]={get(){const{level:e}=this;return function(...i){const s=gn(sn.color[ln[e]][t](...i),sn.color.close,this._styler);return yn(this,s,this._isEmpty)}}};for(const t of fn){cn["bg"+t[0].toUpperCase()+t.slice(1)]={get(){const{level:e}=this;return function(...i){const s=gn(sn.bgColor[ln[e]][t](...i),sn.bgColor.close,this._styler);return yn(this,s,this._isEmpty)}}}}const mn=Object.defineProperties((()=>{}),{...cn,level:{enumerable:!0,get(){return this._generator.level},set(t){this._generator.level=t}}}),gn=(t,e,i)=>{let s,r;return void 0===i?(s=t,r=e):(s=i.openAll+t,r=e+i.closeAll),{open:t,close:e,openAll:s,closeAll:r,parent:i}},yn=(t,e,i)=>{const s=(...t)=>hn(t[0])&&hn(t[0].raw)?wn(s,vn(s,...t)):wn(s,1===t.length?""+t[0]:t.join(" "));return Object.setPrototypeOf(s,mn),s._generator=t,s._styler=e,s._isEmpty=i,s},wn=(t,e)=>{if(t.level<=0||!e)return t._isEmpty?"":e;let i=t._styler;if(void 0===i)return e;const{openAll:s,closeAll:r}=i;if(-1!==e.indexOf(""))for(;void 0!==i;)e=on(e,i.close,i.open),i=i.parent;const n=e.indexOf("\n");return-1!==n&&(e=an(e,r,s,n)),s+e+r};let bn;const vn=(t,...e)=>{const[i]=e;if(!hn(i)||!hn(i.raw))return e.join(" ");const s=e.slice(1),r=[i.raw[0]];for(let t=1;t<i.length;t++)r.push(String(s[t-1]).replace(/[{}\\]/g,"\\$&"),String(i.raw[t]));return void 0===bn&&(bn=function(){if(tn)return Xr;tn=1;const t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,e=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,i=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,s=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,r=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function n(t){const e="u"===t[0],i="{"===t[1];return e&&!i&&5===t.length||"x"===t[0]&&3===t.length?String.fromCharCode(parseInt(t.slice(1),16)):e&&i?String.fromCodePoint(parseInt(t.slice(2,-1),16)):r.get(t)||t}function o(t,e){const r=[],o=e.trim().split(/\s*,\s*/g);let a;for(const e of o){const o=Number(e);if(Number.isNaN(o)){if(!(a=e.match(i)))throw new Error(`Invalid Chalk template style argument: ${e} (in style '${t}')`);r.push(a[2].replace(s,((t,e,i)=>e?n(e):i)))}else r.push(o)}return r}function a(t){e.lastIndex=0;const i=[];let s;for(;null!==(s=e.exec(t));){const t=s[1];if(s[2]){const e=o(t,s[2]);i.push([t].concat(e))}else i.push([t])}return i}function h(t,e){const i={};for(const t of e)for(const e of t.styles)i[e[0]]=t.inverse?null:e.slice(1);let s=t;for(const[t,e]of Object.entries(i))if(Array.isArray(e)){if(!(t in s))throw new Error(`Unknown Chalk style: ${t}`);s=e.length>0?s[t](...e):s[t]}return s}return Xr=(e,i)=>{const s=[],r=[];let o=[];if(i.replace(t,((t,i,l,c,u,p)=>{if(i)o.push(n(i));else if(c){const t=o.join("");o=[],r.push(0===s.length?t:h(e,s)(t)),s.push({inverse:l,styles:a(c)})}else if(u){if(0===s.length)throw new Error("Found extraneous } in Chalk template literal");r.push(h(e,s)(o.join(""))),o=[],s.pop()}else o.push(p)})),r.push(o.join("")),s.length>0){const t=`Chalk template literal is missing ${s.length} closing bracket${1===s.length?"":"s"} (\`}\`)`;throw new Error(t)}return r.join("")},Xr}()),bn(t,r.join(""))};Object.defineProperties(dn.prototype,cn);const xn=dn();xn.supportsColor=rn,xn.stderr=dn({level:nn?nn.level:0}),xn.stderr.supportsColor=nn;var Sn,kn=xn,_n={},On={exports:{}},Cn={exports:{}};const En=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,An=()=>{const t={enabled:"undefined"!=typeof process&&"0"!==process.env.FORCE_COLOR,visible:!0,styles:{},keys:{}},e=(t,e,i)=>"function"==typeof t?t(e):t.wrap(e,i),i=(i,s)=>{if(""===i||null==i)return"";if(!1===t.enabled)return i;if(!1===t.visible)return"";let r=""+i,n=r.includes("\n"),o=s.length;for(o>0&&s.includes("unstyle")&&(s=[...new Set(["unstyle",...s])].reverse());o-- >0;)r=e(t.styles[s[o]],r,n);return r},s=(e,s,r)=>{t.styles[e]=(t=>{let e=t.open=`[${t.codes[0]}m`,i=t.close=`[${t.codes[1]}m`,s=t.regex=new RegExp(`\\u001b\\[${t.codes[1]}m`,"g");return t.wrap=(t,r)=>{t.includes(i)&&(t=t.replace(s,i+e));let n=e+t+i;return r?n.replace(/\r*\n/g,`${i}$&${e}`):n},t})({name:e,codes:s}),(t.keys[r]||(t.keys[r]=[])).push(e),Reflect.defineProperty(t,e,{configurable:!0,enumerable:!0,set(i){t.alias(e,i)},get(){let s=t=>i(t,s.stack);return Reflect.setPrototypeOf(s,t),s.stack=this.stack?this.stack.concat(e):[e],s}})};return s("reset",[0,0],"modifier"),s("bold",[1,22],"modifier"),s("dim",[2,22],"modifier"),s("italic",[3,23],"modifier"),s("underline",[4,24],"modifier"),s("inverse",[7,27],"modifier"),s("hidden",[8,28],"modifier"),s("strikethrough",[9,29],"modifier"),s("black",[30,39],"color"),s("red",[31,39],"color"),s("green",[32,39],"color"),s("yellow",[33,39],"color"),s("blue",[34,39],"color"),s("magenta",[35,39],"color"),s("cyan",[36,39],"color"),s("white",[37,39],"color"),s("gray",[90,39],"color"),s("grey",[90,39],"color"),s("bgBlack",[40,49],"bg"),s("bgRed",[41,49],"bg"),s("bgGreen",[42,49],"bg"),s("bgYellow",[43,49],"bg"),s("bgBlue",[44,49],"bg"),s("bgMagenta",[45,49],"bg"),s("bgCyan",[46,49],"bg"),s("bgWhite",[47,49],"bg"),s("blackBright",[90,39],"bright"),s("redBright",[91,39],"bright"),s("greenBright",[92,39],"bright"),s("yellowBright",[93,39],"bright"),s("blueBright",[94,39],"bright"),s("magentaBright",[95,39],"bright"),s("cyanBright",[96,39],"bright"),s("whiteBright",[97,39],"bright"),s("bgBlackBright",[100,49],"bgBright"),s("bgRedBright",[101,49],"bgBright"),s("bgGreenBright",[102,49],"bgBright"),s("bgYellowBright",[103,49],"bgBright"),s("bgBlueBright",[104,49],"bgBright"),s("bgMagentaBright",[105,49],"bgBright"),s("bgCyanBright",[106,49],"bgBright"),s("bgWhiteBright",[107,49],"bgBright"),t.ansiRegex=En,t.hasColor=t.hasAnsi=e=>(t.ansiRegex.lastIndex=0,"string"==typeof e&&""!==e&&t.ansiRegex.test(e)),t.alias=(e,s)=>{let r="string"==typeof s?t[s]:s;if("function"!=typeof r)throw new TypeError("Expected alias to be the name of an existing color (string) or a function");r.stack||(Reflect.defineProperty(r,"name",{value:e}),t.styles[e]=r,r.stack=[e]),Reflect.defineProperty(t,e,{configurable:!0,enumerable:!0,set(i){t.alias(e,i)},get(){let e=t=>i(t,e.stack);return Reflect.setPrototypeOf(e,t),e.stack=this.stack?this.stack.concat(r.stack):r.stack,e}})},t.theme=e=>{if(null===(i=e)||"object"!=typeof i||Array.isArray(i))throw new TypeError("Expected theme to be an object");var i;for(let i of Object.keys(e))t.alias(i,e[i]);return t},t.alias("unstyle",(e=>"string"==typeof e&&""!==e?(t.ansiRegex.lastIndex=0,e.replace(t.ansiRegex,"")):"")),t.alias("noop",(t=>t)),t.none=t.clear=t.noop,t.stripColor=t.unstyle,t.symbols=(Sn||(Sn=1,function(t){const e="undefined"!=typeof process&&"Hyper"===process.env.TERM_PROGRAM,i="undefined"!=typeof process&&"win32"===process.platform,s="undefined"!=typeof process&&"linux"===process.platform,r={ballotDisabled:"☒",ballotOff:"☐",ballotOn:"☑",bullet:"•",bulletWhite:"◦",fullBlock:"█",heart:"❤",identicalTo:"≡",line:"─",mark:"※",middot:"·",minus:"－",multiplication:"×",obelus:"÷",pencilDownRight:"✎",pencilRight:"✏",pencilUpRight:"✐",percent:"%",pilcrow2:"❡",pilcrow:"¶",plusMinus:"±",question:"?",section:"§",starsOff:"☆",starsOn:"★",upDownArrow:"↕"},n=Object.assign({},r,{check:"√",cross:"×",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"»",radioOff:"( )",radioOn:"(*)",warning:"‼"}),o=Object.assign({},r,{ballotCross:"✘",check:"✔",cross:"✖",ellipsisLarge:"⋯",ellipsis:"…",info:"ℹ",questionFull:"？",questionSmall:"﹖",pointer:s?"▸":"❯",pointerSmall:s?"‣":"›",radioOff:"◯",radioOn:"◉",warning:"⚠"});t.exports=i&&!e?n:o,Reflect.defineProperty(t.exports,"common",{enumerable:!1,value:r}),Reflect.defineProperty(t.exports,"windows",{enumerable:!1,value:n}),Reflect.defineProperty(t.exports,"other",{enumerable:!1,value:o})}(Cn)),Cn.exports),t.define=s,t};On.exports=An(),On.exports.create=An;var Tn=On.exports;!function(t){const e=Object.prototype.toString,i=Tn;let s=!1,r=[];const n={yellow:"blue",cyan:"red",green:"magenta",black:"white",blue:"yellow",red:"cyan",magenta:"green",white:"black"};t.longest=(t,e)=>t.reduce(((t,i)=>Math.max(t,e?i[e].length:i.length)),0),t.hasColor=t=>!!t&&i.hasColor(t);const o=t.isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t);t.nativeType=t=>e.call(t).slice(8,-1).toLowerCase().replace(/\s/g,""),t.isAsyncFn=e=>"asyncfunction"===t.nativeType(e),t.isPrimitive=t=>null!=t&&"object"!=typeof t&&"function"!=typeof t,t.resolve=(t,e,...i)=>"function"==typeof e?e.call(t,...i):e,t.scrollDown=(t=[])=>[...t.slice(1),t[0]],t.scrollUp=(t=[])=>[t.pop(),...t],t.reorder=(t=[])=>{let e=t.slice();return e.sort(((t,e)=>t.index>e.index?1:t.index<e.index?-1:0)),e},t.swap=(t,e,i)=>{let s=t.length,r=i===s?0:i<0?s-1:i,n=t[e];t[e]=t[r],t[r]=n},t.width=(t,e=80)=>{let i=t&&t.columns?t.columns:e;return t&&"function"==typeof t.getWindowSize&&(i=t.getWindowSize()[0]),"win32"===process.platform?i-1:i},t.height=(t,e=20)=>{let i=t&&t.rows?t.rows:e;return t&&"function"==typeof t.getWindowSize&&(i=t.getWindowSize()[1]),i},t.wordWrap=(t,e={})=>{if(!t)return t;"number"==typeof e&&(e={width:e});let{indent:i="",newline:s="\n"+i,width:r=80}=e,n=(s+i).match(/[^\S\n]/g)||[];r-=n.length;let o=`.{1,${r}}([\\s\\u200B]+|$)|[^\\s\\u200B]+?([\\s\\u200B]+|$)`,a=t.trim(),h=new RegExp(o,"g"),l=a.match(h)||[];return l=l.map((t=>t.replace(/\n$/,""))),e.padEnd&&(l=l.map((t=>t.padEnd(r," ")))),e.padStart&&(l=l.map((t=>t.padStart(r," ")))),i+l.join(s)},t.unmute=t=>{let e=t.stack.find((t=>i.keys.color.includes(t)));return e?i[e]:t.stack.find((t=>"bg"===t.slice(2)))?i[e.slice(2)]:t=>t},t.pascal=t=>t?t[0].toUpperCase()+t.slice(1):"",t.inverse=e=>{if(!e||!e.stack)return e;let s=e.stack.find((t=>i.keys.color.includes(t)));if(s){let r=i["bg"+t.pascal(s)];return r?r.black:e}let r=e.stack.find((t=>"bg"===t.slice(0,2)));return r?i[r.slice(2).toLowerCase()]||e:i.none},t.complement=e=>{if(!e||!e.stack)return e;let s=e.stack.find((t=>i.keys.color.includes(t))),r=e.stack.find((t=>"bg"===t.slice(0,2)));if(s&&!r)return i[n[s]||s];if(r){let s=r.slice(2).toLowerCase(),o=n[s];return o&&i["bg"+t.pascal(o)]||e}return i.none},t.meridiem=t=>{let e=t.getHours(),i=t.getMinutes(),s=e>=12?"pm":"am";return e%=12,(0===e?12:e)+":"+(i<10?"0"+i:i)+" "+s},t.set=(e={},i="",s)=>i.split(".").reduce(((e,i,r,n)=>{let o=n.length-1>r?e[i]||{}:s;return!t.isObject(o)&&r<n.length-1&&(o={}),e[i]=o}),e),t.get=(t={},e="",i)=>{let s=null==t[e]?e.split(".").reduce(((t,e)=>t&&t[e]),t):t[e];return null==s?i:s},t.mixin=(e,i)=>{if(!o(e))return i;if(!o(i))return e;for(let s of Object.keys(i)){let r=Object.getOwnPropertyDescriptor(i,s);if(r.hasOwnProperty("value"))if(e.hasOwnProperty(s)&&o(r.value)){let n=Object.getOwnPropertyDescriptor(e,s);o(n.value)?e[s]=t.merge({},e[s],i[s]):Reflect.defineProperty(e,s,r)}else Reflect.defineProperty(e,s,r);else Reflect.defineProperty(e,s,r)}return e},t.merge=(...e)=>{let i={};for(let s of e)t.mixin(i,s);return i},t.mixinEmitter=(e,i)=>{let s=i.constructor.prototype;for(let r of Object.keys(s)){let n=s[r];"function"==typeof n?t.define(e,r,n.bind(i)):t.define(e,r,n)}},t.onExit=t=>{const e=(t,e)=>{s||(s=!0,r.forEach((t=>t())),!0===t&&process.exit(128+e))};0===r.length&&(process.once("SIGTERM",e.bind(null,!0,15)),process.once("SIGINT",e.bind(null,!0,2)),process.once("exit",e)),r.push(t)},t.define=(t,e,i)=>{Reflect.defineProperty(t,e,{value:i})},t.defineExport=(t,e,i)=>{let s;Reflect.defineProperty(t,e,{enumerable:!0,configurable:!0,set(t){s=t},get:()=>s?s():i()})}}(_n);var Mn,Rn,$n,Pn,Ln,Fn,Nn,jn,Dn,Bn,In,zn,Wn,Hn={};function Vn(){return Mn||(Mn=1,Hn.ctrl={a:"first",b:"backward",c:"cancel",d:"deleteForward",e:"last",f:"forward",g:"reset",i:"tab",k:"cutForward",l:"reset",n:"newItem",m:"cancel",j:"submit",p:"search",r:"remove",s:"save",u:"undo",w:"cutLeft",x:"toggleCursor",v:"paste"},Hn.shift={up:"shiftUp",down:"shiftDown",left:"shiftLeft",right:"shiftRight",tab:"prev"},Hn.fn={up:"pageUp",down:"pageDown",left:"pageLeft",right:"pageRight",delete:"deleteForward"},Hn.option={b:"backward",f:"forward",d:"cutRight",left:"cutLeft",up:"altUp",down:"altDown"},Hn.keys={pageup:"pageUp",pagedown:"pageDown",home:"home",end:"end",cancel:"cancel",delete:"deleteForward",backspace:"delete",down:"down",enter:"submit",escape:"cancel",left:"left",space:"space",number:"number",return:"submit",right:"right",tab:"next",up:"up"}),Hn}function Un(){if(Ln)return Pn;function t(t,e,i={}){let s=t.timers[e]={name:e,start:Date.now(),ms:0,tick:0},r=i.interval||120;s.frames=i.frames||[],s.loading=!0;let n=setInterval((()=>{s.ms=Date.now()-s.start,s.tick++,t.render()}),r);return s.stop=()=>{s.loading=!1,clearInterval(n)},Reflect.defineProperty(s,"interval",{value:n}),t.once("close",(()=>s.stop())),s.stop}return Ln=1,Pn=e=>{e.timers=e.timers||{};let i=e.options.timers;if(i)for(let s of Object.keys(i)){let r=i[s];"number"==typeof r&&(r={interval:r}),t(e,s,r)}},Pn}function Gn(){if(Wn)return zn;Wn=1;const t=function(){if(Dn)return jn;Dn=1;const t=_n,e=Tn,i={default:e.noop,noop:e.noop,set inverse(t){this._inverse=t},get inverse(){return this._inverse||t.inverse(this.primary)},set complement(t){this._complement=t},get complement(){return this._complement||t.complement(this.primary)},primary:e.cyan,success:e.green,danger:e.magenta,strong:e.bold,warning:e.yellow,muted:e.dim,disabled:e.gray,dark:e.dim.gray,underline:e.underline,set info(t){this._info=t},get info(){return this._info||this.primary},set em(t){this._em=t},get em(){return this._em||this.primary.underline},set heading(t){this._heading=t},get heading(){return this._heading||this.muted.underline},set pending(t){this._pending=t},get pending(){return this._pending||this.primary},set submitted(t){this._submitted=t},get submitted(){return this._submitted||this.success},set cancelled(t){this._cancelled=t},get cancelled(){return this._cancelled||this.danger},set typing(t){this._typing=t},get typing(){return this._typing||this.dim},set placeholder(t){this._placeholder=t},get placeholder(){return this._placeholder||this.primary.dim},set highlight(t){this._highlight=t},get highlight(){return this._highlight||this.inverse},merge:(s={})=>{s.styles&&"boolean"==typeof s.styles.enabled&&(e.enabled=s.styles.enabled),s.styles&&"boolean"==typeof s.styles.visible&&(e.visible=s.styles.visible);let r=t.merge({},i,s.styles);delete r.merge;for(let t of Object.keys(e))r.hasOwnProperty(t)||Reflect.defineProperty(r,t,{get:()=>e[t]});for(let t of Object.keys(e.styles))r.hasOwnProperty(t)||Reflect.defineProperty(r,t,{get:()=>e[t]});return r}};return jn=i}(),e=function(){if(In)return Bn;In=1;const t="win32"===process.platform,e=Tn,i=_n,s={...e.symbols,upDownDoubleArrow:"⇕",upDownDoubleArrow2:"⬍",upDownArrow:"↕",asterisk:"*",asterism:"⁂",bulletWhite:"◦",electricArrow:"⌁",ellipsisLarge:"⋯",ellipsisSmall:"…",fullBlock:"█",identicalTo:"≡",indicator:e.symbols.check,leftAngle:"‹",mark:"※",minus:"−",multiplication:"×",obelus:"÷",percent:"%",pilcrow:"¶",pilcrow2:"❡",pencilUpRight:"✐",pencilDownRight:"✎",pencilRight:"✏",plus:"+",plusMinus:"±",pointRight:"☞",rightAngle:"›",section:"§",hexagon:{off:"⬡",on:"⬢",disabled:"⬢"},ballot:{on:"☑",off:"☐",disabled:"☒"},stars:{on:"★",off:"☆",disabled:"☆"},folder:{on:"▼",off:"▶",disabled:"▶"},prefix:{pending:e.symbols.question,submitted:e.symbols.check,cancelled:e.symbols.cross},separator:{pending:e.symbols.pointerSmall,submitted:e.symbols.middot,cancelled:e.symbols.middot},radio:{off:t?"( )":"◯",on:t?"(*)":"◉",disabled:t?"(|)":"Ⓘ"},numbers:["⓪","①","②","③","④","⑤","⑥","⑦","⑧","⑨","⑩","⑪","⑫","⑬","⑭","⑮","⑯","⑰","⑱","⑲","⑳","㉑","㉒","㉓","㉔","㉕","㉖","㉗","㉘","㉙","㉚","㉛","㉜","㉝","㉞","㉟","㊱","㊲","㊳","㊴","㊵","㊶","㊷","㊸","㊹","㊺","㊻","㊼","㊽","㊾","㊿"]};return s.merge=t=>{let r=i.merge({},e.symbols,s,t.symbols);return delete r.merge,r},Bn=s}(),i=_n;return zn=s=>{s.options=i.merge({},s.options.theme,s.options),s.symbols=e.merge(s.options),s.styles=t.merge(s.options)},zn}var qn,Yn,Jn,Kn={exports:{}};function Zn(){return qn||(qn=1,function(t,e){const i="Apple_Terminal"===process.env.TERM_PROGRAM,s=Tn,r=_n,n=t.exports=e,o="[";let a=!1;const h=n.code={bell:"",beep:"",beginning:`${o}G`,down:`${o}J`,esc:o,getPosition:`${o}6n`,hide:`${o}?25l`,line:`${o}2K`,lineEnd:`${o}K`,lineStart:`${o}1K`,restorePosition:o+(i?"8":"u"),savePosition:o+(i?"7":"s"),screen:`${o}2J`,show:`${o}?25h`,up:`${o}1J`},l=n.cursor={get hidden(){return a},hide:()=>(a=!0,h.hide),show:()=>(a=!1,h.show),forward:(t=1)=>`${o}${t}C`,backward:(t=1)=>`${o}${t}D`,nextLine:(t=1)=>`${o}E`.repeat(t),prevLine:(t=1)=>`${o}F`.repeat(t),up:(t=1)=>t?`${o}${t}A`:"",down:(t=1)=>t?`${o}${t}B`:"",right:(t=1)=>t?`${o}${t}C`:"",left:(t=1)=>t?`${o}${t}D`:"",to:(t,e)=>e?`${o}${e+1};${t+1}H`:`${o}${t+1}G`,move(t=0,e=0){let i="";return i+=t<0?l.left(-t):t>0?l.right(t):"",i+=e<0?l.up(-e):e>0?l.down(e):"",i},restore(t={}){let{after:e,cursor:i,initial:s,input:o,prompt:a,size:h,value:l}=t;if(s=r.isPrimitive(s)?String(s):"",o=r.isPrimitive(o)?String(o):"",l=r.isPrimitive(l)?String(l):"",h){let t=n.cursor.up(h)+n.cursor.to(a.length),e=o.length-i;return e>0&&(t+=n.cursor.left(e)),t}if(l||e){let t=!o&&s?-s.length:-o.length+i;return e&&(t-=e.length),""===o&&s&&!a.includes(s)&&(t+=s.length),n.cursor.move(t)}}},c=n.erase={screen:h.screen,up:h.up,down:h.down,line:h.line,lineEnd:h.lineEnd,lineStart:h.lineStart,lines(t){let e="";for(let i=0;i<t;i++)e+=n.erase.line+(i<t-1?n.cursor.up(1):"");return t&&(e+=n.code.beginning),e}};n.clear=(t="",e=process.stdout.columns)=>{if(!e)return c.line+l.to(0);let i=t.split(/\r?\n/),r=0;for(let t of i)r+=1+Math.floor(Math.max((n=t,[...s.unstyle(n)].length-1),0)/e);var n;return(c.line+l.prevLine()).repeat(r-1)+c.line+l.to(0)}}(Kn,Kn.exports)),Kn.exports}function Qn(){if(Jn)return Yn;Jn=1;const t=s,e=Tn,i=function(){if($n)return Rn;$n=1;const t=d,e=Vn(),i=/^(?:\x1b)([a-zA-Z0-9])$/,s=/^(?:\x1b+)(O|N|\[|\[\[)(?:(\d+)(?:;(\d+))?([~^$])|(?:1;)?(\d+)?([a-zA-Z]))/,r={OP:"f1",OQ:"f2",OR:"f3",OS:"f4","[11~":"f1","[12~":"f2","[13~":"f3","[14~":"f4","[[A":"f1","[[B":"f2","[[C":"f3","[[D":"f4","[[E":"f5","[15~":"f5","[17~":"f6","[18~":"f7","[19~":"f8","[20~":"f9","[21~":"f10","[23~":"f11","[24~":"f12","[A":"up","[B":"down","[C":"right","[D":"left","[E":"clear","[F":"end","[H":"home",OA:"up",OB:"down",OC:"right",OD:"left",OE:"clear",OF:"end",OH:"home","[1~":"home","[2~":"insert","[3~":"delete","[4~":"end","[5~":"pageup","[6~":"pagedown","[[5~":"pageup","[[6~":"pagedown","[7~":"home","[8~":"end","[a":"up","[b":"down","[c":"right","[d":"left","[e":"clear","[2$":"insert","[3$":"delete","[5$":"pageup","[6$":"pagedown","[7$":"home","[8$":"end",Oa:"up",Ob:"down",Oc:"right",Od:"left",Oe:"clear","[2^":"insert","[3^":"delete","[5^":"pageup","[6^":"pagedown","[7^":"home","[8^":"end","[Z":"tab"},n=(t="",e={})=>{let n,o={name:e.name,ctrl:!1,meta:!1,shift:!1,option:!1,sequence:t,raw:t,...e};if(Buffer.isBuffer(t)?t[0]>127&&void 0===t[1]?(t[0]-=128,t=""+String(t)):t=String(t):void 0!==t&&"string"!=typeof t?t=String(t):t||(t=o.sequence||""),o.sequence=o.sequence||t||o.name,"\r"===t)o.raw=void 0,o.name="return";else if("\n"===t)o.name="enter";else if("\t"===t)o.name="tab";else if("\b"===t||""===t||""===t||"\b"===t)o.name="backspace",o.meta=""===t.charAt(0);else if(""===t||""===t)o.name="escape",o.meta=2===t.length;else if(" "===t||" "===t)o.name="space",o.meta=2===t.length;else if(t<="")o.name=String.fromCharCode(t.charCodeAt(0)+"a".charCodeAt(0)-1),o.ctrl=!0;else if(1===t.length&&t>="0"&&t<="9")o.name="number";else if(1===t.length&&t>="a"&&t<="z")o.name=t;else if(1===t.length&&t>="A"&&t<="Z")o.name=t.toLowerCase(),o.shift=!0;else if(n=i.exec(t))o.meta=!0,o.shift=/^[A-Z]$/.test(n[1]);else if(n=s.exec(t)){let e=[...t];""===e[0]&&""===e[1]&&(o.option=!0);let i=[n[1],n[2],n[4],n[6]].filter(Boolean).join(""),s=(n[3]||n[5]||1)-1;o.ctrl=!!(4&s),o.meta=!!(10&s),o.shift=!!(1&s),o.code=i,o.name=r[i],o.shift=function(t){return["[a","[b","[c","[d","[e","[2$","[3$","[5$","[6$","[7$","[8$","[Z"].includes(t)}(i)||o.shift,o.ctrl=function(t){return["Oa","Ob","Oc","Od","Oe","[2^","[3^","[5^","[6^","[7^","[8^"].includes(t)}(i)||o.ctrl}return o};return n.listen=(e={},i)=>{let{stdin:s}=e;if(!s||s!==process.stdin&&!s.isTTY)throw new Error("Invalid stream passed");let r=t.createInterface({terminal:!0,input:s});t.emitKeypressEvents(s,r);let o=(t,e)=>i(t,n(t,e),r),a=s.isRaw;return s.isTTY&&s.setRawMode(!0),s.on("keypress",o),r.resume(),()=>{s.isTTY&&s.setRawMode(a),s.removeListener("keypress",o),r.pause(),r.close()}},n.action=(t,i,s)=>{let r={...e,...s};return i.ctrl?(i.action=r.ctrl[i.name],i):i.option&&r.option?(i.action=r.option[i.name],i):i.shift?(i.action=r.shift[i.name],i):(i.action=r.keys[i.name],i)},Rn=n}(),r=Un(),n=function(){if(Nn)return Fn;Nn=1;const{define:t,width:e}=_n;return Fn=class{constructor(i){let s=i.options;t(this,"_prompt",i),this.type=i.type,this.name=i.name,this.message="",this.header="",this.footer="",this.error="",this.hint="",this.input="",this.cursor=0,this.index=0,this.lines=0,this.tick=0,this.prompt="",this.buffer="",this.width=e(s.stdout||process.stdout),Object.assign(this,s),this.name=this.name||this.message,this.message=this.message||this.name,this.symbols=i.symbols,this.styles=i.styles,this.required=new Set,this.cancelled=!1,this.submitted=!1}clone(){let t={...this};return t.status=this.status,t.buffer=Buffer.from(t.buffer),delete t.clone,t}set color(t){this._color=t}get color(){let t=this.prompt.styles;if(this.cancelled)return t.cancelled;if(this.submitted)return t.submitted;let e=this._color||t[this.status];return"function"==typeof e?e:t.pending}set loading(t){this._loading=t}get loading(){return"boolean"==typeof this._loading?this._loading:!!this.loadingChoices&&"choices"}get status(){return this.cancelled?"cancelled":this.submitted?"submitted":"pending"}},Fn}(),o=Gn(),a=_n,h=Zn();class l extends t{constructor(t={}){super(),this.name=t.name,this.type=t.type,this.options=t,o(this),r(this),this.state=new n(this),this.initial=[t.initial,t.default].find((t=>null!=t)),this.stdout=t.stdout||process.stdout,this.stdin=t.stdin||process.stdin,this.scale=t.scale||1,this.term=this.options.term||process.env.TERM_PROGRAM,this.margin=function(t){"number"==typeof t&&(t=[t,t,t,t]);let e=[].concat(t||[]),i=t=>t%2==0?"\n":" ",s=[];for(let t=0;t<4;t++){let r=i(t);e[t]?s.push(r.repeat(e[t])):s.push("")}return s}(this.options.margin),this.setMaxListeners(0),function(t){let e=e=>void 0===t[e]||"function"==typeof t[e],i=["actions","choices","initial","margin","roles","styles","symbols","theme","timers","value"],s=["body","footer","error","header","hint","indicator","message","prefix","separator","skip"];for(let r of Object.keys(t.options)){if(i.includes(r))continue;if(/^on[A-Z]/.test(r))continue;let n=t.options[r];"function"==typeof n&&e(r)?s.includes(r)||(t[r]=n.bind(t)):"function"!=typeof t[r]&&(t[r]=n)}}(this)}async keypress(t,e={}){this.keypressed=!0;let s=i.action(t,i(t,e),this.options.actions);this.state.keypress=s,this.emit("keypress",t,s),this.emit("state",this.state.clone());let r=this.options[s.action]||this[s.action]||this.dispatch;if("function"==typeof r)return await r.call(this,t,s);this.alert()}alert(){delete this.state.alert,!1===this.options.show?this.emit("alert"):this.stdout.write(h.code.beep)}cursorHide(){this.stdout.write(h.cursor.hide()),a.onExit((()=>this.cursorShow()))}cursorShow(){this.stdout.write(h.cursor.show())}write(t){t&&(this.stdout&&!1!==this.state.show&&this.stdout.write(t),this.state.buffer+=t)}clear(t=0){let e=this.state.buffer;this.state.buffer="",(e||t)&&!1!==this.options.show&&this.stdout.write(h.cursor.down(t)+h.clear(e,this.width))}restore(){if(this.state.closed||!1===this.options.show)return;let{prompt:t,after:e,rest:i}=this.sections(),{cursor:s,initial:r="",input:n="",value:o=""}=this,a={after:e,cursor:s,initial:r,input:n,prompt:t,size:this.state.size=i.length,value:o},l=h.cursor.restore(a);l&&this.stdout.write(l)}sections(){let{buffer:t,input:i,prompt:s}=this.state;s=e.unstyle(s);let r=e.unstyle(t),n=r.indexOf(s),o=r.slice(0,n),a=r.slice(n).split("\n"),h=a[0],l=a[a.length-1],c=(s+(i?" "+i:"")).length,u=c<h.length?h.slice(c+1):"";return{header:o,prompt:h,after:u,rest:a.slice(1),last:l}}async submit(){this.state.submitted=!0,this.state.validating=!0,this.options.onSubmit&&await this.options.onSubmit.call(this,this.name,this.value,this);let t=this.state.error||await this.validate(this.value,this.state);if(!0!==t){let e="\n"+this.symbols.pointer+" ";return e+="string"==typeof t?t.trim():"Invalid input",this.state.error="\n"+this.styles.danger(e),this.state.submitted=!1,await this.render(),await this.alert(),this.state.validating=!1,void(this.state.error=void 0)}this.state.validating=!1,await this.render(),await this.close(),this.value=await this.result(this.value),this.emit("submit",this.value)}async cancel(t){this.state.cancelled=this.state.submitted=!0,await this.render(),await this.close(),"function"==typeof this.options.onCancel&&await this.options.onCancel.call(this,this.name,this.value,this),this.emit("cancel",await this.error(t))}async close(){this.state.closed=!0;try{let t=this.sections(),e=Math.ceil(t.prompt.length/this.width);t.rest&&this.write(h.cursor.down(t.rest.length)),this.write("\n".repeat(e))}catch(t){}this.emit("close")}start(){this.stop||!1===this.options.show||(this.stop=i.listen(this,this.keypress.bind(this)),this.once("close",this.stop))}async skip(){return this.skipped=!0===this.options.skip,"function"==typeof this.options.skip&&(this.skipped=await this.options.skip.call(this,this.name,this.value)),this.skipped}async initialize(){let{format:t,options:e,result:i}=this;if(this.format=()=>t.call(this,this.value),this.result=()=>i.call(this,this.value),"function"==typeof e.initial&&(this.initial=await e.initial.call(this,this)),"function"==typeof e.onRun&&await e.onRun.call(this,this),"function"==typeof e.onSubmit){let t=e.onSubmit.bind(this),i=this.submit.bind(this);delete this.options.onSubmit,this.submit=async()=>(await t(this.name,this.value,this),i())}await this.start(),await this.render()}render(){throw new Error("expected prompt to have a custom render method")}run(){return new Promise((async(t,e)=>{if(this.once("submit",t),this.once("cancel",e),await this.skip())return this.render=()=>{},this.submit();await this.initialize(),this.emit("run")}))}async element(t,e,i){let{options:s,state:r,symbols:n,timers:o}=this,a=o&&o[t];r.timer=a;let h=s[t]||r[t]||n[t],l=e&&null!=e[t]?e[t]:await h;if(""===l)return l;let c=await this.resolve(l,r,e,i);return!c&&e&&e[t]?this.resolve(h,r,e,i):c}async prefix(){let t=await this.element("prefix")||this.symbols,e=this.timers&&this.timers.prefix,i=this.state;if(i.timer=e,a.isObject(t)&&(t=t[i.status]||t.pending),!a.hasColor(t)){return(this.styles[i.status]||this.styles.pending)(t)}return t}async message(){let t=await this.element("message");return a.hasColor(t)?t:this.styles.strong(t)}async separator(){let t=await this.element("separator")||this.symbols,e=this.timers&&this.timers.separator,i=this.state;i.timer=e;let s=t[i.status]||t.pending||i.separator,r=await this.resolve(s,i);return a.isObject(r)&&(r=r[i.status]||r.pending),a.hasColor(r)?r:this.styles.muted(r)}async pointer(t,e){let i=await this.element("pointer",t,e);if("string"==typeof i&&a.hasColor(i))return i;if(i){let t=this.styles,s=this.index===e,r=s?t.primary:t=>t,n=await this.resolve(i[s?"on":"off"]||i,this.state),o=a.hasColor(n)?n:r(n);return s?o:" ".repeat(n.length)}}async indicator(t,e){let i=await this.element("indicator",t,e);if("string"==typeof i&&a.hasColor(i))return i;if(i){let e=this.styles,s=!0===t.enabled,r=s?e.success:e.dark,n=i[s?"on":"off"]||i;return a.hasColor(n)?n:r(n)}return""}body(){return null}footer(){if("pending"===this.state.status)return this.element("footer")}header(){if("pending"===this.state.status)return this.element("header")}async hint(){if("pending"===this.state.status&&!this.isValue(this.state.input)){let t=await this.element("hint");return a.hasColor(t)?t:this.styles.muted(t)}}error(t){return this.state.submitted?"":t||this.state.error}format(t){return t}result(t){return t}validate(t){return!0!==this.options.required||this.isValue(t)}isValue(t){return null!=t&&""!==t}resolve(t,...e){return a.resolve(this,t,...e)}get base(){return l.prototype}get style(){return this.styles[this.state.status]}get height(){return this.options.rows||a.height(this.stdout,25)}get width(){return this.options.columns||a.width(this.stdout,80)}get size(){return{width:this.width,height:this.height}}set cursor(t){this.state.cursor=t}get cursor(){return this.state.cursor}set input(t){this.state.input=t}get input(){return this.state.input}set value(t){this.state.value=t}get value(){let{input:t,value:e}=this.state,i=[e,t].find(this.isValue.bind(this));return this.isValue(i)?i:this.initial}static get prompt(){return t=>new this(t).run()}}return Yn=l}var Xn,to,eo,io,so,ro,no,oo,ao,ho,lo,co,uo,po,fo,mo,go,yo,wo,bo,vo,xo,So,ko,_o,Oo,Co,Eo,Ao,To,Mo,Ro,$o,Po,Lo,Fo,No,jo,Do,Bo,Io,zo,Wo,Ho,Vo,Uo,Go,qo,Yo,Jo,Ko,Zo,Qo,Xo,ta,ea,ia,sa,ra,na={};function oa(){if(io)return eo;io=1;const t=Tn,e=Qn(),i=function(){if(to)return Xn;to=1;const t=_n,e={default:(t,e)=>e,checkbox(t,e){throw new Error("checkbox role is not implemented yet")},editable(t,e){throw new Error("editable role is not implemented yet")},expandable(t,e){throw new Error("expandable role is not implemented yet")},heading:(t,e)=>(e.disabled="",e.indicator=[e.indicator," "].find((t=>null!=t)),e.message=e.message||"",e),input(t,e){throw new Error("input role is not implemented yet")},option:(t,i)=>e.default(t,i),radio(t,e){throw new Error("radio role is not implemented yet")},separator:(t,e)=>(e.disabled="",e.indicator=[e.indicator," "].find((t=>null!=t)),e.message=e.message||t.symbols.line.repeat(5),e),spacer:(t,e)=>e};return Xn=(i,s={})=>{let r=t.merge({},e,s.roles);return r[i]||r.default}}(),s=_n,{reorder:r,scrollUp:n,scrollDown:o,isObject:a,swap:h}=s;function l(t,e){if(e instanceof Promise)return e;if("function"==typeof e){if(s.isAsyncFn(e))return e;e=e.call(t,t)}for(let i of e){if(Array.isArray(i.choices)){let e=i.choices.filter((e=>!t.isDisabled(e)));i.enabled=e.every((t=>!0===t.enabled))}!0===t.isDisabled(i)&&delete i.enabled}return e}return eo=class extends e{constructor(t){super(t),this.cursorHide(),this.maxSelected=t.maxSelected||1/0,this.multiple=t.multiple||!1,this.initial=t.initial||0,this.delay=t.delay||0,this.longest=0,this.num=""}async initialize(){"function"==typeof this.options.initial&&(this.initial=await this.options.initial.call(this)),await this.reset(!0),await super.initialize()}async reset(){let{choices:t,initial:e,autofocus:i,suggest:s}=this.options;if(this.state._choices=[],this.state.choices=[],this.choices=await Promise.all(await this.toChoices(t)),this.choices.forEach((t=>t.enabled=!1)),"function"!=typeof s&&0===this.selectable.length)throw new Error("At least one choice must be selectable");a(e)&&(e=Object.keys(e)),Array.isArray(e)?(null!=i&&(this.index=this.findIndex(i)),e.forEach((t=>this.enable(this.find(t)))),await this.render()):(null!=i&&(e=i),"string"==typeof e&&(e=this.findIndex(e)),"number"==typeof e&&e>-1&&(this.index=Math.max(0,Math.min(e,this.choices.length)),this.enable(this.find(this.index)))),this.isDisabled(this.focused)&&await this.down()}async toChoices(t,e){this.state.loadingChoices=!0;let i=[],s=0,r=async(t,e)=>{"function"==typeof t&&(t=await t.call(this)),t instanceof Promise&&(t=await t);for(let n=0;n<t.length;n++){let o=t[n]=await this.toChoice(t[n],s++,e);i.push(o),o.choices&&await r(o.choices,o)}return i};return r(t,e).then((t=>(this.state.loadingChoices=!1,t)))}async toChoice(e,r,n){if("function"==typeof e&&(e=await e.call(this,this)),e instanceof Promise&&(e=await e),"string"==typeof e&&(e={name:e}),e.normalized)return e;e.normalized=!0;let o=e.value,a=i(e.role,this.options);if("string"!=typeof(e=a(this,e)).disabled||e.hint||(e.hint=e.disabled,e.disabled=!0),!0===e.disabled&&null==e.hint&&(e.hint="(disabled)"),null!=e.index)return e;e.name=e.name||e.key||e.title||e.value||e.message,e.message=e.message||e.name||"",e.value=[e.value,e.name].find(this.isValue.bind(this)),e.input="",e.index=r,e.cursor=0,s.define(e,"parent",n),e.level=n?n.level+1:1,null==e.indent&&(e.indent=n?n.indent+"  ":e.indent||""),e.path=n?n.path+"."+e.name:e.name,e.enabled=!(!this.multiple||this.isDisabled(e)||!e.enabled&&!this.isSelected(e)),this.isDisabled(e)||(this.longest=Math.max(this.longest,t.unstyle(e.message).length));let h={...e};return e.reset=(t=h.input,i=h.value)=>{for(let t of Object.keys(h))e[t]=h[t];e.input=t,e.value=i},null==o&&"function"==typeof e.initial&&(e.input=await e.initial.call(this,this.state,e,r)),e}async onChoice(t,e){this.emit("choice",t,e,this),"function"==typeof t.onChoice&&await t.onChoice.call(this,this.state,t,e)}async addChoice(t,e,i){let s=await this.toChoice(t,e,i);return this.choices.push(s),this.index=this.choices.length-1,this.limit=this.choices.length,s}async newItem(t,e,i){let s={name:"New choice name?",editable:!0,newChoice:!0,...t},r=await this.addChoice(s,e,i);return r.updateChoice=()=>{delete r.newChoice,r.name=r.message=r.input,r.input="",r.cursor=0},this.render()}indent(t){return null==t.indent?t.level>1?"  ".repeat(t.level-1):"":t.indent}dispatch(t,e){if(this.multiple&&this[e.name])return this[e.name]();this.alert()}focus(t,e){return"boolean"!=typeof e&&(e=t.enabled),e&&!t.enabled&&this.selected.length>=this.maxSelected?this.alert():(this.index=t.index,t.enabled=e&&!this.isDisabled(t),t)}space(){return this.multiple?(this.toggle(this.focused),this.render()):this.alert()}a(){if(this.maxSelected<this.choices.length)return this.alert();let t=this.selectable.every((t=>t.enabled));return this.choices.forEach((e=>e.enabled=!t)),this.render()}i(){return this.choices.length-this.selected.length>this.maxSelected?this.alert():(this.choices.forEach((t=>t.enabled=!t.enabled)),this.render())}g(t=this.focused){return this.choices.some((t=>!!t.parent))?(this.toggle(t.parent&&!t.choices?t.parent:t),this.render()):this.a()}toggle(t,e){if(!t.enabled&&this.selected.length>=this.maxSelected)return this.alert();"boolean"!=typeof e&&(e=!t.enabled),t.enabled=e,t.choices&&t.choices.forEach((t=>this.toggle(t,e)));let i=t.parent;for(;i;){let t=i.choices.filter((t=>this.isDisabled(t)));i.enabled=t.every((t=>!0===t.enabled)),i=i.parent}return l(this,this.choices),this.emit("toggle",t,this),t}enable(t){return this.selected.length>=this.maxSelected?this.alert():(t.enabled=!this.isDisabled(t),t.choices&&t.choices.forEach(this.enable.bind(this)),t)}disable(t){return t.enabled=!1,t.choices&&t.choices.forEach(this.disable.bind(this)),t}number(t){this.num+=t;let e=t=>{let e=Number(t);if(e>this.choices.length-1)return this.alert();let i=this.focused,s=this.choices.find((t=>e===t.index));if(!s.enabled&&this.selected.length>=this.maxSelected)return this.alert();if(-1===this.visible.indexOf(s)){let t=r(this.choices),e=t.indexOf(s);if(i.index>e){let i=t.slice(e,e+this.limit),s=t.filter((t=>!i.includes(t)));this.choices=i.concat(s)}else{let i=e-this.limit+1;this.choices=t.slice(i).concat(t.slice(0,i))}}return this.index=this.choices.indexOf(s),this.toggle(this.focused),this.render()};return clearTimeout(this.numberTimeout),new Promise((t=>{let i=this.choices.length,s=this.num,r=(i=!1,r)=>{clearTimeout(this.numberTimeout),i&&(r=e(s)),this.num="",t(r)};return"0"===s||1===s.length&&Number(s+"0")>i?r(!0):Number(s)>i?r(!1,this.alert()):void(this.numberTimeout=setTimeout((()=>r(!0)),this.delay))}))}home(){return this.choices=r(this.choices),this.index=0,this.render()}end(){let t=this.choices.length-this.limit,e=r(this.choices);return this.choices=e.slice(t).concat(e.slice(0,t)),this.index=this.limit-1,this.render()}first(){return this.index=0,this.render()}last(){return this.index=this.visible.length-1,this.render()}prev(){return this.visible.length<=1?this.alert():this.up()}next(){return this.visible.length<=1?this.alert():this.down()}right(){return this.cursor>=this.input.length?this.alert():(this.cursor++,this.render())}left(){return this.cursor<=0?this.alert():(this.cursor--,this.render())}up(){let t=this.choices.length,e=this.visible.length,i=this.index;return!1===this.options.scroll&&0===i?this.alert():t>e&&0===i?this.scrollUp():(this.index=(i-1%t+t)%t,this.isDisabled()?this.up():this.render())}down(){let t=this.choices.length,e=this.visible.length,i=this.index;return!1===this.options.scroll&&i===e-1?this.alert():t>e&&i===e-1?this.scrollDown():(this.index=(i+1)%t,this.isDisabled()?this.down():this.render())}scrollUp(t=0){return this.choices=n(this.choices),this.index=t,this.isDisabled()?this.up():this.render()}scrollDown(t=this.visible.length-1){return this.choices=o(this.choices),this.index=t,this.isDisabled()?this.down():this.render()}async shiftUp(){return!0===this.options.sort?(this.sorting=!0,this.swap(this.index-1),await this.up(),void(this.sorting=!1)):this.scrollUp(this.index)}async shiftDown(){return!0===this.options.sort?(this.sorting=!0,this.swap(this.index+1),await this.down(),void(this.sorting=!1)):this.scrollDown(this.index)}pageUp(){return this.visible.length<=1?this.alert():(this.limit=Math.max(this.limit-1,0),this.index=Math.min(this.limit-1,this.index),this._limit=this.limit,this.isDisabled()?this.up():this.render())}pageDown(){return this.visible.length>=this.choices.length?this.alert():(this.index=Math.max(0,this.index),this.limit=Math.min(this.limit+1,this.choices.length),this._limit=this.limit,this.isDisabled()?this.down():this.render())}swap(t){h(this.choices,this.index,t)}isDisabled(t=this.focused){return!(!t||!["disabled","collapsed","hidden","completing","readonly"].some((e=>!0===t[e])))||t&&"heading"===t.role}isEnabled(t=this.focused){if(Array.isArray(t))return t.every((t=>this.isEnabled(t)));if(t.choices){let e=t.choices.filter((t=>!this.isDisabled(t)));return t.enabled&&e.every((t=>this.isEnabled(t)))}return t.enabled&&!this.isDisabled(t)}isChoice(t,e){return t.name===e||t.index===Number(e)}isSelected(t){return Array.isArray(this.initial)?this.initial.some((e=>this.isChoice(t,e))):this.isChoice(t,this.initial)}map(t=[],e="value"){return[].concat(t||[]).reduce(((t,i)=>(t[i]=this.find(i,e),t)),{})}filter(t,e){let i="function"==typeof t?t:(e,i)=>[e.name,i].includes(t),s=(this.options.multiple?this.state._choices:this.choices).filter(i);return e?s.map((t=>t[e])):s}find(t,e){if(a(t))return e?t[e]:t;let i="function"==typeof t?t:(e,i)=>[e.name,i].includes(t),s=this.choices.find(i);return s?e?s[e]:s:void 0}findIndex(t){return this.choices.indexOf(this.find(t))}async submit(){let t=this.focused;if(!t)return this.alert();if(t.newChoice)return t.input?(t.updateChoice(),this.render()):this.alert();if(this.choices.some((t=>t.newChoice)))return this.alert();let{reorder:e,sort:i}=this.options,r=!0===this.multiple,n=this.selected;return void 0===n?this.alert():(Array.isArray(n)&&!1!==e&&!0!==i&&(n=s.reorder(n)),this.value=r?n.map((t=>t.name)):n.name,super.submit())}set choices(t=[]){this.state._choices=this.state._choices||[],this.state.choices=t;for(let e of t)this.state._choices.some((t=>t.name===e.name))||this.state._choices.push(e);if(!this._initial&&this.options.initial){this._initial=!0;let t=this.initial;if("string"==typeof t||"number"==typeof t){let e=this.find(t);e&&(this.initial=e.index,this.focus(e,!0))}}}get choices(){return l(this,this.state.choices||[])}set visible(t){this.state.visible=t}get visible(){return(this.state.visible||this.choices).slice(0,this.limit)}set limit(t){this.state.limit=t}get limit(){let{state:t,options:e,choices:i}=this,s=t.limit||this._limit||e.limit||i.length;return Math.min(s,this.height)}set value(t){super.value=t}get value(){return"string"!=typeof super.value&&super.value===this.initial?this.input:super.value}set index(t){this.state.index=t}get index(){return Math.max(0,this.state?this.state.index:0)}get enabled(){return this.filter(this.isEnabled.bind(this))}get focused(){let t=this.choices[this.index];return t&&this.state.submitted&&!0!==this.multiple&&(t.enabled=!0),t}get selectable(){return this.choices.filter((t=>!this.isDisabled(t)))}get selected(){return this.multiple?this.enabled:this.focused}},eo}function aa(){if(ro)return so;ro=1;const t=oa(),e=_n;return so=class extends t{constructor(t){super(t),this.emptyError=this.options.emptyError||"No items were selected"}async dispatch(t,e){if(this.multiple)return this[e.name]?await this[e.name](t,e):await super.dispatch(t,e);this.alert()}separator(){if(this.options.separator)return super.separator();let t=this.styles.muted(this.symbols.ellipsis);return this.state.submitted?super.separator():t}pointer(t,e){return!this.multiple||this.options.pointer?super.pointer(t,e):""}indicator(t,e){return this.multiple?super.indicator(t,e):""}choiceMessage(t,i){let s=this.resolve(t.message,this.state,t,i);return"heading"!==t.role||e.hasColor(s)||(s=this.styles.strong(s)),this.resolve(s,this.state,t,i)}choiceSeparator(){return":"}async renderChoice(t,i){await this.onChoice(t,i);let s=this.index===i,r=await this.pointer(t,i),n=await this.indicator(t,i)+(t.pad||""),o=await this.resolve(t.hint,this.state,t,i);o&&!e.hasColor(o)&&(o=this.styles.muted(o));let a=this.indent(t),h=await this.choiceMessage(t,i),l=()=>[this.margin[3],a+r+n,h,this.margin[1],o].filter(Boolean).join(" ");return"heading"===t.role?l():t.disabled?(e.hasColor(h)||(h=this.styles.disabled(h)),l()):(s&&(h=this.styles.em(h)),l())}async renderChoices(){if("choices"===this.state.loading)return this.styles.warning("Loading choices");if(this.state.submitted)return"";let t=this.visible.map((async(t,e)=>await this.renderChoice(t,e))),e=await Promise.all(t);e.length||e.push(this.styles.danger("No matching choices"));let i,s=this.margin[0]+e.join("\n");return this.options.choicesHeader&&(i=await this.resolve(this.options.choicesHeader,this.state)),[i,s].filter(Boolean).join("\n")}format(){return!this.state.submitted||this.state.cancelled?"":Array.isArray(this.selected)?this.selected.map((t=>this.styles.primary(t.name))).join(", "):this.styles.primary(this.selected.name)}async render(){let{submitted:t,size:e}=this.state,i="",s=await this.header(),r=await this.prefix(),n=await this.separator(),o=await this.message();!1!==this.options.promptLine&&(i=[r,o,n,""].join(" "),this.state.prompt=i);let a=await this.format(),h=await this.error()||await this.hint(),l=await this.renderChoices(),c=await this.footer();a&&(i+=a),h&&!i.includes(h)&&(i+=" "+h),t&&!a&&!l.trim()&&this.multiple&&null!=this.emptyError&&(i+=this.styles.danger(this.emptyError)),this.clear(e),this.write([s,i,l,c].filter(Boolean).join("\n")),this.write(this.margin[2]),this.restore()}},so}function ha(){if(ho)return ao;ho=1;const t=_n;return ao=(e,i={})=>{e.cursorHide();let{input:s="",initial:r="",pos:n,showCursor:o=!0,color:a}=i,h=a||e.styles.placeholder,l=t.inverse(e.styles.primary),c=t=>l(e.styles.black(t)),u=s,p=c(" ");if(e.blink&&!0===e.blink.off&&(c=t=>t,p=""),o&&0===n&&""===r&&""===s)return c(" ");if(o&&0===n&&(s===r||""===s))return c(r[0])+h(r.slice(1));r=t.isPrimitive(r)?`${r}`:"",s=t.isPrimitive(s)?`${s}`:"";let d=r&&r.startsWith(s)&&r!==s,f=d?c(r[s.length]):p;if(n!==s.length&&!0===o&&(u=s.slice(0,n)+c(s[n])+s.slice(n+1),f=""),!1===o&&(f=""),d){let t=e.styles.unstyle(u+f);return u+f+h(r.slice(t.length))}return u+f},ao}function la(){if(co)return lo;co=1;const t=Tn,e=aa(),i=ha();return lo=class extends e{constructor(t){super({...t,multiple:!0}),this.type="form",this.initial=this.options.initial,this.align=[this.options.align,"right"].find((t=>null!=t)),this.emptyError="",this.values={}}async reset(t){return await super.reset(),!0===t&&(this._index=this.index),this.index=this._index,this.values={},this.choices.forEach((t=>t.reset&&t.reset())),this.render()}dispatch(t){return!!t&&this.append(t)}append(t){let e=this.focused;if(!e)return this.alert();let{cursor:i,input:s}=e;return e.value=e.input=s.slice(0,i)+t+s.slice(i),e.cursor++,this.render()}delete(){let t=this.focused;if(!t||t.cursor<=0)return this.alert();let{cursor:e,input:i}=t;return t.value=t.input=i.slice(0,e-1)+i.slice(e),t.cursor--,this.render()}deleteForward(){let t=this.focused;if(!t)return this.alert();let{cursor:e,input:i}=t;if(void 0===i[e])return this.alert();let s=`${i}`.slice(0,e)+`${i}`.slice(e+1);return t.value=t.input=s,this.render()}right(){let t=this.focused;return t?t.cursor>=t.input.length?this.alert():(t.cursor++,this.render()):this.alert()}left(){let t=this.focused;return t?t.cursor<=0?this.alert():(t.cursor--,this.render()):this.alert()}space(t,e){return this.dispatch(t,e)}number(t,e){return this.dispatch(t,e)}next(){let t=this.focused;if(!t)return this.alert();let{initial:e,input:i}=t;return e&&e.startsWith(i)&&i!==e?(t.value=t.input=e,t.cursor=t.value.length,this.render()):super.next()}prev(){let t=this.focused;return t?0===t.cursor?super.prev():(t.value=t.input="",t.cursor=0,this.render()):this.alert()}separator(){return""}format(t){return this.state.submitted?"":super.format(t)}pointer(){return""}indicator(t){return t.input?"⦿":"⊙"}async choiceSeparator(t,e){let i=await this.resolve(t.separator,this.state,t,e)||":";return i?" "+this.styles.disabled(i):""}async renderChoice(e,s){await this.onChoice(e,s);let{state:r,styles:n}=this,{cursor:o,initial:a="",name:h,hint:l,input:c=""}=e,{muted:u,submitted:p,primary:d,danger:f}=n,m=l,g=this.index===s,y=e.validate||(()=>!0),w=await this.choiceSeparator(e,s),b=e.message;"right"===this.align&&(b=b.padStart(this.longest+1," ")),"left"===this.align&&(b=b.padEnd(this.longest+1," "));let v=this.values[h]=c||a,x=c?"success":"dark";!0!==await y.call(e,v,this.state)&&(x="danger");let S=(0,n[x])(await this.indicator(e,s))+(e.pad||""),k=this.indent(e),_=()=>[k,S,b+w,c,m].filter(Boolean).join(" ");if(r.submitted)return b=t.unstyle(b),c=p(c),m="",_();if(e.format)c=await e.format.call(this,c,e,s);else{let t=this.styles.muted;c=i(this,{input:c,initial:a,pos:o,showCursor:g,color:t})}return this.isValue(c)||(c=this.styles.muted(this.symbols.ellipsis)),e.result&&(this.values[h]=await e.result.call(this,v,e,s)),g&&(b=d(b)),e.error?c+=(c?" ":"")+f(e.error.trim()):e.hint&&(c+=(c?" ":"")+u(e.hint.trim())),_()}async submit(){return this.value=this.values,super.base.submit.call(this)}},lo}function ca(){if(po)return uo;po=1;const t=la(),e=()=>{throw new Error("expected prompt to have a custom authenticate method")},i=(s=e)=>class extends t{constructor(t){super(t)}async submit(){this.value=await s.call(this,this.values,this.state),super.base.submit.call(this)}static create(t){return i(t)}};return uo=i()}function ua(){if(yo)return go;yo=1;const t=Qn(),{isPrimitive:e,hasColor:i}=_n;return go=class extends t{constructor(t){super(t),this.cursorHide()}async initialize(){let t=await this.resolve(this.initial,this.state);this.input=await this.cast(t),await super.initialize()}dispatch(t){return this.isValue(t)?(this.input=t,this.submit()):this.alert()}format(t){let{styles:e,state:i}=this;return i.submitted?e.success(t):e.primary(t)}cast(t){return this.isTrue(t)}isTrue(t){return/^[ty1]/i.test(t)}isFalse(t){return/^[fn0]/i.test(t)}isValue(t){return e(t)&&(this.isTrue(t)||this.isFalse(t))}async hint(){if("pending"===this.state.status){let t=await this.element("hint");return i(t)?t:this.styles.muted(t)}}async render(){let{input:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=[i,await this.message(),this.styles.muted(this.default),s].filter(Boolean).join(" ");this.state.prompt=r;let n=await this.header(),o=this.value=this.cast(t),a=await this.format(o),h=await this.error()||await this.hint(),l=await this.footer();h&&!r.includes(h)&&(a+=" "+h),r+=" "+a,this.clear(e),this.write([n,r,l].filter(Boolean).join("\n")),this.restore()}set value(t){super.value=t}get value(){return this.cast(super.value)}},go}function pa(){if(ko)return So;ko=1;const t=Qn(),e=ha(),{isPrimitive:i}=_n;return So=class extends t{constructor(t){super(t),this.initial=i(this.initial)?String(this.initial):"",this.initial&&this.cursorHide(),this.state.prevCursor=0,this.state.clipboard=[]}async keypress(t,e={}){let i=this.state.prevKeypress;return this.state.prevKeypress=e,!0!==this.options.multiline||"return"!==e.name||i&&"return"===i.name?super.keypress(t,e):this.append("\n",e)}moveCursor(t){this.cursor+=t}reset(){return this.input=this.value="",this.cursor=0,this.render()}dispatch(t,e){if(!t||e.ctrl||e.code)return this.alert();this.append(t)}append(t){let{cursor:e,input:i}=this.state;this.input=`${i}`.slice(0,e)+t+`${i}`.slice(e),this.moveCursor(String(t).length),this.render()}insert(t){this.append(t)}delete(){let{cursor:t,input:e}=this.state;if(t<=0)return this.alert();this.input=`${e}`.slice(0,t-1)+`${e}`.slice(t),this.moveCursor(-1),this.render()}deleteForward(){let{cursor:t,input:e}=this.state;if(void 0===e[t])return this.alert();this.input=`${e}`.slice(0,t)+`${e}`.slice(t+1),this.render()}cutForward(){let t=this.cursor;if(this.input.length<=t)return this.alert();this.state.clipboard.push(this.input.slice(t)),this.input=this.input.slice(0,t),this.render()}cutLeft(){let t=this.cursor;if(0===t)return this.alert();let e=this.input.slice(0,t),i=this.input.slice(t),s=e.split(" ");this.state.clipboard.push(s.pop()),this.input=s.join(" "),this.cursor=this.input.length,this.input+=i,this.render()}paste(){if(!this.state.clipboard.length)return this.alert();this.insert(this.state.clipboard.pop()),this.render()}toggleCursor(){this.state.prevCursor?(this.cursor=this.state.prevCursor,this.state.prevCursor=0):(this.state.prevCursor=this.cursor,this.cursor=0),this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.input.length-1,this.render()}next(){let t=null!=this.initial?String(this.initial):"";if(!t||!t.startsWith(this.input))return this.alert();this.input=this.initial,this.cursor=this.initial.length,this.render()}prev(){if(!this.input)return this.alert();this.reset()}backward(){return this.left()}forward(){return this.right()}right(){return this.cursor>=this.input.length?this.alert():(this.moveCursor(1),this.render())}left(){return this.cursor<=0?this.alert():(this.moveCursor(-1),this.render())}isValue(t){return!!t}async format(t=this.value){let i=await this.resolve(this.initial,this.state);return this.state.submitted?this.styles.submitted(t||i):e(this,{input:t,initial:i,pos:this.cursor})}async render(){let t=this.state.size,e=await this.prefix(),i=await this.separator(),s=[e,await this.message(),i].filter(Boolean).join(" ");this.state.prompt=s;let r=await this.header(),n=await this.format(),o=await this.error()||await this.hint(),a=await this.footer();o&&!n.includes(o)&&(n+=" "+o),s+=" "+n,this.clear(t),this.write([r,s,a].filter(Boolean).join("\n")),this.restore()}},So}function da(){if(Oo)return _o;Oo=1;const t=t=>(t=>t.filter(((e,i)=>t.lastIndexOf(e)===i)))(t).filter(Boolean);return _o=(e,i={},s="")=>{let r,n,{past:o=[],present:a=""}=i;switch(e){case"prev":case"undo":return r=o.slice(0,o.length-1),n=o[o.length-1]||"",{past:t([s,...r]),present:n};case"next":case"redo":return r=o.slice(1),n=o[0]||"",{past:t([...r,s]),present:n};case"save":return{past:t([...o,s]),present:""};case"remove":return n=t(o.filter((t=>t!==s))),a="",n.length&&(a=n.pop()),{past:n,present:a};default:throw new Error(`Invalid action: "${e}"`)}}}function fa(){if(Eo)return Co;Eo=1;const t=pa(),e=da();return Co=class extends t{constructor(t){super(t);let e=this.options.history;if(e&&e.store){let t=e.values||this.initial;this.autosave=!!e.autosave,this.store=e.store,this.data=this.store.get("values")||{past:[],present:t},this.initial=this.data.present||this.data.past[this.data.past.length-1]}}completion(t){return this.store?(this.data=e(t,this.data,this.input),this.data.present?(this.input=this.data.present,this.cursor=this.input.length,this.render()):this.alert()):this.alert()}altUp(){return this.completion("prev")}altDown(){return this.completion("next")}prev(){return this.save(),super.prev()}save(){this.store&&(this.data=e("save",this.data,this.input),this.store.set("values",this.data))}submit(){return this.store&&!0===this.autosave&&this.save(),super.submit()}}}function ma(){if(Fo)return Lo;Fo=1;const t=pa();return Lo=class extends t{constructor(t={}){super({style:"number",...t}),this.min=this.isValue(t.min)?this.toNumber(t.min):-1/0,this.max=this.isValue(t.max)?this.toNumber(t.max):1/0,this.delay=null!=t.delay?t.delay:1e3,this.float=!1!==t.float,this.round=!0===t.round||!1===t.float,this.major=t.major||10,this.minor=t.minor||1,this.initial=null!=t.initial?t.initial:"",this.input=String(this.initial),this.cursor=this.input.length,this.cursorShow()}append(t){return!/[-+.]/.test(t)||"."===t&&this.input.includes(".")?this.alert("invalid number"):super.append(t)}number(t){return super.append(t)}next(){return this.input&&this.input!==this.initial?this.alert():this.isValue(this.initial)?(this.input=this.initial,this.cursor=String(this.initial).length,this.render()):this.alert()}up(t){let e=t||this.minor,i=this.toNumber(this.input);return i>this.max+e?this.alert():(this.input=`${i+e}`,this.render())}down(t){let e=t||this.minor,i=this.toNumber(this.input);return i<this.min-e?this.alert():(this.input=""+(i-e),this.render())}shiftDown(){return this.down(this.major)}shiftUp(){return this.up(this.major)}format(t=this.input){return"function"==typeof this.options.format?this.options.format.call(this,t):this.styles.info(t)}toNumber(t=""){return this.float?+t:Math.round(+t)}isValue(t){return/^[-+]?[0-9]+((\.)|(\.[0-9]+))?$/.test(t)}submit(){let t=[this.input,this.initial].find((t=>this.isValue(t)));return this.value=this.toNumber(t||0),super.submit()}},Lo}function ga(){if(Ho)return Wo;Ho=1;const t=Tn;class e{constructor(t){this.name=t.key,this.field=t.field||{},this.value=((t="")=>"string"==typeof t?t.replace(/^['"]|['"]$/g,""):"")(t.initial||this.field.initial||""),this.message=t.message||this.name,this.cursor=0,this.input="",this.lines=[]}}function i(t,e,i,s){return(i,r,n,o)=>"function"==typeof n.field[t]?n.field[t].call(e,i,r,n,o):[s,i].find((t=>e.isValue(t)))}return Wo=async s=>{let r=s.options,n=new Set(!0===r.required?[]:r.required||[]),o={...r.values,...r.initial},{tabstops:a,items:h,keys:l}=await(async(t={},i={},s=(t=>t))=>{let r=new Set,n=t.fields||[],o=t.template,a=[],h=[],l=[],c=1;"function"==typeof o&&(o=await o());let u=-1,p=()=>o[++u],d=()=>o[u+1],f=t=>{t.line=c,a.push(t)};for(f({type:"bos",value:""});u<o.length-1;){let t=p();if(/^[^\S\n ]$/.test(t)){f({type:"text",value:t});continue}if("\n"===t){f({type:"newline",value:t}),c++;continue}if("\\"===t){t+=p(),f({type:"text",value:t});continue}if(("$"===t||"#"===t||"{"===t)&&"{"===d()){t+=p();let o,a={type:"template",open:t,inner:"",close:"",value:t};for(;o=p();){if("}"===o){"}"===d()&&(o+=p()),a.value+=o,a.close=o;break}":"===o?(a.initial="",a.key=a.inner):void 0!==a.initial&&(a.initial+=o),a.value+=o,a.inner+=o}a.template=a.open+(a.initial||a.inner)+a.close,a.key=a.key||a.inner,i.hasOwnProperty(a.key)&&(a.initial=i[a.key]),a=s(a),f(a),l.push(a.key),r.add(a.key);let c=h.find((t=>t.name===a.key));a.field=n.find((t=>t.name===a.key)),c||(c=new e(a),h.push(c)),c.lines.push(a.line-1);continue}let o=a[a.length-1];"text"===o.type&&o.line===c?o.value+=t:f({type:"text",value:t})}return f({type:"eos",value:""}),{input:o,tabstops:a,unique:r,keys:l,items:h}})(r,o),c=i("result",s),u=i("format",s),p=i("validate",s,r,!0),d=s.isValue.bind(s);return async(e={},i=!1)=>{let o=0;e.required=n,e.items=h,e.keys=l,e.output="";let f=async(t,e,i,s)=>{let r=await p(t,e,i,s);return!1===r?"Invalid field "+i.name:r};for(let n of a){let a=n.value,l=n.key;if("template"===n.type){if("template"===n.type){let p=h.find((t=>t.name===l));!0===r.required&&e.required.add(p.name);let m=[p.input,e.values[p.value],p.value,a].find(d),g=(p.field||{}).message||n.inner;if(i){let i=await f(e.values[l],e,p,o);if(i&&"string"==typeof i||!1===i){e.invalid.set(l,i);continue}e.invalid.delete(l);let s=await c(e.values[l],e,p,o);e.output+=t.unstyle(s);continue}p.placeholder=!1;let y=a;a=await u(a,e,p,o),m!==a?(e.values[l]=m,a=s.styles.typing(m),e.missing.delete(g)):(e.values[l]=void 0,m=`<${g}>`,a=s.styles.primary(m),p.placeholder=!0,e.required.has(l)&&e.missing.add(g)),e.missing.has(g)&&e.validating&&(a=s.styles.warning(m)),e.invalid.has(l)&&e.validating&&(a=s.styles.danger(m)),o===e.index&&(a=y!==a?s.styles.underline(a):s.styles.heading(t.unstyle(a))),o++}a&&(e.output+=a)}else a&&(e.output+=a)}let m=e.output.split("\n").map((t=>" "+t)),g=h.length,y=0;for(let t of h)e.invalid.has(t.name)&&t.lines.forEach((t=>{" "===m[t][0]&&(m[t]=e.styles.danger(e.symbols.bullet)+m[t].slice(1))})),s.isValue(e.values[t.name])&&y++;return e.completed=(y/g*100).toFixed(0),e.output=m.join("\n"),e.output}},Wo}function ya(){if(Jo)return Yo;Jo=1;const t=oa();function e(t,e={}){if(Array.isArray(e.scale))return e.scale.map((t=>({...t})));let i=[];for(let e=1;e<t+1;e++)i.push({i:e,selected:!1});return i}return Yo=class extends t{constructor(t={}){if(super(t),this.emptyError=t.emptyError||"No items were selected",this.term=process.env.TERM_PROGRAM,!this.options.header){let t=["","4 - Strongly Agree","3 - Agree","2 - Neutral","1 - Disagree","0 - Strongly Disagree",""];t=t.map((t=>this.styles.muted(t))),this.state.header=t.join("\n   ")}}async toChoices(...t){if(this.createdScales)return!1;this.createdScales=!0;let i=await super.toChoices(...t);for(let t of i)t.scale=e(5,this.options),t.scaleIdx=2;return i}dispatch(){this.alert()}space(){let t=this.focused,e=t.scale[t.scaleIdx],i=e.selected;return t.scale.forEach((t=>t.selected=!1)),e.selected=!i,this.render()}indicator(){return""}pointer(){return""}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;return t.scaleIdx>=t.scale.length-1?this.alert():(t.scaleIdx++,this.render())}left(){let t=this.focused;return t.scaleIdx<=0?this.alert():(t.scaleIdx--,this.render())}indent(){return"   "}async renderChoice(t,e){await this.onChoice(t,e);let i=this.index===e,s="Hyper"===this.term,r=s?9:8,n=s?"":" ",o=this.symbols.line.repeat(r),a=" ".repeat(r+(s?0:1)),h=t=>(t?this.styles.success("◉"):"◯")+n,l=e+1+".",c=i?this.styles.heading:this.styles.noop,u=await this.resolve(t.message,this.state,t,e),p=this.indent(t),d=p+t.scale.map(((e,i)=>h(i===t.scaleIdx))).join(o),f=p+t.scale.map(((e,i)=>(e=>e===t.scaleIdx?c(e):e)(i))).join(a);return i&&(d=this.styles.cyan(d),f=this.styles.cyan(f)),[[l,u].filter(Boolean).join(" "),d,f," "].filter(Boolean).join("\n")}async renderChoices(){if(this.state.submitted)return"";let t=this.visible.map((async(t,e)=>await this.renderChoice(t,e))),e=await Promise.all(t);return e.length||e.push(this.styles.danger("No matching choices")),e.join("\n")}format(){if(this.state.submitted){return this.choices.map((t=>this.styles.info(t.scaleIdx))).join(", ")}return""}async render(){let{submitted:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=[i,await this.message(),s].filter(Boolean).join(" ");this.state.prompt=r;let n=await this.header(),o=await this.format(),a=await this.error()||await this.hint(),h=await this.renderChoices(),l=await this.footer();!o&&a||(r+=" "+o),a&&!r.includes(a)&&(r+=" "+a),t&&!o&&!h&&this.multiple&&"form"!==this.type&&(r+=this.styles.danger(this.emptyError)),this.clear(e),this.write([r,n,h,l].filter(Boolean).join("\n")),this.restore()}submit(){this.value={};for(let t of this.choices)this.value[t.name]=t.scaleIdx;return this.base.submit.call(this)}},Yo}function wa(){return ia||(ia=1,function(t){const e=_n,i=(i,s)=>{e.defineExport(t,i,s),e.defineExport(t,i.toLowerCase(),s)};i("AutoComplete",(()=>function(){if(oo)return no;oo=1;const t=aa();return no=class extends t{constructor(t){super(t),this.cursorShow()}moveCursor(t){this.state.cursor+=t}dispatch(t){return this.append(t)}space(t){return this.options.multiple?super.space(t):this.append(t)}append(t){let{cursor:e,input:i}=this.state;return this.input=i.slice(0,e)+t+i.slice(e),this.moveCursor(1),this.complete()}delete(){let{cursor:t,input:e}=this.state;return e?(this.input=e.slice(0,t-1)+e.slice(t),this.moveCursor(-1),this.complete()):this.alert()}deleteForward(){let{cursor:t,input:e}=this.state;return void 0===e[t]?this.alert():(this.input=`${e}`.slice(0,t)+`${e}`.slice(t+1),this.complete())}number(t){return this.append(t)}async complete(){this.completing=!0,this.choices=await this.suggest(this.input,this.state._choices),this.state.limit=void 0,this.index=Math.min(Math.max(this.visible.length-1,0),this.index),await this.render(),this.completing=!1}suggest(t=this.input,e=this.state._choices){if("function"==typeof this.options.suggest)return this.options.suggest.call(this,t,e);let i=t.toLowerCase();return e.filter((t=>t.message.toLowerCase().includes(i)))}pointer(){return""}format(){if(!this.focused)return this.input;if(this.options.multiple&&this.state.submitted)return this.selected.map((t=>this.styles.primary(t.message))).join(", ");if(this.state.submitted){let t=this.value=this.input=this.focused.value;return this.styles.primary(t)}return this.input}async render(){if("pending"!==this.state.status)return super.render();let t=this.options.highlight?this.options.highlight.bind(this):this.styles.placeholder,e=((t,e)=>{let i=t.toLowerCase();return t=>{let s=t.toLowerCase().indexOf(i),r=e(t.slice(s,s+i.length));return s>=0?t.slice(0,s)+r+t.slice(s+i.length):t}})(this.input,t),i=this.choices;this.choices=i.map((t=>({...t,message:e(t.message)}))),await super.render(),this.choices=i}submit(){return this.options.multiple&&(this.value=this.selected.map((t=>t.name))),super.submit()}},no}())),i("BasicAuth",(()=>function(){if(mo)return fo;mo=1;const t=ca();function e(t,e){return t.username===this.options.username&&t.password===this.options.password}const i=(s=e)=>{const r=[{name:"username",message:"username"},{name:"password",message:"password",format(t){return this.options.showPassword?t:(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(t.length))}}];class n extends(t.create(s)){constructor(t){super({...t,choices:r})}static create(t){return i(t)}}return n};return fo=i()}())),i("Confirm",(()=>function(){if(bo)return wo;bo=1;const t=ua();return wo=class extends t{constructor(t){super(t),this.default=this.options.default||(this.initial?"(Y/n)":"(y/N)")}}}())),i("Editable",(()=>function(){if(xo)return vo;xo=1;const t=aa(),e=la().prototype;return vo=class extends t{constructor(t){super({...t,multiple:!0}),this.align=[this.options.align,"left"].find((t=>null!=t)),this.emptyError="",this.values={}}dispatch(t,i){let s=this.focused,r=s.parent||{};return s.editable||r.editable||"a"!==t&&"i"!==t?e.dispatch.call(this,t,i):super[t]()}append(t,i){return e.append.call(this,t,i)}delete(t,i){return e.delete.call(this,t,i)}space(t){return this.focused.editable?this.append(t):super.space()}number(t){return this.focused.editable?this.append(t):super.number(t)}next(){return this.focused.editable?e.next.call(this):super.next()}prev(){return this.focused.editable?e.prev.call(this):super.prev()}async indicator(t,e){let i=t.indicator||"",s=t.editable?i:super.indicator(t,e);return await this.resolve(s,this.state,t,e)||""}indent(t){return"heading"===t.role?"":t.editable?" ":"  "}async renderChoice(t,i){return t.indent="",t.editable?e.renderChoice.call(this,t,i):super.renderChoice(t,i)}error(){return""}footer(){return this.state.error}async validate(){let t=!0;for(let e of this.choices){if("function"!=typeof e.validate)continue;if("heading"===e.role)continue;let i=e.parent?this.value[e.parent.name]:this.value;if(e.editable?i=e.value===e.name?e.initial||"":e.value:this.isDisabled(e)||(i=!0===e.enabled),t=await e.validate(i,this.state),!0!==t)break}return!0!==t&&(this.state.error="string"==typeof t?t:"Invalid Input"),t}submit(){if(!0===this.focused.newChoice)return super.submit();if(this.choices.some((t=>t.newChoice)))return this.alert();this.value={};for(let t of this.choices){let e=t.parent?this.value[t.parent.name]:this.value;"heading"!==t.role?t.editable?e[t.name]=t.value===t.name?t.initial||"":t.value:this.isDisabled(t)||(e[t.name]=!0===t.enabled):this.value[t.name]={}}return this.base.submit.call(this)}}}())),i("Form",(()=>la())),i("Input",(()=>fa())),i("Invisible",(()=>function(){if(To)return Ao;To=1;const t=pa();return Ao=class extends t{format(){return""}}}())),i("List",(()=>function(){if(Ro)return Mo;Ro=1;const t=pa();return Mo=class extends t{constructor(t={}){super(t),this.sep=this.options.separator||/, */,this.initial=t.initial||""}split(t=this.value){return t?String(t).split(this.sep):[]}format(){let t=this.state.submitted?this.styles.primary:t=>t;return this.list.map(t).join(", ")}async submit(t){let e=this.state.error||await this.validate(this.list,this.state);return!0!==e?(this.state.error=e,super.submit()):(this.value=this.list,super.submit())}get list(){return this.split()}},Mo}())),i("MultiSelect",(()=>function(){if(Po)return $o;Po=1;const t=aa();return $o=class extends t{constructor(t){super({...t,multiple:!0})}}}())),i("Numeral",(()=>jo?No:(jo=1,No=ma()))),i("Password",(()=>function(){if(Bo)return Do;Bo=1;const t=pa();return Do=class extends t{constructor(t){super(t),this.cursorShow()}format(t=this.input){return this.keypressed?(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(t.length)):""}},Do}())),i("Scale",(()=>function(){if(zo)return Io;zo=1;const t=Tn,e=oa(),i=_n;return Io=class extends e{constructor(t={}){super(t),this.widths=[].concat(t.messageWidth||50),this.align=[].concat(t.align||"left"),this.linebreak=t.linebreak||!1,this.edgeLength=t.edgeLength||3,this.newline=t.newline||"\n   ";let e=t.startNumber||1;"number"==typeof this.scale&&(this.scaleKey=!1,this.scale=Array(this.scale).fill(0).map(((t,i)=>({name:i+e}))))}async reset(){return this.tableized=!1,await super.reset(),this.render()}tableize(){if(!0===this.tableized)return;this.tableized=!0;let t=0;for(let e of this.choices){t=Math.max(t,e.message.length),e.scaleIndex=e.initial||2,e.scale=[];for(let t=0;t<this.scale.length;t++)e.scale.push({index:t})}this.widths[0]=Math.min(this.widths[0],t+3)}async dispatch(t,e){if(this.multiple)return this[e.name]?await this[e.name](t,e):await super.dispatch(t,e);this.alert()}heading(t,e,i){return this.styles.strong(t)}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;return t.scaleIndex>=this.scale.length-1?this.alert():(t.scaleIndex++,this.render())}left(){let t=this.focused;return t.scaleIndex<=0?this.alert():(t.scaleIndex--,this.render())}indent(){return""}format(){return this.state.submitted?this.choices.map((t=>this.styles.info(t.index))).join(", "):""}pointer(){return""}renderScaleKey(){return!1===this.scaleKey||this.state.submitted?"":["",...this.scale.map((t=>`   ${t.name} - ${t.message}`))].map((t=>this.styles.muted(t))).join("\n")}renderScaleHeading(t){let e=this.scale.map((t=>t.name));"function"==typeof this.options.renderScaleHeading&&(e=this.options.renderScaleHeading.call(this,t));let i=this.scaleLength-e.join("").length,s=Math.round(i/(e.length-1)),r=e.map((t=>this.styles.strong(t))).join(" ".repeat(s)),n=" ".repeat(this.widths[0]);return this.margin[3]+n+this.margin[1]+r}scaleIndicator(t,e,i){if("function"==typeof this.options.scaleIndicator)return this.options.scaleIndicator.call(this,t,e,i);let s=t.scaleIndex===e.index;return e.disabled?this.styles.hint(this.symbols.radio.disabled):s?this.styles.success(this.symbols.radio.on):this.symbols.radio.off}renderScale(t,e){let i=t.scale.map((i=>this.scaleIndicator(t,i,e))),s="Hyper"===this.term?"":" ";return i.join(s+this.symbols.line.repeat(this.edgeLength))}async renderChoice(e,s){await this.onChoice(e,s);let r=this.index===s,n=await this.pointer(e,s),o=await e.hint;o&&!i.hasColor(o)&&(o=this.styles.muted(o));let a=t=>this.margin[3]+t.replace(/\s+$/,"").padEnd(this.widths[0]," "),h=this.newline,l=this.indent(e),c=await this.resolve(e.message,this.state,e,s),u=await this.renderScale(e,s),p=this.margin[1]+this.margin[3];this.scaleLength=t.unstyle(u).length,this.widths[0]=Math.min(this.widths[0],this.width-this.scaleLength-p.length);let d=i.wordWrap(c,{width:this.widths[0],newline:h}).split("\n").map((t=>a(t)+this.margin[1]));return r&&(u=this.styles.info(u),d=d.map((t=>this.styles.info(t)))),d[0]+=u,this.linebreak&&d.push(""),[l+n,d.join("\n")].filter(Boolean)}async renderChoices(){if(this.state.submitted)return"";this.tableize();let t=this.visible.map((async(t,e)=>await this.renderChoice(t,e))),e=await Promise.all(t),i=await this.renderScaleHeading();return this.margin[0]+[i,...e.map((t=>t.join(" ")))].join("\n")}async render(){let{submitted:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=await this.message(),n="";!1!==this.options.promptLine&&(n=[i,r,s,""].join(" "),this.state.prompt=n);let o=await this.header(),a=await this.format(),h=await this.renderScaleKey(),l=await this.error()||await this.hint(),c=await this.renderChoices(),u=await this.footer(),p=this.emptyError;a&&(n+=a),l&&!n.includes(l)&&(n+=" "+l),t&&!a&&!c.trim()&&this.multiple&&null!=p&&(n+=this.styles.danger(p)),this.clear(e),this.write([o,n,h,c,u].filter(Boolean).join("\n")),this.state.submitted||this.write(this.margin[2]),this.restore()}submit(){this.value={};for(let t of this.choices)this.value[t.name]=t.scaleIndex;return this.base.submit.call(this)}},Io}())),i("Select",(()=>aa())),i("Snippet",(()=>function(){if(Uo)return Vo;Uo=1;const t=Tn,e=ga(),i=Qn();return Vo=class extends i{constructor(t){super(t),this.cursorHide(),this.reset(!0)}async initialize(){this.interpolate=await e(this),await super.initialize()}async reset(t){this.state.keys=[],this.state.invalid=new Map,this.state.missing=new Set,this.state.completed=0,this.state.values={},!0!==t&&(await this.initialize(),await this.render())}moveCursor(t){let e=this.getItem();this.cursor+=t,e.cursor+=t}dispatch(t,e){e.code||e.ctrl||null==t||!this.getItem()?this.alert():this.append(t,e)}append(t,e){let i=this.getItem(),s=i.input.slice(0,this.cursor),r=i.input.slice(this.cursor);this.input=i.input=`${s}${t}${r}`,this.moveCursor(1),this.render()}delete(){let t=this.getItem();if(this.cursor<=0||!t.input)return this.alert();let e=t.input.slice(this.cursor),i=t.input.slice(0,this.cursor-1);this.input=t.input=`${i}${e}`,this.moveCursor(-1),this.render()}increment(t){return t>=this.state.keys.length-1?0:t+1}decrement(t){return t<=0?this.state.keys.length-1:t-1}first(){this.state.index=0,this.render()}last(){this.state.index=this.state.keys.length-1,this.render()}right(){if(this.cursor>=this.input.length)return this.alert();this.moveCursor(1),this.render()}left(){if(this.cursor<=0)return this.alert();this.moveCursor(-1),this.render()}prev(){this.state.index=this.decrement(this.state.index),this.getItem(),this.render()}next(){this.state.index=this.increment(this.state.index),this.getItem(),this.render()}up(){this.prev()}down(){this.next()}format(t){let e=this.state.completed<100?this.styles.warning:this.styles.success;return!0===this.state.submitted&&100!==this.state.completed&&(e=this.styles.danger),e(`${this.state.completed}% completed`)}async render(){let{index:t,keys:e=[],submitted:i,size:s}=this.state,r=[this.options.newline,"\n"].find((t=>null!=t)),n=await this.prefix(),o=await this.separator(),a=[n,await this.message(),o].filter(Boolean).join(" ");this.state.prompt=a;let h=await this.header(),l=await this.error()||"",c=await this.hint()||"",u=i?"":await this.interpolate(this.state),p=this.state.key=e[t]||"",d=await this.format(p),f=await this.footer();d&&(a+=" "+d),c&&!d&&0===this.state.completed&&(a+=" "+c),this.clear(s);let m=[h,a,u,f,l.trim()];this.write(m.filter(Boolean).join(r)),this.restore()}getItem(t){let{items:e,keys:i,index:s}=this.state,r=e.find((t=>t.name===i[s]));return r&&null!=r.input&&(this.input=r.input,this.cursor=r.cursor),r}async submit(){"function"!=typeof this.interpolate&&await this.initialize(),await this.interpolate(this.state,!0);let{invalid:e,missing:i,output:s,values:r}=this.state;if(e.size){let t="";for(let[i,s]of e)t+=`Invalid ${i}: ${s}\n`;return this.state.error=t,super.submit()}if(i.size)return this.state.error="Required: "+[...i.keys()].join(", "),super.submit();let n=t.unstyle(s).split("\n").map((t=>t.slice(1))).join("\n");return this.value={values:r,result:n},super.submit()}},Vo}())),i("Sort",(()=>function(){if(qo)return Go;qo=1;const t="(Use <shift>+<up/down> to sort)",e=aa();return Go=class extends e{constructor(e){super({...e,reorder:!1,sort:!0,multiple:!0}),this.state.hint=[this.options.hint,t].find(this.isValue.bind(this))}indicator(){return""}async renderChoice(t,e){let i=await super.renderChoice(t,e),s=this.symbols.identicalTo+" ",r=this.index===e&&this.sorting?this.styles.muted(s):"  ";return!1===this.options.drag&&(r=""),!0===this.options.numbered?r+`${e+1} - `+i:r+i}get selected(){return this.choices}submit(){return this.value=this.choices.map((t=>t.value)),super.submit()}}}())),i("Survey",(()=>ya())),i("Text",(()=>Zo?Ko:(Zo=1,Ko=fa()))),i("Toggle",(()=>function(){if(Xo)return Qo;Xo=1;const t=ua();return Qo=class extends t{async initialize(){await super.initialize(),this.value=this.initial=!!this.options.initial,this.disabled=this.options.disabled||"no",this.enabled=this.options.enabled||"yes",await this.render()}reset(){this.value=this.initial,this.render()}delete(){this.alert()}toggle(){this.value=!this.value,this.render()}enable(){if(!0===this.value)return this.alert();this.value=!0,this.render()}disable(){if(!1===this.value)return this.alert();this.value=!1,this.render()}up(){this.toggle()}down(){this.toggle()}right(){this.toggle()}left(){this.toggle()}next(){this.toggle()}prev(){this.toggle()}dispatch(t="",e){switch(t.toLowerCase()){case" ":return this.toggle();case"1":case"y":case"t":return this.enable();case"0":case"n":case"f":return this.disable();default:return this.alert()}}format(){let t=t=>this.styles.primary.underline(t);return[this.value?this.disabled:t(this.disabled),this.value?t(this.enabled):this.enabled].join(this.styles.muted(" / "))}async render(){let{size:t}=this.state,e=await this.header(),i=await this.prefix(),s=await this.separator(),r=await this.message(),n=await this.format(),o=await this.error()||await this.hint(),a=await this.footer(),h=[i,r,s,n].join(" ");this.state.prompt=h,o&&!h.includes(o)&&(h+=" "+o),this.clear(t),this.write([e,h,a].filter(Boolean).join("\n")),this.write(this.margin[2]),this.restore()}},Qo}())),i("Quiz",(()=>function(){if(ea)return ta;ea=1;const t=aa();return ta=class extends t{constructor(t){if(super(t),"number"!=typeof this.options.correctChoice||this.options.correctChoice<0)throw new Error("Please specify the index of the correct answer from the list of choices")}async toChoices(t,e){let i=await super.toChoices(t,e);if(i.length<2)throw new Error("Please give at least two choices to the user");if(this.options.correctChoice>i.length)throw new Error("Please specify the index of the correct answer from the list of choices");return i}check(t){return t.index===this.options.correctChoice}async result(t){return{selectedAnswer:t,correctAnswer:this.options.choices[this.options.correctChoice].value,correct:await this.check(this.state)}}},ta}()))}(na)),na}const ba=p,va=s,xa=_n;class Sa extends va{constructor(t,e){super(),this.options=xa.merge({},t),this.answers={...e}}register(t,e){if(xa.isObject(t)){for(let e of Object.keys(t))this.register(e,t[e]);return this}ba.equal(typeof e,"function","expected a function");let i=t.toLowerCase();return e.prototype instanceof this.Prompt?this.prompts[i]=e:this.prompts[i]=e(this.Prompt,this),this}async prompt(t=[]){for(let e of[].concat(t))try{"function"==typeof e&&(e=await e.call(this)),await this.ask(xa.merge({},this.options,e))}catch(t){return Promise.reject(t)}return this.answers}async ask(t){"function"==typeof t&&(t=await t.call(this));let e=xa.merge({},this.options,t),{type:i,name:s}=t,{set:r,get:n}=xa;if("function"==typeof i&&(i=await i.call(this,t,this.answers)),!i)return this.answers[s];ba(this.prompts[i],`Prompt "${i}" is not registered`);let o=new this.prompts[i](e),a=n(this.answers,s);o.state.answers=this.answers,o.enquirer=this,s&&o.on("submit",(t=>{this.emit("answer",s,t,o),r(this.answers,s,t)}));let h=o.emit.bind(o);return o.emit=(...t)=>(this.emit.call(this,...t),h(...t)),this.emit("prompt",o,this),e.autofill&&null!=a?(o.value=o.input=a,"show"===e.autofill&&await o.submit()):a=o.value=await o.run(),a}use(t){return t.call(this,this),this}set Prompt(t){this._Prompt=t}get Prompt(){return this._Prompt||this.constructor.Prompt}get prompts(){return this.constructor.prompts}static set Prompt(t){this._Prompt=t}static get Prompt(){return this._Prompt||Qn()}static get prompts(){return wa()}static get types(){return ra?sa:(ra=1,sa={ArrayPrompt:oa(),AuthPrompt:ca(),BooleanPrompt:ua(),NumberPrompt:ma(),StringPrompt:pa()})}static get prompt(){const t=(e,...i)=>{let s=new this(...i),r=s.emit.bind(s);return s.emit=(...e)=>(t.emit(...e),r(...e)),s.prompt(e)};return xa.mixinEmitter(t,new va),t}}xa.mixinEmitter(Sa,new va);const ka=Sa.prompts;for(let t of Object.keys(ka)){let e=t.toLowerCase(),i=e=>new ka[t](e).run();Sa.prompt[e]=i,Sa[e]=i,Sa[t]||Reflect.defineProperty(Sa,t,{get:()=>ka[t]})}const _a=t=>{xa.defineExport(Sa,t,(()=>Sa.types[t]))};_a("ArrayPrompt"),_a("AuthPrompt"),_a("BooleanPrompt"),_a("NumberPrompt"),_a("StringPrompt");var Oa=Sa;let Ca="npm";try{t.execSync("yarn --version",{stdio:"ignore"}),Ca="yarn"}catch(t){Ca="npm"}var Ea={error:function(...t){console.log(`${kn.redBright("x")}${kn.redBright(" -- ")}${kn.redBright(t)}${kn.redBright(" -- ")}`)},warn:function(...t){console.log(`${kn.yellowBright("!")}${kn.yellowBright(" -- ")}${kn.yellowBright(t)}${kn.yellowBright(" -- ")}`)},info:function(...t){console.log(`${kn.blueBright("$")}${kn.blueBright(" -- ")}${kn.blueBright(t)}${kn.blueBright(" -- ")}`)},success:function(...t){console.log(`${kn.greenBright("√")}${kn.greenBright(" -- ")}${kn.greenBright(t)}${kn.greenBright(" -- ")}`)},log:function(...t){console.log(kn.blueBright(t))}};const Aa=i.resolve(__dirname,"..","package.json"),Ta=JSON.parse(e.readFileSync(Aa,"utf-8"));q.name(Ta.name).version(Ta.version).description(Ta.description),q.command("create <project-name>").action((async s=>{Ea.info(`开始创建项目${s}`);try{const r=await async function(t){const e=await Oa.prompt([{type:"input",name:"name",message:kn.cyanBright("项目名称:"),initial:()=>t,validate:t=>!!/^(?:@[a-z0-9-*~][a-z0-9-*._~]*)?[a-z0-9-~][a-z0-9-._~]*$/.test(t)||"项目名称不符合规范: ^(?:@[a-z0-9-*~][a-z0-9-*._~]*)?[a-z0-9-~][a-z0-9-._~]*$"},{type:"input",name:"description",message:kn.cyanBright("项目描述:"),validate:t=>!!/^.{0,100}$/.test(t)||"项目描述不得超过100个字符"},{type:"input",name:"author",message:kn.cyanBright("作者:"),validate:t=>!!/^.{0,50}$/.test(t)||"作者不得超过50个字符"}]);return e}(s),{name:n,description:o,author:a}=r,h=i.resolve(s);e.existsSync(h)&&await async function(t,e){const{action:i}=await Oa.prompt([{type:"toggle",name:"action",message:kn.yellowBright(`删除已有目录 <${t}>?`),initial:!0,stdin:process.stdin}]);return i?(Ea.info(`删除目录'${t}'`),await Tr(e),Promise.resolve()):Promise.reject("已取消创建")}(s,h),Ea.info("克隆远程仓库"),t.execSync(`git clone ${Dr} ${h}`,{stdio:"inherit"});const l=i.resolve(h,".git");await Tr(l);const c=i.resolve(h,"package.json"),u=e.readFileSync(c,"utf8"),p=JSON.parse(u);p.name=n,p.author=a,p.description=o,e.writeFileSync(c,JSON.stringify(p,null,"\t")+"\n",{flag:"w+"}),Ea.success("项目创建成功!");let d=!1;try{d=await async function(e){const{action:i}=await Oa.prompt([{type:"toggle",name:"action",message:kn.cyanBright("安装项目依赖?"),initial:!0,stdin:process.stdin}]);if(i){process.chdir(e);try{return t.execSync(`${Ca} install`,{stdio:"inherit"}),Ea.success("依赖安装成功!"),i}catch(t){return Promise.reject(t)}}return!1}(h)}catch(t){t&&Ea.error(`项目创建失败: ${t}`)}!function(t,e){Ea.log("\r\n"),Ea.info(`cd ${t}`),!e&&Ea.info(`${Ca} install`),Ea.info(`${Ca} ${Br}`),Ea.log("\r\n")}(s,d)}catch(t){t&&Ea.error(`项目创建失败: ${t}`)}process.exit(1)})),q.parse(process.argv);
