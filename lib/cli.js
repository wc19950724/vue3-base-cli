"use strict";var t=require("node:fs"),e=require("node:path"),i=require("events"),s=require("child_process"),r=require("path"),n=require("fs"),o=require("process"),a=require("util"),h=require("url"),l=require("fs/promises"),c=require("stream"),u=require("string_decoder"),p=require("os"),d=require("assert"),f=require("readline"),m=require("node:buffer"),g=require("node:child_process"),y=require("node:process"),w=require("node:url"),b=require("node:os"),v=require("buffer"),x=require("node:util"),S=require("node:tty");function O(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}var E=O(n),_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function C(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var k={exports:{}},A={},T={};let P=class extends Error{constructor(t,e,i){super(i),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=e,this.exitCode=t,this.nestedError=void 0}};T.CommanderError=P,T.InvalidArgumentError=class extends P{constructor(t){super(1,"commander.invalidArgument",t),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};const{InvalidArgumentError:R}=T;A.Argument=class{constructor(t,e){switch(this.description=e||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,t[0]){case"<":this.required=!0,this._name=t.slice(1,-1);break;case"[":this.required=!1,this._name=t.slice(1,-1);break;default:this.required=!0,this._name=t}this._name.length>3&&"..."===this._name.slice(-3)&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(t,e){return e!==this.defaultValue&&Array.isArray(e)?e.concat(t):[t]}default(t,e){return this.defaultValue=t,this.defaultValueDescription=e,this}argParser(t){return this.parseArg=t,this}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,e)=>{if(!this.argChoices.includes(t))throw new R(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,e):t},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}},A.humanReadableArgName=function(t){const e=t.name()+(!0===t.variadic?"...":"");return t.required?"<"+e+">":"["+e+"]"};var L={},$={};const{humanReadableArgName:N}=A;$.Help=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(t){const e=t.commands.filter((t=>!t._hidden));if(t._hasImplicitHelpCommand()){const[,i,s]=t._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),r=t.createCommand(i).helpOption(!1);r.description(t._helpCommandDescription),s&&r.arguments(s),e.push(r)}return this.sortSubcommands&&e.sort(((t,e)=>t.name().localeCompare(e.name()))),e}compareOptions(t,e){const i=t=>t.short?t.short.replace(/^-/,""):t.long.replace(/^--/,"");return i(t).localeCompare(i(e))}visibleOptions(t){const e=t.options.filter((t=>!t.hidden)),i=t._hasHelpOption&&t._helpShortFlag&&!t._findOption(t._helpShortFlag),s=t._hasHelpOption&&!t._findOption(t._helpLongFlag);if(i||s){let r;r=i?s?t.createOption(t._helpFlags,t._helpDescription):t.createOption(t._helpShortFlag,t._helpDescription):t.createOption(t._helpLongFlag,t._helpDescription),e.push(r)}return this.sortOptions&&e.sort(this.compareOptions),e}visibleGlobalOptions(t){if(!this.showGlobalOptions)return[];const e=[];for(let i=t.parent;i;i=i.parent){const t=i.options.filter((t=>!t.hidden));e.push(...t)}return this.sortOptions&&e.sort(this.compareOptions),e}visibleArguments(t){return t._argsDescription&&t._args.forEach((e=>{e.description=e.description||t._argsDescription[e.name()]||""})),t._args.find((t=>t.description))?t._args:[]}subcommandTerm(t){const e=t._args.map((t=>N(t))).join(" ");return t._name+(t._aliases[0]?"|"+t._aliases[0]:"")+(t.options.length?" [options]":"")+(e?" "+e:"")}optionTerm(t){return t.flags}argumentTerm(t){return t.name()}longestSubcommandTermLength(t,e){return e.visibleCommands(t).reduce(((t,i)=>Math.max(t,e.subcommandTerm(i).length)),0)}longestOptionTermLength(t,e){return e.visibleOptions(t).reduce(((t,i)=>Math.max(t,e.optionTerm(i).length)),0)}longestGlobalOptionTermLength(t,e){return e.visibleGlobalOptions(t).reduce(((t,i)=>Math.max(t,e.optionTerm(i).length)),0)}longestArgumentTermLength(t,e){return e.visibleArguments(t).reduce(((t,i)=>Math.max(t,e.argumentTerm(i).length)),0)}commandUsage(t){let e=t._name;t._aliases[0]&&(e=e+"|"+t._aliases[0]);let i="";for(let e=t.parent;e;e=e.parent)i=e.name()+" "+i;return i+e+" "+t.usage()}commandDescription(t){return t.description()}subcommandDescription(t){return t.summary()||t.description()}optionDescription(t){const e=[];if(t.argChoices&&e.push(`choices: ${t.argChoices.map((t=>JSON.stringify(t))).join(", ")}`),void 0!==t.defaultValue){(t.required||t.optional||t.isBoolean()&&"boolean"==typeof t.defaultValue)&&e.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`)}return void 0!==t.presetArg&&t.optional&&e.push(`preset: ${JSON.stringify(t.presetArg)}`),void 0!==t.envVar&&e.push(`env: ${t.envVar}`),e.length>0?`${t.description} (${e.join(", ")})`:t.description}argumentDescription(t){const e=[];if(t.argChoices&&e.push(`choices: ${t.argChoices.map((t=>JSON.stringify(t))).join(", ")}`),void 0!==t.defaultValue&&e.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),e.length>0){const i=`(${e.join(", ")})`;return t.description?`${t.description} ${i}`:i}return t.description}formatHelp(t,e){const i=e.padWidth(t,e),s=e.helpWidth||80;function r(t,r){if(r){const n=`${t.padEnd(i+2)}${r}`;return e.wrap(n,s-2,i+2)}return t}function n(t){return t.join("\n").replace(/^/gm," ".repeat(2))}let o=[`Usage: ${e.commandUsage(t)}`,""];const a=e.commandDescription(t);a.length>0&&(o=o.concat([e.wrap(a,s,0),""]));const h=e.visibleArguments(t).map((t=>r(e.argumentTerm(t),e.argumentDescription(t))));h.length>0&&(o=o.concat(["Arguments:",n(h),""]));const l=e.visibleOptions(t).map((t=>r(e.optionTerm(t),e.optionDescription(t))));if(l.length>0&&(o=o.concat(["Options:",n(l),""])),this.showGlobalOptions){const i=e.visibleGlobalOptions(t).map((t=>r(e.optionTerm(t),e.optionDescription(t))));i.length>0&&(o=o.concat(["Global Options:",n(i),""]))}const c=e.visibleCommands(t).map((t=>r(e.subcommandTerm(t),e.subcommandDescription(t))));return c.length>0&&(o=o.concat(["Commands:",n(c),""])),o.join("\n")}padWidth(t,e){return Math.max(e.longestOptionTermLength(t,e),e.longestGlobalOptionTermLength(t,e),e.longestSubcommandTermLength(t,e),e.longestArgumentTermLength(t,e))}wrap(t,e,i,s=40){const r=new RegExp("[\\n][ \\f\\t\\v   -   　\ufeff]+");if(t.match(r))return t;const n=e-i;if(n<s)return t;const o=t.slice(0,i),a=t.slice(i).replace("\r\n","\n"),h=" ".repeat(i),l="\\s​",c=new RegExp(`\n|.{1,${n-1}}([${l}]|$)|[^${l}]+?([${l}]|$)`,"g");return o+(a.match(c)||[]).map(((t,e)=>"\n"===t?"":(e>0?h:"")+t.trimEnd())).join("\n")}};var I={};const{InvalidArgumentError:j}=T;function F(t){let e,i;const s=t.split(/[ |,]+/);return s.length>1&&!/^[[<]/.test(s[1])&&(e=s.shift()),i=s.shift(),!e&&/^-[^-]$/.test(i)&&(e=i,i=void 0),{shortFlag:e,longFlag:i}}I.Option=class{constructor(t,e){this.flags=t,this.description=e||"",this.required=t.includes("<"),this.optional=t.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(t),this.mandatory=!1;const i=F(t);this.short=i.shortFlag,this.long=i.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(t,e){return this.defaultValue=t,this.defaultValueDescription=e,this}preset(t){return this.presetArg=t,this}conflicts(t){return this.conflictsWith=this.conflictsWith.concat(t),this}implies(t){let e=t;return"string"==typeof t&&(e={[t]:!0}),this.implied=Object.assign(this.implied||{},e),this}env(t){return this.envVar=t,this}argParser(t){return this.parseArg=t,this}makeOptionMandatory(t=!0){return this.mandatory=!!t,this}hideHelp(t=!0){return this.hidden=!!t,this}_concatValue(t,e){return e!==this.defaultValue&&Array.isArray(e)?e.concat(t):[t]}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,e)=>{if(!this.argChoices.includes(t))throw new j(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,e):t},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.name().replace(/^no-/,"").split("-").reduce(((t,e)=>t+e[0].toUpperCase()+e.slice(1)))}is(t){return this.short===t||this.long===t}isBoolean(){return!this.required&&!this.optional&&!this.negate}},I.splitOptionFlags=F,I.DualOptions=class{constructor(t){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,t.forEach((t=>{t.negate?this.negativeOptions.set(t.attributeName(),t):this.positiveOptions.set(t.attributeName(),t)})),this.negativeOptions.forEach(((t,e)=>{this.positiveOptions.has(e)&&this.dualOptions.add(e)}))}valueFromOption(t,e){const i=e.attributeName();if(!this.dualOptions.has(i))return!0;const s=this.negativeOptions.get(i).presetArg,r=void 0!==s&&s;return e.negate===(r===t)}};var M={};const D=3;M.suggestSimilar=function(t,e){if(!e||0===e.length)return"";e=Array.from(new Set(e));const i=t.startsWith("--");i&&(t=t.slice(2),e=e.map((t=>t.slice(2))));let s=[],r=D;return e.forEach((e=>{if(e.length<=1)return;const i=function(t,e){if(Math.abs(t.length-e.length)>D)return Math.max(t.length,e.length);const i=[];for(let e=0;e<=t.length;e++)i[e]=[e];for(let t=0;t<=e.length;t++)i[0][t]=t;for(let s=1;s<=e.length;s++)for(let r=1;r<=t.length;r++){let n=1;n=t[r-1]===e[s-1]?0:1,i[r][s]=Math.min(i[r-1][s]+1,i[r][s-1]+1,i[r-1][s-1]+n),r>1&&s>1&&t[r-1]===e[s-2]&&t[r-2]===e[s-1]&&(i[r][s]=Math.min(i[r][s],i[r-2][s-2]+1))}return i[t.length][e.length]}(t,e),n=Math.max(t.length,e.length);(n-i)/n>.4&&(i<r?(r=i,s=[e]):i===r&&s.push(e))})),s.sort(((t,e)=>t.localeCompare(e))),i&&(s=s.map((t=>`--${t}`))),s.length>1?`\n(Did you mean one of ${s.join(", ")}?)`:1===s.length?`\n(Did you mean ${s[0]}?)`:""};const B=i.EventEmitter,z=s,G=r,W=n,H=o,{Argument:V,humanReadableArgName:U}=A,{CommanderError:q}=T,{Help:Y}=$,{Option:K,splitOptionFlags:Z,DualOptions:J}=I,{suggestSimilar:X}=M;function Q(t,e){t._hasHelpOption&&e.find((e=>e===t._helpLongFlag||e===t._helpShortFlag))&&(t.outputHelp(),t._exit(0,"commander.helpDisplayed","(outputHelp)"))}function tt(t){return t.map((t=>{if(!t.startsWith("--inspect"))return t;let e,i,s="127.0.0.1",r="9229";return null!==(i=t.match(/^(--inspect(-brk)?)$/))?e=i[1]:null!==(i=t.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(e=i[1],/^\d+$/.test(i[3])?r=i[3]:s=i[3]):null!==(i=t.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(e=i[1],s=i[3],r=i[4]),e&&"0"!==r?`${e}=${s}:${parseInt(r)+1}`:t}))}function et(t){const e=[];for(let i=t;i;i=i.parent)e.push(i);return e}L.Command=class t extends B{constructor(t){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this._args=[],this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=t||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:t=>H.stdout.write(t),writeErr:t=>H.stderr.write(t),getOutHelpWidth:()=>H.stdout.isTTY?H.stdout.columns:void 0,getErrHelpWidth:()=>H.stderr.isTTY?H.stderr.columns:void 0,outputError:(t,e)=>e(t)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(t){return this._outputConfiguration=t._outputConfiguration,this._hasHelpOption=t._hasHelpOption,this._helpFlags=t._helpFlags,this._helpDescription=t._helpDescription,this._helpShortFlag=t._helpShortFlag,this._helpLongFlag=t._helpLongFlag,this._helpCommandName=t._helpCommandName,this._helpCommandnameAndArgs=t._helpCommandnameAndArgs,this._helpCommandDescription=t._helpCommandDescription,this._helpConfiguration=t._helpConfiguration,this._exitCallback=t._exitCallback,this._storeOptionsAsProperties=t._storeOptionsAsProperties,this._combineFlagAndOptionalValue=t._combineFlagAndOptionalValue,this._allowExcessArguments=t._allowExcessArguments,this._enablePositionalOptions=t._enablePositionalOptions,this._showHelpAfterError=t._showHelpAfterError,this._showSuggestionAfterError=t._showSuggestionAfterError,this}command(t,e,i){let s=e,r=i;"object"==typeof s&&null!==s&&(r=s,s=null),r=r||{};const[,n,o]=t.match(/([^ ]+) *(.*)/),a=this.createCommand(n);return s&&(a.description(s),a._executableHandler=!0),r.isDefault&&(this._defaultCommandName=a._name),a._hidden=!(!r.noHelp&&!r.hidden),a._executableFile=r.executableFile||null,o&&a.arguments(o),this.commands.push(a),a.parent=this,a.copyInheritedSettings(this),s?this:a}createCommand(e){return new t(e)}createHelp(){return Object.assign(new Y,this.configureHelp())}configureHelp(t){return void 0===t?this._helpConfiguration:(this._helpConfiguration=t,this)}configureOutput(t){return void 0===t?this._outputConfiguration:(Object.assign(this._outputConfiguration,t),this)}showHelpAfterError(t=!0){return"string"!=typeof t&&(t=!!t),this._showHelpAfterError=t,this}showSuggestionAfterError(t=!0){return this._showSuggestionAfterError=!!t,this}addCommand(t,e){if(!t._name)throw new Error("Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()");return(e=e||{}).isDefault&&(this._defaultCommandName=t._name),(e.noHelp||e.hidden)&&(t._hidden=!0),this.commands.push(t),t.parent=this,this}createArgument(t,e){return new V(t,e)}argument(t,e,i,s){const r=this.createArgument(t,e);return"function"==typeof i?r.default(s).argParser(i):r.default(i),this.addArgument(r),this}arguments(t){return t.split(/ +/).forEach((t=>{this.argument(t)})),this}addArgument(t){const e=this._args.slice(-1)[0];if(e&&e.variadic)throw new Error(`only the last argument can be variadic '${e.name()}'`);if(t.required&&void 0!==t.defaultValue&&void 0===t.parseArg)throw new Error(`a default value for a required argument is never used: '${t.name()}'`);return this._args.push(t),this}addHelpCommand(t,e){return!1===t?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,"string"==typeof t&&(this._helpCommandName=t.split(" ")[0],this._helpCommandnameAndArgs=t),this._helpCommandDescription=e||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return void 0===this._addImplicitHelpCommand?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}hook(t,e){const i=["preSubcommand","preAction","postAction"];if(!i.includes(t))throw new Error(`Unexpected value for event passed to hook : '${t}'.\nExpecting one of '${i.join("', '")}'`);return this._lifeCycleHooks[t]?this._lifeCycleHooks[t].push(e):this._lifeCycleHooks[t]=[e],this}exitOverride(t){return this._exitCallback=t||(t=>{if("commander.executeSubCommandAsync"!==t.code)throw t}),this}_exit(t,e,i){this._exitCallback&&this._exitCallback(new q(t,e,i)),H.exit(t)}action(t){return this._actionHandler=e=>{const i=this._args.length,s=e.slice(0,i);return this._storeOptionsAsProperties?s[i]=this:s[i]=this.opts(),s.push(this),t.apply(this,s)},this}createOption(t,e){return new K(t,e)}addOption(t){const e=t.name(),i=t.attributeName();if(t.negate){const e=t.long.replace(/^--no-/,"--");this._findOption(e)||this.setOptionValueWithSource(i,void 0===t.defaultValue||t.defaultValue,"default")}else void 0!==t.defaultValue&&this.setOptionValueWithSource(i,t.defaultValue,"default");this.options.push(t);const s=(e,s,r)=>{null==e&&void 0!==t.presetArg&&(e=t.presetArg);const n=this.getOptionValue(i);if(null!==e&&t.parseArg)try{e=t.parseArg(e,n)}catch(t){if("commander.invalidArgument"===t.code){const e=`${s} ${t.message}`;this.error(e,{exitCode:t.exitCode,code:t.code})}throw t}else null!==e&&t.variadic&&(e=t._concatValue(e,n));null==e&&(e=!t.negate&&(!(!t.isBoolean()&&!t.optional)||"")),this.setOptionValueWithSource(i,e,r)};return this.on("option:"+e,(e=>{const i=`error: option '${t.flags}' argument '${e}' is invalid.`;s(e,i,"cli")})),t.envVar&&this.on("optionEnv:"+e,(e=>{const i=`error: option '${t.flags}' value '${e}' from env '${t.envVar}' is invalid.`;s(e,i,"env")})),this}_optionEx(t,e,i,s,r){if("object"==typeof e&&e instanceof K)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");const n=this.createOption(e,i);if(n.makeOptionMandatory(!!t.mandatory),"function"==typeof s)n.default(r).argParser(s);else if(s instanceof RegExp){const t=s;s=(e,i)=>{const s=t.exec(e);return s?s[0]:i},n.default(r).argParser(s)}else n.default(s);return this.addOption(n)}option(t,e,i,s){return this._optionEx({},t,e,i,s)}requiredOption(t,e,i,s){return this._optionEx({mandatory:!0},t,e,i,s)}combineFlagAndOptionalValue(t=!0){return this._combineFlagAndOptionalValue=!!t,this}allowUnknownOption(t=!0){return this._allowUnknownOption=!!t,this}allowExcessArguments(t=!0){return this._allowExcessArguments=!!t,this}enablePositionalOptions(t=!0){return this._enablePositionalOptions=!!t,this}passThroughOptions(t=!0){if(this._passThroughOptions=!!t,this.parent&&t&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(t=!0){if(this._storeOptionsAsProperties=!!t,this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this}getOptionValue(t){return this._storeOptionsAsProperties?this[t]:this._optionValues[t]}setOptionValue(t,e){return this.setOptionValueWithSource(t,e,void 0)}setOptionValueWithSource(t,e,i){return this._storeOptionsAsProperties?this[t]=e:this._optionValues[t]=e,this._optionValueSources[t]=i,this}getOptionValueSource(t){return this._optionValueSources[t]}getOptionValueSourceWithGlobals(t){let e;return et(this).forEach((i=>{void 0!==i.getOptionValueSource(t)&&(e=i.getOptionValueSource(t))})),e}_prepareUserArgs(t,e){if(void 0!==t&&!Array.isArray(t))throw new Error("first parameter to parse must be array or undefined");let i;switch(e=e||{},void 0===t&&(t=H.argv,H.versions&&H.versions.electron&&(e.from="electron")),this.rawArgs=t.slice(),e.from){case void 0:case"node":this._scriptPath=t[1],i=t.slice(2);break;case"electron":H.defaultApp?(this._scriptPath=t[1],i=t.slice(2)):i=t.slice(1);break;case"user":i=t.slice(0);break;default:throw new Error(`unexpected parse option { from: '${e.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",i}parse(t,e){const i=this._prepareUserArgs(t,e);return this._parseCommand([],i),this}async parseAsync(t,e){const i=this._prepareUserArgs(t,e);return await this._parseCommand([],i),this}_executeSubCommand(t,e){e=e.slice();let i=!1;const s=[".js",".ts",".tsx",".mjs",".cjs"];function r(t,e){const i=G.resolve(t,e);if(W.existsSync(i))return i;if(s.includes(G.extname(e)))return;const r=s.find((t=>W.existsSync(`${i}${t}`)));return r?`${i}${r}`:void 0}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let n,o=t._executableFile||`${this._name}-${t._name}`,a=this._executableDir||"";if(this._scriptPath){let t;try{t=W.realpathSync(this._scriptPath)}catch(e){t=this._scriptPath}a=G.resolve(G.dirname(t),a)}if(a){let e=r(a,o);if(!e&&!t._executableFile&&this._scriptPath){const i=G.basename(this._scriptPath,G.extname(this._scriptPath));i!==this._name&&(e=r(a,`${i}-${t._name}`))}o=e||o}if(i=s.includes(G.extname(o)),"win32"!==H.platform?i?(e.unshift(o),e=tt(H.execArgv).concat(e),n=z.spawn(H.argv[0],e,{stdio:"inherit"})):n=z.spawn(o,e,{stdio:"inherit"}):(e.unshift(o),e=tt(H.execArgv).concat(e),n=z.spawn(H.execPath,e,{stdio:"inherit"})),!n.killed){["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((t=>{H.on(t,(()=>{!1===n.killed&&null===n.exitCode&&n.kill(t)}))}))}const h=this._exitCallback;h?n.on("close",(()=>{h(new q(H.exitCode||0,"commander.executeSubCommandAsync","(close)"))})):n.on("close",H.exit.bind(H)),n.on("error",(e=>{if("ENOENT"===e.code){const e=a?`searched for local subcommand relative to directory '${a}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",i=`'${o}' does not exist\n - if '${t._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${e}`;throw new Error(i)}if("EACCES"===e.code)throw new Error(`'${o}' not executable`);if(h){const t=new q(1,"commander.executeSubCommandAsync","(error)");t.nestedError=e,h(t)}else H.exit(1)})),this.runningCommand=n}_dispatchSubcommand(t,e,i){const s=this._findCommand(t);let r;return s||this.help({error:!0}),r=this._chainOrCallSubCommandHook(r,s,"preSubcommand"),r=this._chainOrCall(r,(()=>{if(!s._executableHandler)return s._parseCommand(e,i);this._executeSubCommand(s,e.concat(i))})),r}_checkNumberOfArguments(){this._args.forEach(((t,e)=>{t.required&&null==this.args[e]&&this.missingArgument(t.name())})),this._args.length>0&&this._args[this._args.length-1].variadic||this.args.length>this._args.length&&this._excessArguments(this.args)}_processArguments(){const t=(t,e,i)=>{let s=e;if(null!==e&&t.parseArg)try{s=t.parseArg(e,i)}catch(i){if("commander.invalidArgument"===i.code){const s=`error: command-argument value '${e}' is invalid for argument '${t.name()}'. ${i.message}`;this.error(s,{exitCode:i.exitCode,code:i.code})}throw i}return s};this._checkNumberOfArguments();const e=[];this._args.forEach(((i,s)=>{let r=i.defaultValue;i.variadic?s<this.args.length?(r=this.args.slice(s),i.parseArg&&(r=r.reduce(((e,s)=>t(i,s,e)),i.defaultValue))):void 0===r&&(r=[]):s<this.args.length&&(r=this.args[s],i.parseArg&&(r=t(i,r,i.defaultValue))),e[s]=r})),this.processedArgs=e}_chainOrCall(t,e){return t&&t.then&&"function"==typeof t.then?t.then((()=>e())):e()}_chainOrCallHooks(t,e){let i=t;const s=[];return et(this).reverse().filter((t=>void 0!==t._lifeCycleHooks[e])).forEach((t=>{t._lifeCycleHooks[e].forEach((e=>{s.push({hookedCommand:t,callback:e})}))})),"postAction"===e&&s.reverse(),s.forEach((t=>{i=this._chainOrCall(i,(()=>t.callback(t.hookedCommand,this)))})),i}_chainOrCallSubCommandHook(t,e,i){let s=t;return void 0!==this._lifeCycleHooks[i]&&this._lifeCycleHooks[i].forEach((t=>{s=this._chainOrCall(s,(()=>t(this,e)))})),s}_parseCommand(t,e){const i=this.parseOptions(e);if(this._parseOptionsEnv(),this._parseOptionsImplied(),t=t.concat(i.operands),e=i.unknown,this.args=t.concat(e),t&&this._findCommand(t[0]))return this._dispatchSubcommand(t[0],t.slice(1),e);if(this._hasImplicitHelpCommand()&&t[0]===this._helpCommandName)return 1===t.length&&this.help(),this._dispatchSubcommand(t[1],[],[this._helpLongFlag]);if(this._defaultCommandName)return Q(this,e),this._dispatchSubcommand(this._defaultCommandName,t,e);!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this.help({error:!0}),Q(this,i.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();const s=()=>{i.unknown.length>0&&this.unknownOption(i.unknown[0])},r=`command:${this.name()}`;if(this._actionHandler){let i;return s(),this._processArguments(),i=this._chainOrCallHooks(i,"preAction"),i=this._chainOrCall(i,(()=>this._actionHandler(this.processedArgs))),this.parent&&(i=this._chainOrCall(i,(()=>{this.parent.emit(r,t,e)}))),i=this._chainOrCallHooks(i,"postAction"),i}if(this.parent&&this.parent.listenerCount(r))s(),this._processArguments(),this.parent.emit(r,t,e);else if(t.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",t,e);this.listenerCount("command:*")?this.emit("command:*",t,e):this.commands.length?this.unknownCommand():(s(),this._processArguments())}else this.commands.length?(s(),this.help({error:!0})):(s(),this._processArguments())}_findCommand(t){if(t)return this.commands.find((e=>e._name===t||e._aliases.includes(t)))}_findOption(t){return this.options.find((e=>e.is(t)))}_checkForMissingMandatoryOptions(){for(let t=this;t;t=t.parent)t.options.forEach((e=>{e.mandatory&&void 0===t.getOptionValue(e.attributeName())&&t.missingMandatoryOptionValue(e)}))}_checkForConflictingLocalOptions(){const t=this.options.filter((t=>{const e=t.attributeName();return void 0!==this.getOptionValue(e)&&"default"!==this.getOptionValueSource(e)})),e=t.filter((t=>t.conflictsWith.length>0));e.forEach((e=>{const i=t.find((t=>e.conflictsWith.includes(t.attributeName())));i&&this._conflictingOption(e,i)}))}_checkForConflictingOptions(){for(let t=this;t;t=t.parent)t._checkForConflictingLocalOptions()}parseOptions(t){const e=[],i=[];let s=e;const r=t.slice();function n(t){return t.length>1&&"-"===t[0]}let o=null;for(;r.length;){const t=r.shift();if("--"===t){s===i&&s.push(t),s.push(...r);break}if(!o||n(t)){if(o=null,n(t)){const e=this._findOption(t);if(e){if(e.required){const t=r.shift();void 0===t&&this.optionMissingArgument(e),this.emit(`option:${e.name()}`,t)}else if(e.optional){let t=null;r.length>0&&!n(r[0])&&(t=r.shift()),this.emit(`option:${e.name()}`,t)}else this.emit(`option:${e.name()}`);o=e.variadic?e:null;continue}}if(t.length>2&&"-"===t[0]&&"-"!==t[1]){const e=this._findOption(`-${t[1]}`);if(e){e.required||e.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${e.name()}`,t.slice(2)):(this.emit(`option:${e.name()}`),r.unshift(`-${t.slice(2)}`));continue}}if(/^--[^=]+=/.test(t)){const e=t.indexOf("="),i=this._findOption(t.slice(0,e));if(i&&(i.required||i.optional)){this.emit(`option:${i.name()}`,t.slice(e+1));continue}}if(n(t)&&(s=i),(this._enablePositionalOptions||this._passThroughOptions)&&0===e.length&&0===i.length){if(this._findCommand(t)){e.push(t),r.length>0&&i.push(...r);break}if(t===this._helpCommandName&&this._hasImplicitHelpCommand()){e.push(t),r.length>0&&e.push(...r);break}if(this._defaultCommandName){i.push(t),r.length>0&&i.push(...r);break}}if(this._passThroughOptions){s.push(t),r.length>0&&s.push(...r);break}s.push(t)}else this.emit(`option:${o.name()}`,t)}return{operands:e,unknown:i}}opts(){if(this._storeOptionsAsProperties){const t={},e=this.options.length;for(let i=0;i<e;i++){const e=this.options[i].attributeName();t[e]=e===this._versionOptionName?this._version:this[e]}return t}return this._optionValues}optsWithGlobals(){return et(this).reduce(((t,e)=>Object.assign(t,e.opts())),{})}error(t,e){this._outputConfiguration.outputError(`${t}\n`,this._outputConfiguration.writeErr),"string"==typeof this._showHelpAfterError?this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`):this._showHelpAfterError&&(this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0}));const i=e||{},s=i.exitCode||1,r=i.code||"commander.error";this._exit(s,r,t)}_parseOptionsEnv(){this.options.forEach((t=>{if(t.envVar&&t.envVar in H.env){const e=t.attributeName();(void 0===this.getOptionValue(e)||["default","config","env"].includes(this.getOptionValueSource(e)))&&(t.required||t.optional?this.emit(`optionEnv:${t.name()}`,H.env[t.envVar]):this.emit(`optionEnv:${t.name()}`))}}))}_parseOptionsImplied(){const t=new J(this.options),e=t=>void 0!==this.getOptionValue(t)&&!["default","implied"].includes(this.getOptionValueSource(t));this.options.filter((i=>void 0!==i.implied&&e(i.attributeName())&&t.valueFromOption(this.getOptionValue(i.attributeName()),i))).forEach((t=>{Object.keys(t.implied).filter((t=>!e(t))).forEach((e=>{this.setOptionValueWithSource(e,t.implied[e],"implied")}))}))}missingArgument(t){const e=`error: missing required argument '${t}'`;this.error(e,{code:"commander.missingArgument"})}optionMissingArgument(t){const e=`error: option '${t.flags}' argument missing`;this.error(e,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(t){const e=`error: required option '${t.flags}' not specified`;this.error(e,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(t,e){const i=t=>{const e=t.attributeName(),i=this.getOptionValue(e),s=this.options.find((t=>t.negate&&e===t.attributeName())),r=this.options.find((t=>!t.negate&&e===t.attributeName()));return s&&(void 0===s.presetArg&&!1===i||void 0!==s.presetArg&&i===s.presetArg)?s:r||t},s=t=>{const e=i(t),s=e.attributeName();return"env"===this.getOptionValueSource(s)?`environment variable '${e.envVar}'`:`option '${e.flags}'`},r=`error: ${s(t)} cannot be used with ${s(e)}`;this.error(r,{code:"commander.conflictingOption"})}unknownOption(t){if(this._allowUnknownOption)return;let e="";if(t.startsWith("--")&&this._showSuggestionAfterError){let i=[],s=this;do{const t=s.createHelp().visibleOptions(s).filter((t=>t.long)).map((t=>t.long));i=i.concat(t),s=s.parent}while(s&&!s._enablePositionalOptions);e=X(t,i)}const i=`error: unknown option '${t}'${e}`;this.error(i,{code:"commander.unknownOption"})}_excessArguments(t){if(this._allowExcessArguments)return;const e=this._args.length,i=1===e?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${e} argument${i} but got ${t.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){const t=this.args[0];let e="";if(this._showSuggestionAfterError){const i=[];this.createHelp().visibleCommands(this).forEach((t=>{i.push(t.name()),t.alias()&&i.push(t.alias())})),e=X(t,i)}const i=`error: unknown command '${t}'${e}`;this.error(i,{code:"commander.unknownCommand"})}version(t,e,i){if(void 0===t)return this._version;this._version=t,e=e||"-V, --version",i=i||"output the version number";const s=this.createOption(e,i);return this._versionOptionName=s.attributeName(),this.options.push(s),this.on("option:"+s.name(),(()=>{this._outputConfiguration.writeOut(`${t}\n`),this._exit(0,"commander.version",t)})),this}description(t,e){return void 0===t&&void 0===e?this._description:(this._description=t,e&&(this._argsDescription=e),this)}summary(t){return void 0===t?this._summary:(this._summary=t,this)}alias(t){if(void 0===t)return this._aliases[0];let e=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(e=this.commands[this.commands.length-1]),t===e._name)throw new Error("Command alias can't be the same as its name");return e._aliases.push(t),this}aliases(t){return void 0===t?this._aliases:(t.forEach((t=>this.alias(t))),this)}usage(t){if(void 0===t){if(this._usage)return this._usage;const t=this._args.map((t=>U(t)));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?t:[]).join(" ")}return this._usage=t,this}name(t){return void 0===t?this._name:(this._name=t,this)}nameFromFilename(t){return this._name=G.basename(t,G.extname(t)),this}executableDir(t){return void 0===t?this._executableDir:(this._executableDir=t,this)}helpInformation(t){const e=this.createHelp();return void 0===e.helpWidth&&(e.helpWidth=t&&t.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),e.formatHelp(this,e)}_getHelpContext(t){const e={error:!!(t=t||{}).error};let i;return i=e.error?t=>this._outputConfiguration.writeErr(t):t=>this._outputConfiguration.writeOut(t),e.write=t.write||i,e.command=this,e}outputHelp(t){let e;"function"==typeof t&&(e=t,t=void 0);const i=this._getHelpContext(t);et(this).reverse().forEach((t=>t.emit("beforeAllHelp",i))),this.emit("beforeHelp",i);let s=this.helpInformation(i);if(e&&(s=e(s),"string"!=typeof s&&!Buffer.isBuffer(s)))throw new Error("outputHelp callback must return a string or a Buffer");i.write(s),this.emit(this._helpLongFlag),this.emit("afterHelp",i),et(this).forEach((t=>t.emit("afterAllHelp",i)))}helpOption(t,e){if("boolean"==typeof t)return this._hasHelpOption=t,this;this._helpFlags=t||this._helpFlags,this._helpDescription=e||this._helpDescription;const i=Z(this._helpFlags);return this._helpShortFlag=i.shortFlag,this._helpLongFlag=i.longFlag,this}help(t){this.outputHelp(t);let e=H.exitCode||0;0===e&&t&&"function"!=typeof t&&t.error&&(e=1),this._exit(e,"commander.help","(outputHelp)")}addHelpText(t,e){const i=["beforeAll","before","after","afterAll"];if(!i.includes(t))throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${i.join("', '")}'`);const s=`${t}Help`;return this.on(s,(t=>{let i;i="function"==typeof e?e({error:t.error,command:t.command}):e,i&&t.write(`${i}\n`)})),this}},function(t,e){const{Argument:i}=A,{Command:s}=L,{CommanderError:r,InvalidArgumentError:n}=T,{Help:o}=$,{Option:a}=I;(e=t.exports=new s).program=e,e.Argument=i,e.Command=s,e.CommanderError=r,e.Help=o,e.InvalidArgumentError=n,e.InvalidOptionArgumentError=n,e.Option=a}(k,k.exports);var it=C(k.exports);const{program:st,createCommand:rt,createArgument:nt,createOption:ot,CommanderError:at,InvalidArgumentError:ht,InvalidOptionArgumentError:lt,Command:ct,Argument:ut,Option:pt,Help:dt}=it,ft=t=>{Er(t);const{glob:e,...i}=t;if(!e)return i;const s=!0===e?t.signal?{signal:t.signal}:{}:t.signal?{signal:t.signal,...e}:e;return{...i,glob:{...s,absolute:!0,withFileTypes:!1}}};var mt=process.env.__TESTING_RIMRAF_PLATFORM__||process.platform;const gt=(t,e={})=>{const i=typeof t;if("string"!==i){const e=t&&"object"===i&&t.constructor,s=`The "path" argument must be of type string. Received ${e&&e.name?`an instance of ${e.name}`:"object"===i?a.inspect(t):`type ${i} ${t}`}`;throw Object.assign(new TypeError(s),{path:t,code:"ERR_INVALID_ARG_TYPE"})}if(/\0/.test(t)){const e="path must be a string without null bytes";throw Object.assign(new TypeError(e),{path:t,code:"ERR_INVALID_ARG_VALUE"})}t=r.resolve(t);const{root:s}=r.parse(t);if(t===s&&!1!==e.preserveRoot){const e="refusing to remove root directory without preserveRoot:false";throw Object.assign(new Error(e),{path:t,code:"ERR_PRESERVE_ROOT"})}if("win32"===mt){const e=/[*|"<>?:]/,{root:i}=r.parse(t);if(e.test(t.substring(i.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};var yt=wt;function wt(t,e,i){t instanceof RegExp&&(t=bt(t,i)),e instanceof RegExp&&(e=bt(e,i));var s=vt(t,e,i);return s&&{start:s[0],end:s[1],pre:i.slice(0,s[0]),body:i.slice(s[0]+t.length,s[1]),post:i.slice(s[1]+e.length)}}function bt(t,e){var i=e.match(t);return i?i[0]:null}function vt(t,e,i){var s,r,n,o,a,h=i.indexOf(t),l=i.indexOf(e,h+1),c=h;if(h>=0&&l>0){if(t===e)return[h,l];for(s=[],n=i.length;c>=0&&!a;)c==h?(s.push(c),h=i.indexOf(t,c+1)):1==s.length?a=[s.pop(),l]:((r=s.pop())<n&&(n=r,o=l),l=i.indexOf(e,c+1)),c=h<l&&h>=0?h:l;s.length&&(a=[n,o])}return a}wt.range=vt;var xt=yt,St=function(t){if(!t)return[];"{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2));return It(function(t){return t.split("\\\\").join(Ot).split("\\{").join(Et).split("\\}").join(_t).split("\\,").join(Ct).split("\\.").join(kt)}(t),!0).map(Tt)},Ot="\0SLASH"+Math.random()+"\0",Et="\0OPEN"+Math.random()+"\0",_t="\0CLOSE"+Math.random()+"\0",Ct="\0COMMA"+Math.random()+"\0",kt="\0PERIOD"+Math.random()+"\0";function At(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function Tt(t){return t.split(Ot).join("\\").split(Et).join("{").split(_t).join("}").split(Ct).join(",").split(kt).join(".")}function Pt(t){if(!t)return[""];var e=[],i=xt("{","}",t);if(!i)return t.split(",");var s=i.pre,r=i.body,n=i.post,o=s.split(",");o[o.length-1]+="{"+r+"}";var a=Pt(n);return n.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function Rt(t){return"{"+t+"}"}function Lt(t){return/^-?0\d/.test(t)}function $t(t,e){return t<=e}function Nt(t,e){return t>=e}function It(t,e){var i=[],s=xt("{","}",t);if(!s)return[t];var r=s.pre,n=s.post.length?It(s.post,!1):[""];if(/\$$/.test(s.pre))for(var o=0;o<n.length;o++){var a=r+"{"+s.body+"}"+n[o];i.push(a)}else{var h,l,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),p=c||u,d=s.body.indexOf(",")>=0;if(!p&&!d)return s.post.match(/,.*\}/)?It(t=s.pre+"{"+s.body+_t+s.post):[t];if(p)h=s.body.split(/\.\./);else if(1===(h=Pt(s.body)).length&&1===(h=It(h[0],!1).map(Rt)).length)return n.map((function(t){return s.pre+h[0]+t}));if(p){var f=At(h[0]),m=At(h[1]),g=Math.max(h[0].length,h[1].length),y=3==h.length?Math.abs(At(h[2])):1,w=$t;m<f&&(y*=-1,w=Nt);var b=h.some(Lt);l=[];for(var v=f;w(v,m);v+=y){var x;if(u)"\\"===(x=String.fromCharCode(v))&&(x="");else if(x=String(v),b){var S=g-x.length;if(S>0){var O=new Array(S+1).join("0");x=v<0?"-"+O+x.slice(1):O+x}}l.push(x)}}else{l=[];for(var E=0;E<h.length;E++)l.push.apply(l,It(h[E],!1))}for(E=0;E<l.length;E++)for(o=0;o<n.length;o++){a=r+l[E]+n[o];(!e||p||a)&&i.push(a)}}return i}var jt=C(St);const Ft=t=>{if("string"!=typeof t)throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},Mt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Dt=t=>t.replace(/[[\]\\-]/g,"\\$&"),Bt=t=>t.join(""),zt=(t,e)=>{const i=e;if("["!==t.charAt(i))throw new Error("not in a brace expression");const s=[],r=[];let n=i+1,o=!1,a=!1,h=!1,l=!1,c=i,u="";t:for(;n<t.length;){const e=t.charAt(n);if("!"!==e&&"^"!==e||n!==i+1){if("]"===e&&o&&!h){c=n+1;break}if(o=!0,"\\"!==e||h){if("["===e&&!h)for(const[e,[o,h,l]]of Object.entries(Mt))if(t.startsWith(e,n)){if(u)return["$.",!1,t.length-i,!0];n+=e.length,l?r.push(o):s.push(o),a=a||h;continue t}h=!1,u?(e>u?s.push(Dt(u)+"-"+Dt(e)):e===u&&s.push(Dt(e)),u="",n++):t.startsWith("-]",n+1)?(s.push(Dt(e+"-")),n+=2):t.startsWith("-",n+1)?(u=e,n+=2):(s.push(Dt(e)),n++)}else h=!0,n++}else l=!0,n++}if(c<n)return["",!1,0,!1];if(!s.length&&!r.length)return["$.",!1,t.length-i,!0];if(0===r.length&&1===s.length&&/^\\?.$/.test(s[0])&&!l){const t=2===s[0].length?s[0].slice(-1):s[0];return[(p=t,p.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,c-i,!1]}var p;const d="["+(l?"^":"")+Bt(s)+"]",f="["+(l?"":"^")+Bt(r)+"]";return[s.length&&r.length?"("+d+"|"+f+")":s.length?d:f,a,c-i,!0]},Gt=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),Wt=new Set(["!","?","+","*","@"]),Ht=t=>Wt.has(t),Vt="(?!\\.)",Ut=new Set(["[","."]),qt=new Set(["..","."]),Yt=new Set("().*{}+?[]^$\\!"),Kt="[^/]",Zt=Kt+"*?",Jt=Kt+"+?";class Xt{type;#t;#e;#i=!1;#s=[];#r;#n;#o;#a=!1;#h;#l;#c=!1;constructor(t,e,i={}){this.type=t,t&&(this.#e=!0),this.#r=e,this.#t=this.#r?this.#r.#t:this,this.#h=this.#t===this?i:this.#t.#h,this.#o=this.#t===this?[]:this.#t.#o,"!"!==t||this.#t.#a||this.#o.push(this),this.#n=this.#r?this.#r.#s.length:0}get hasMagic(){if(void 0!==this.#e)return this.#e;for(const t of this.#s)if("string"!=typeof t&&(t.type||t.hasMagic))return this.#e=!0;return this.#e}toString(){return void 0!==this.#l?this.#l:this.type?this.#l=this.type+"("+this.#s.map((t=>String(t))).join("|")+")":this.#l=this.#s.map((t=>String(t))).join("")}#u(){if(this!==this.#t)throw new Error("should only call on root");if(this.#a)return this;let t;for(this.toString(),this.#a=!0;t=this.#o.pop();){if("!"!==t.type)continue;let e=t,i=e.#r;for(;i;){for(let s=e.#n+1;!i.type&&s<i.#s.length;s++)for(const e of t.#s){if("string"==typeof e)throw new Error("string part in extglob AST??");e.copyIn(i.#s[s])}e=i,i=e.#r}}return this}push(...t){for(const e of t)if(""!==e){if("string"!=typeof e&&!(e instanceof Xt&&e.#r===this))throw new Error("invalid part: "+e);this.#s.push(e)}}toJSON(){const t=null===this.type?this.#s.slice().map((t=>"string"==typeof t?t:t.toJSON())):[this.type,...this.#s.map((t=>t.toJSON()))];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#a&&"!"===this.#r?.type)&&t.push({}),t}isStart(){if(this.#t===this)return!0;if(!this.#r?.isStart())return!1;if(0===this.#n)return!0;const t=this.#r;for(let e=0;e<this.#n;e++){const i=t.#s[e];if(!(i instanceof Xt&&"!"===i.type))return!1}return!0}isEnd(){if(this.#t===this)return!0;if("!"===this.#r?.type)return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();const t=this.#r?this.#r.#s.length:0;return this.#n===t-1}copyIn(t){"string"==typeof t?this.push(t):this.push(t.clone(this))}clone(t){const e=new Xt(this.type,t);for(const t of this.#s)e.copyIn(t);return e}static#p(t,e,i,s){let r=!1,n=!1,o=-1,a=!1;if(null===e.type){let h=i,l="";for(;h<t.length;){const i=t.charAt(h++);if(r||"\\"===i)r=!r,l+=i;else if(n)h===o+1?"^"!==i&&"!"!==i||(a=!0):"]"!==i||h===o+2&&a||(n=!1),l+=i;else if("["!==i)if(s.noext||!Ht(i)||"("!==t.charAt(h))l+=i;else{e.push(l),l="";const r=new Xt(i,e);h=Xt.#p(t,r,h,s),e.push(r)}else n=!0,o=h,a=!1,l+=i}return e.push(l),h}let h=i+1,l=new Xt(null,e);const c=[];let u="";for(;h<t.length;){const i=t.charAt(h++);if(r||"\\"===i)r=!r,u+=i;else if(n)h===o+1?"^"!==i&&"!"!==i||(a=!0):"]"!==i||h===o+2&&a||(n=!1),u+=i;else if("["!==i)if(Ht(i)&&"("===t.charAt(h)){l.push(u),u="";const e=new Xt(i,l);l.push(e),h=Xt.#p(t,e,h,s)}else if("|"!==i){if(")"===i)return""===u&&0===e.#s.length&&(e.#c=!0),l.push(u),u="",e.push(...c,l),h;u+=i}else l.push(u),u="",c.push(l),l=new Xt(null,e);else n=!0,o=h,a=!1,u+=i}return e.type=null,e.#e=void 0,e.#s=[t.substring(i-1)],h}static fromGlob(t,e={}){const i=new Xt(null,void 0,e);return Xt.#p(t,i,0,e),i}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();const t=this.toString(),[e,i,s,r]=this.toRegExpSource();if(!(s||this.#e||this.#h.nocase&&!this.#h.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return i;const n=(this.#h.nocase?"i":"")+(r?"u":"");return Object.assign(new RegExp(`^${e}$`,n),{_src:e,_glob:t})}toRegExpSource(){if(this.#t===this&&this.#u(),!this.type){const t=this.isStart()&&this.isEnd(),e=this.#s.map((e=>{const[i,s,r,n]="string"==typeof e?Xt.#d(e,this.#e,t):e.toRegExpSource();return this.#e=this.#e||r,this.#i=this.#i||n,i})).join("");let i="";if(this.isStart()&&"string"==typeof this.#s[0]){if(!(1===this.#s.length&&qt.has(this.#s[0]))){const t=Ut,s=this.#h.dot&&t.has(e.charAt(0))||e.startsWith("\\.")&&t.has(e.charAt(2))||e.startsWith("\\.\\.")&&t.has(e.charAt(4)),r=!this.#h.dot&&t.has(e.charAt(0));i=s?"(?!\\.\\.?(?:$|/))":r?Vt:""}}let s="";this.isEnd()&&this.#t.#a&&"!"===this.#r?.type&&(s="(?:$|\\/)");return[i+e+s,Gt(e),this.#e=!!this.#e,this.#i]}const t="!"===this.type?"(?:(?!(?:":"(?:",e=this.#s.map((t=>{if("string"==typeof t)throw new Error("string type in extglob ast??");const[e,i,s,r]=t.toRegExpSource();return this.#i=this.#i||r,e})).filter((t=>!(this.isStart()&&this.isEnd()&&!t))).join("|");if(this.isStart()&&this.isEnd()&&!e&&"!"!==this.type){const t=this.toString();return this.#s=[t],this.type=null,this.#e=void 0,[t,Gt(this.toString()),!1,!1]}let i="";if("!"===this.type&&this.#c)i=(this.isStart()&&!this.#h.dot?Vt:"")+Jt;else{i=t+e+("!"===this.type?"))"+(this.isStart()&&!this.#h.dot?Vt:"")+Zt+")":"@"===this.type?")":`)${this.type}`)}return[i,Gt(e),this.#e=!!this.#e,this.#i]}static#d(t,e,i=!1){let s=!1,r="",n=!1;for(let o=0;o<t.length;o++){const a=t.charAt(o);if(s)s=!1,r+=(Yt.has(a)?"\\":"")+a;else if("\\"!==a){if("["===a){const[i,s,a,h]=zt(t,o);if(a){r+=i,n=n||s,o+=a-1,e=e||h;continue}}"*"!==a?"?"!==a?r+=a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):(r+=Kt,e=!0):(r+=i&&"*"===t?Jt:Zt,e=!0)}else o===t.length-1?r+="\\\\":s=!0}return[r,Gt(t),!!e,n]}}const Qt=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),te=(t,e,i={})=>(Ft(e),!(!i.nocomment&&"#"===e.charAt(0))&&new Ce(e,i).match(t)),ee=/^\*+([^+@!?\*\[\(]*)$/,ie=t=>e=>!e.startsWith(".")&&e.endsWith(t),se=t=>e=>e.endsWith(t),re=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),ne=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),oe=/^\*+\.\*+$/,ae=t=>!t.startsWith(".")&&t.includes("."),he=t=>"."!==t&&".."!==t&&t.includes("."),le=/^\.\*+$/,ce=t=>"."!==t&&".."!==t&&t.startsWith("."),ue=/^\*+$/,pe=t=>0!==t.length&&!t.startsWith("."),de=t=>0!==t.length&&"."!==t&&".."!==t,fe=/^\?+([^+@!?\*\[\(]*)?$/,me=([t,e=""])=>{const i=be([t]);return e?(e=e.toLowerCase(),t=>i(t)&&t.toLowerCase().endsWith(e)):i},ge=([t,e=""])=>{const i=ve([t]);return e?(e=e.toLowerCase(),t=>i(t)&&t.toLowerCase().endsWith(e)):i},ye=([t,e=""])=>{const i=ve([t]);return e?t=>i(t)&&t.endsWith(e):i},we=([t,e=""])=>{const i=be([t]);return e?t=>i(t)&&t.endsWith(e):i},be=([t])=>{const e=t.length;return t=>t.length===e&&!t.startsWith(".")},ve=([t])=>{const e=t.length;return t=>t.length===e&&"."!==t&&".."!==t},xe="object"==typeof process&&process?"object"==typeof process.env&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";te.sep="win32"===xe?{sep:"\\"}.sep:{sep:"/"}.sep;const Se=Symbol("globstar **");te.GLOBSTAR=Se;te.filter=(t,e={})=>i=>te(i,t,e);const Oe=(t,e={})=>Object.assign({},t,e);te.defaults=t=>{if(!t||"object"!=typeof t||!Object.keys(t).length)return te;const e=te;return Object.assign(((i,s,r={})=>e(i,s,Oe(t,r))),{Minimatch:class extends e.Minimatch{constructor(e,i={}){super(e,Oe(t,i))}static defaults(i){return e.defaults(Oe(t,i)).Minimatch}},AST:class extends e.AST{constructor(e,i,s={}){super(e,i,Oe(t,s))}static fromGlob(i,s={}){return e.AST.fromGlob(i,Oe(t,s))}},unescape:(i,s={})=>e.unescape(i,Oe(t,s)),escape:(i,s={})=>e.escape(i,Oe(t,s)),filter:(i,s={})=>e.filter(i,Oe(t,s)),defaults:i=>e.defaults(Oe(t,i)),makeRe:(i,s={})=>e.makeRe(i,Oe(t,s)),braceExpand:(i,s={})=>e.braceExpand(i,Oe(t,s)),match:(i,s,r={})=>e.match(i,s,Oe(t,r)),sep:e.sep,GLOBSTAR:Se})};const Ee=(t,e={})=>(Ft(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:jt(t));te.braceExpand=Ee;te.makeRe=(t,e={})=>new Ce(t,e).makeRe();te.match=(t,e,i={})=>{const s=new Ce(e,i);return t=t.filter((t=>s.match(t))),s.options.nonull&&!t.length&&t.push(e),t};const _e=/[?*]|[+@!]\(.*?\)|\[|\]/;class Ce{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){Ft(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||xe,this.isWindows="win32"===this.platform,this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||!1===e.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=void 0!==e.windowsNoMagicRoot?e.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const t of this.set)for(const e of t)if("string"!=typeof e)return!0;return!1}debug(...t){}make(){const t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...t)=>console.error(...t)),this.debug(this.pattern,this.globSet);const i=this.globSet.map((t=>this.slashSplit(t)));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let s=this.globParts.map(((t,e,i)=>{if(this.isWindows&&this.windowsNoMagicRoot){const e=!(""!==t[0]||""!==t[1]||"?"!==t[2]&&_e.test(t[2])||_e.test(t[3])),i=/^[a-z]:/i.test(t[0]);if(e)return[...t.slice(0,4),...t.slice(4).map((t=>this.parse(t)))];if(i)return[t[0],...t.slice(1).map((t=>this.parse(t)))]}return t.map((t=>this.parse(t)))}));if(this.debug(this.pattern,s),this.set=s.filter((t=>-1===t.indexOf(!1))),this.isWindows)for(let t=0;t<this.set.length;t++){const e=this.set[t];""===e[0]&&""===e[1]&&"?"===this.globParts[t][2]&&"string"==typeof e[3]&&/^[a-z]:$/i.test(e[3])&&(e[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let e=0;e<t.length;e++)for(let i=0;i<t[e].length;i++)"**"===t[e][i]&&(t[e][i]="*");const{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):t=e>=1?this.levelOneOptimize(t):this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map((t=>{let e=-1;for(;-1!==(e=t.indexOf("**",e+1));){let i=e;for(;"**"===t[i+1];)i++;i!==e&&t.splice(e,i-e)}return t}))}levelOneOptimize(t){return t.map((t=>0===(t=t.reduce(((t,e)=>{const i=t[t.length-1];return"**"===e&&"**"===i?t:".."===e&&i&&".."!==i&&"."!==i&&"**"!==i?(t.pop(),t):(t.push(e),t)}),[])).length?[""]:t))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let i=1;i<t.length-1;i++){const s=t[i];1===i&&""===s&&""===t[0]||("."!==s&&""!==s||(e=!0,t.splice(i,1),i--))}"."!==t[0]||2!==t.length||"."!==t[1]&&""!==t[1]||(e=!0,t.pop())}let i=0;for(;-1!==(i=t.indexOf("..",i+1));){const s=t[i-1];s&&"."!==s&&".."!==s&&"**"!==s&&(e=!0,t.splice(i-1,2),i-=2)}}while(e);return 0===t.length?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let i of t){let s=-1;for(;-1!==(s=i.indexOf("**",s+1));){let r=s;for(;"**"===i[r+1];)r++;r>s&&i.splice(s+1,r-s);let n=i[s+1];const o=i[s+2],a=i[s+3];if(".."!==n)continue;if(!o||"."===o||".."===o||!a||"."===a||".."===a)continue;e=!0,i.splice(s,1);const h=i.slice(0);h[s]="**",t.push(h),s--}if(!this.preserveMultipleSlashes){for(let t=1;t<i.length-1;t++){const s=i[t];1===t&&""===s&&""===i[0]||("."!==s&&""!==s||(e=!0,i.splice(t,1),t--))}"."!==i[0]||2!==i.length||"."!==i[1]&&""!==i[1]||(e=!0,i.pop())}let r=0;for(;-1!==(r=i.indexOf("..",r+1));){const t=i[r-1];if(t&&"."!==t&&".."!==t&&"**"!==t){e=!0;const t=1===r&&"**"===i[r+1]?["."]:[];i.splice(r-1,2,...t),0===i.length&&i.push(""),r-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let i=e+1;i<t.length;i++){const s=this.partsMatch(t[e],t[i],!this.preserveMultipleSlashes);s&&(t[e]=s,t[i]=[])}return t.filter((t=>t.length))}partsMatch(t,e,i=!1){let s=0,r=0,n=[],o="";for(;s<t.length&&r<e.length;)if(t[s]===e[r])n.push("b"===o?e[r]:t[s]),s++,r++;else if(i&&"**"===t[s]&&e[r]===t[s+1])n.push(t[s]),s++;else if(i&&"**"===e[r]&&t[s]===e[r+1])n.push(e[r]),r++;else if("*"!==t[s]||!e[r]||!this.options.dot&&e[r].startsWith(".")||"**"===e[r]){if("*"!==e[r]||!t[s]||!this.options.dot&&t[s].startsWith(".")||"**"===t[s])return!1;if("a"===o)return!1;o="b",n.push(e[r]),s++,r++}else{if("b"===o)return!1;o="a",n.push(t[s]),s++,r++}return t.length===e.length&&n}parseNegate(){if(this.nonegate)return;const t=this.pattern;let e=!1,i=0;for(let s=0;s<t.length&&"!"===t.charAt(s);s++)e=!e,i++;i&&(this.pattern=t.slice(i)),this.negate=e}matchOne(t,e,i=!1){const s=this.options;if(this.isWindows){const i=""===t[0]&&""===t[1]&&"?"===t[2]&&"string"==typeof t[3]&&/^[a-z]:$/i.test(t[3]),s=""===e[0]&&""===e[1]&&"?"===e[2]&&"string"==typeof e[3]&&/^[a-z]:$/i.test(e[3]);if(i&&s){const i=t[3],s=e[3];i.toLowerCase()===s.toLowerCase()&&(t[3]=s)}else if(s&&"string"==typeof t[0]){const i=e[3],s=t[0];i.toLowerCase()===s.toLowerCase()&&(e[3]=s,e=e.slice(3))}else if(i&&"string"==typeof e[0]){const i=t[3];i.toLowerCase()===e[0].toLowerCase()&&(e[0]=i,t=t.slice(3))}}const{optimizationLevel:r=1}=this.options;r>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var n=0,o=0,a=t.length,h=e.length;n<a&&o<h;n++,o++){this.debug("matchOne loop");var l=e[o],c=t[n];if(this.debug(e,l,c),!1===l)return!1;if(l===Se){this.debug("GLOBSTAR",[e,l,c]);var u=n,p=o+1;if(p===h){for(this.debug("** at the end");n<a;n++)if("."===t[n]||".."===t[n]||!s.dot&&"."===t[n].charAt(0))return!1;return!0}for(;u<a;){var d=t[u];if(this.debug("\nglobstar while",t,u,e,p,d),this.matchOne(t.slice(u),e.slice(p),i))return this.debug("globstar found match!",u,a,d),!0;if("."===d||".."===d||!s.dot&&"."===d.charAt(0)){this.debug("dot detected!",t,u,e,p);break}this.debug("globstar swallow a segment, and continue"),u++}return!(!i||(this.debug("\n>>> no match, partial?",t,u,e,p),u!==a))}let r;if("string"==typeof l?(r=c===l,this.debug("string match",l,c,r)):(r=l.test(c),this.debug("pattern match",l,c,r)),!r)return!1}if(n===a&&o===h)return!0;if(n===a)return i;if(o===h)return n===a-1&&""===t[n];throw new Error("wtf?")}braceExpand(){return Ee(this.pattern,this.options)}parse(t){Ft(t);const e=this.options;if("**"===t)return Se;if(""===t)return"";let i,s=null;(i=t.match(ue))?s=e.dot?de:pe:(i=t.match(ee))?s=(e.nocase?e.dot?ne:re:e.dot?se:ie)(i[1]):(i=t.match(fe))?s=(e.nocase?e.dot?ge:me:e.dot?ye:we)(i):(i=t.match(oe))?s=e.dot?he:ae:(i=t.match(le))&&(s=ce);const r=Xt.fromGlob(t,this.options).toMMPattern();return s?Object.assign(r,{test:s}):r}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const e=this.options,i=e.noglobstar?"[^/]*?":e.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",s=new Set(e.nocase?["i"]:[]);let r=t.map((t=>{const e=t.map((t=>{if(t instanceof RegExp)for(const e of t.flags.split(""))s.add(e);return"string"==typeof t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):t===Se?Se:t._src}));return e.forEach(((t,s)=>{const r=e[s+1],n=e[s-1];t===Se&&n!==Se&&(void 0===n?void 0!==r&&r!==Se?e[s+1]="(?:\\/|"+i+"\\/)?"+r:e[s]=i:void 0===r?e[s-1]=n+"(?:\\/|"+i+")?":r!==Se&&(e[s-1]=n+"(?:\\/|\\/"+i+"\\/)"+r,e[s+1]=Se))})),e.filter((t=>t!==Se)).join("/")})).join("|");const[n,o]=t.length>1?["(?:",")"]:["",""];r="^"+n+r+o+"$",this.negate&&(r="^(?!"+r+").+$");try{this.regexp=new RegExp(r,[...s].join(""))}catch(t){this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;const i=this.options;this.isWindows&&(t=t.split("\\").join("/"));const s=this.slashSplit(t);this.debug(this.pattern,"split",s);const r=this.set;this.debug(this.pattern,"set",r);let n=s[s.length-1];if(!n)for(let t=s.length-2;!n&&t>=0;t--)n=s[t];for(let t=0;t<r.length;t++){const o=r[t];let a=s;i.matchBase&&1===o.length&&(a=[n]);if(this.matchOne(a,o,e))return!!i.flipNegate||!this.negate}return!i.flipNegate&&this.negate}static defaults(t){return te.defaults(t).Minimatch}}te.AST=Xt,te.Minimatch=Ce,te.escape=Qt,te.unescape=Gt;const ke="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,Ae=new Set,Te="object"==typeof process&&process?process:{},Pe=(t,e,i,s)=>{"function"==typeof Te.emitWarning?Te.emitWarning(t,e,i,s):console.error(`[${i}] ${e}: ${t}`)};let Re=globalThis.AbortController,Le=globalThis.AbortSignal;if(void 0===Re){Le=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,e){this._onabort.push(e)}},Re=class{constructor(){e()}signal=new Le;abort(t){if(!this.signal.aborted){this.signal.reason=t,this.signal.aborted=!0;for(const e of this.signal._onabort)e(t);this.signal.onabort?.(t)}}};let t="1"!==Te.env?.LRU_CACHE_IGNORE_AC_WARNING;const e=()=>{t&&(t=!1,Pe("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const $e=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Ne=t=>$e(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Ie:null:null;class Ie extends Array{constructor(t){super(t),this.fill(0)}}class je{heap;length;static#f=!1;static create(t){const e=Ne(t);if(!e)return[];je.#f=!0;const i=new je(t,e);return je.#f=!1,i}constructor(t,e){if(!je.#f)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class Fe{#m;#g;#y;#w;#b;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#v;#x;#S;#O;#E;#_;#C;#k;#A;#T;#P;#R;#L;#$;#N;#I;#j;static unsafeExposeInternals(t){return{starts:t.#L,ttls:t.#$,sizes:t.#R,keyMap:t.#S,keyList:t.#O,valList:t.#E,next:t.#_,prev:t.#C,get head(){return t.#k},get tail(){return t.#A},free:t.#T,isBackgroundFetch:e=>t.#F(e),backgroundFetch:(e,i,s,r)=>t.#M(e,i,s,r),moveToTail:e=>t.#D(e),indexes:e=>t.#B(e),rindexes:e=>t.#z(e),isStale:e=>t.#G(e)}}get max(){return this.#m}get maxSize(){return this.#g}get calculatedSize(){return this.#x}get size(){return this.#v}get fetchMethod(){return this.#b}get dispose(){return this.#y}get disposeAfter(){return this.#w}constructor(t){const{max:e=0,ttl:i,ttlResolution:s=1,ttlAutopurge:r,updateAgeOnGet:n,updateAgeOnHas:o,allowStale:a,dispose:h,disposeAfter:l,noDisposeOnSet:c,noUpdateTTL:u,maxSize:p=0,maxEntrySize:d=0,sizeCalculation:f,fetchMethod:m,noDeleteOnFetchRejection:g,noDeleteOnStaleGet:y,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:b,ignoreFetchAbort:v}=t;if(0!==e&&!$e(e))throw new TypeError("max option must be a nonnegative integer");const x=e?Ne(e):Array;if(!x)throw new Error("invalid max value: "+e);if(this.#m=e,this.#g=p,this.maxEntrySize=d||this.#g,this.sizeCalculation=f,this.sizeCalculation){if(!this.#g&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==m&&"function"!=typeof m)throw new TypeError("fetchMethod must be a function if specified");if(this.#b=m,this.#I=!!m,this.#S=new Map,this.#O=new Array(e).fill(void 0),this.#E=new Array(e).fill(void 0),this.#_=new x(e),this.#C=new x(e),this.#k=0,this.#A=0,this.#T=je.create(e),this.#v=0,this.#x=0,"function"==typeof h&&(this.#y=h),"function"==typeof l?(this.#w=l,this.#P=[]):(this.#w=void 0,this.#P=void 0),this.#N=!!this.#y,this.#j=!!this.#w,this.noDisposeOnSet=!!c,this.noUpdateTTL=!!u,this.noDeleteOnFetchRejection=!!g,this.allowStaleOnFetchRejection=!!w,this.allowStaleOnFetchAbort=!!b,this.ignoreFetchAbort=!!v,0!==this.maxEntrySize){if(0!==this.#g&&!$e(this.#g))throw new TypeError("maxSize must be a positive integer if specified");if(!$e(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#W()}if(this.allowStale=!!a,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!n,this.updateAgeOnHas=!!o,this.ttlResolution=$e(s)||0===s?s:1,this.ttlAutopurge=!!r,this.ttl=i||0,this.ttl){if(!$e(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#H()}if(0===this.#m&&0===this.ttl&&0===this.#g)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#m&&!this.#g){const t="LRU_CACHE_UNBOUNDED";if((t=>!Ae.has(t))(t)){Ae.add(t);Pe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,Fe)}}}getRemainingTTL(t){return this.#S.has(t)?1/0:0}#H(){const t=new Ie(this.#m),e=new Ie(this.#m);this.#$=t,this.#L=e,this.#V=(i,s,r=ke.now())=>{if(e[i]=0!==s?r:0,t[i]=s,0!==s&&this.ttlAutopurge){const t=setTimeout((()=>{this.#G(i)&&this.delete(this.#O[i])}),s+1);t.unref&&t.unref()}},this.#U=i=>{e[i]=0!==t[i]?ke.now():0},this.#q=(r,n)=>{if(t[n]){const o=t[n],a=e[n];r.ttl=o,r.start=a,r.now=i||s();const h=r.now-a;r.remainingTTL=o-h}};let i=0;const s=()=>{const t=ke.now();if(this.ttlResolution>0){i=t;const e=setTimeout((()=>i=0),this.ttlResolution);e.unref&&e.unref()}return t};this.getRemainingTTL=r=>{const n=this.#S.get(r);if(void 0===n)return 0;const o=t[n],a=e[n];if(0===o||0===a)return 1/0;return o-((i||s())-a)},this.#G=r=>0!==t[r]&&0!==e[r]&&(i||s())-e[r]>t[r]}#U=()=>{};#q=()=>{};#V=()=>{};#G=()=>!1;#W(){const t=new Ie(this.#m);this.#x=0,this.#R=t,this.#Y=e=>{this.#x-=t[e],t[e]=0},this.#K=(t,e,i,s)=>{if(this.#F(e))return 0;if(!$e(i)){if(!s)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof s)throw new TypeError("sizeCalculation must be a function");if(i=s(e,t),!$e(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return i},this.#Z=(e,i,s)=>{if(t[e]=i,this.#g){const i=this.#g-t[e];for(;this.#x>i;)this.#J(!0)}this.#x+=t[e],s&&(s.entrySize=i,s.totalCalculatedSize=this.#x)}}#Y=t=>{};#Z=(t,e,i)=>{};#K=(t,e,i,s)=>{if(i||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#B({allowStale:t=this.allowStale}={}){if(this.#v)for(let e=this.#A;this.#X(e)&&(!t&&this.#G(e)||(yield e),e!==this.#k);)e=this.#C[e]}*#z({allowStale:t=this.allowStale}={}){if(this.#v)for(let e=this.#k;this.#X(e)&&(!t&&this.#G(e)||(yield e),e!==this.#A);)e=this.#_[e]}#X(t){return void 0!==t&&this.#S.get(this.#O[t])===t}*entries(){for(const t of this.#B())void 0===this.#E[t]||void 0===this.#O[t]||this.#F(this.#E[t])||(yield[this.#O[t],this.#E[t]])}*rentries(){for(const t of this.#z())void 0===this.#E[t]||void 0===this.#O[t]||this.#F(this.#E[t])||(yield[this.#O[t],this.#E[t]])}*keys(){for(const t of this.#B()){const e=this.#O[t];void 0===e||this.#F(this.#E[t])||(yield e)}}*rkeys(){for(const t of this.#z()){const e=this.#O[t];void 0===e||this.#F(this.#E[t])||(yield e)}}*values(){for(const t of this.#B()){void 0===this.#E[t]||this.#F(this.#E[t])||(yield this.#E[t])}}*rvalues(){for(const t of this.#z()){void 0===this.#E[t]||this.#F(this.#E[t])||(yield this.#E[t])}}[Symbol.iterator](){return this.entries()}find(t,e={}){for(const i of this.#B()){const s=this.#E[i],r=this.#F(s)?s.__staleWhileFetching:s;if(void 0!==r&&t(r,this.#O[i],this))return this.get(this.#O[i],e)}}forEach(t,e=this){for(const i of this.#B()){const s=this.#E[i],r=this.#F(s)?s.__staleWhileFetching:s;void 0!==r&&t.call(e,r,this.#O[i],this)}}rforEach(t,e=this){for(const i of this.#z()){const s=this.#E[i],r=this.#F(s)?s.__staleWhileFetching:s;void 0!==r&&t.call(e,r,this.#O[i],this)}}purgeStale(){let t=!1;for(const e of this.#z({allowStale:!0}))this.#G(e)&&(this.delete(this.#O[e]),t=!0);return t}dump(){const t=[];for(const e of this.#B({allowStale:!0})){const i=this.#O[e],s=this.#E[e],r=this.#F(s)?s.__staleWhileFetching:s;if(void 0===r||void 0===i)continue;const n={value:r};if(this.#$&&this.#L){n.ttl=this.#$[e];const t=ke.now()-this.#L[e];n.start=Math.floor(Date.now()-t)}this.#R&&(n.size=this.#R[e]),t.unshift([i,n])}return t}load(t){this.clear();for(const[e,i]of t){if(i.start){const t=Date.now()-i.start;i.start=ke.now()-t}this.set(e,i.value,i)}}set(t,e,i={}){if(void 0===e)return this.delete(t),this;const{ttl:s=this.ttl,start:r,noDisposeOnSet:n=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=i;let{noUpdateTTL:h=this.noUpdateTTL}=i;const l=this.#K(t,e,i.size||0,o);if(this.maxEntrySize&&l>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.delete(t),this;let c=0===this.#v?void 0:this.#S.get(t);if(void 0===c)c=0===this.#v?this.#A:0!==this.#T.length?this.#T.pop():this.#v===this.#m?this.#J(!1):this.#v,this.#O[c]=t,this.#E[c]=e,this.#S.set(t,c),this.#_[this.#A]=c,this.#C[c]=this.#A,this.#A=c,this.#v++,this.#Z(c,l,a),a&&(a.set="add"),h=!1;else{this.#D(c);const i=this.#E[c];if(e!==i){if(this.#I&&this.#F(i)?i.__abortController.abort(new Error("replaced")):n||(this.#N&&this.#y?.(i,t,"set"),this.#j&&this.#P?.push([i,t,"set"])),this.#Y(c),this.#Z(c,l,a),this.#E[c]=e,a){a.set="replace";const t=i&&this.#F(i)?i.__staleWhileFetching:i;void 0!==t&&(a.oldValue=t)}}else a&&(a.set="update")}if(0===s||this.#$||this.#H(),this.#$&&(h||this.#V(c,s,r),a&&this.#q(a,c)),!n&&this.#j&&this.#P){const t=this.#P;let e;for(;e=t?.shift();)this.#w?.(...e)}return this}pop(){try{for(;this.#v;){const t=this.#E[this.#k];if(this.#J(!0),this.#F(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(void 0!==t)return t}}finally{if(this.#j&&this.#P){const t=this.#P;let e;for(;e=t?.shift();)this.#w?.(...e)}}}#J(t){const e=this.#k,i=this.#O[e],s=this.#E[e];return this.#I&&this.#F(s)?s.__abortController.abort(new Error("evicted")):(this.#N||this.#j)&&(this.#N&&this.#y?.(s,i,"evict"),this.#j&&this.#P?.push([s,i,"evict"])),this.#Y(e),t&&(this.#O[e]=void 0,this.#E[e]=void 0,this.#T.push(e)),1===this.#v?(this.#k=this.#A=0,this.#T.length=0):this.#k=this.#_[e],this.#S.delete(i),this.#v--,e}has(t,e={}){const{updateAgeOnHas:i=this.updateAgeOnHas,status:s}=e,r=this.#S.get(t);if(void 0!==r){const t=this.#E[r];if(this.#F(t)&&void 0===t.__staleWhileFetching)return!1;if(!this.#G(r))return i&&this.#U(r),s&&(s.has="hit",this.#q(s,r)),!0;s&&(s.has="stale",this.#q(s,r))}else s&&(s.has="miss");return!1}peek(t,e={}){const{allowStale:i=this.allowStale}=e,s=this.#S.get(t);if(void 0!==s&&(i||!this.#G(s))){const t=this.#E[s];return this.#F(t)?t.__staleWhileFetching:t}}#M(t,e,i,s){const r=void 0===e?void 0:this.#E[e];if(this.#F(r))return r;const n=new Re,{signal:o}=i;o?.addEventListener("abort",(()=>n.abort(o.reason)),{signal:n.signal});const a={signal:n.signal,options:i,context:s},h=(s,r=!1)=>{const{aborted:o}=n.signal,h=i.ignoreFetchAbort&&void 0!==s;if(i.status&&(o&&!r?(i.status.fetchAborted=!0,i.status.fetchError=n.signal.reason,h&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),o&&!h&&!r)return l(n.signal.reason);const u=c;return this.#E[e]===c&&(void 0===s?u.__staleWhileFetching?this.#E[e]=u.__staleWhileFetching:this.delete(t):(i.status&&(i.status.fetchUpdated=!0),this.set(t,s,a.options))),s},l=s=>{const{aborted:r}=n.signal,o=r&&i.allowStaleOnFetchAbort,a=o||i.allowStaleOnFetchRejection,h=a||i.noDeleteOnFetchRejection,l=c;if(this.#E[e]===c){!h||void 0===l.__staleWhileFetching?this.delete(t):o||(this.#E[e]=l.__staleWhileFetching)}if(a)return i.status&&void 0!==l.__staleWhileFetching&&(i.status.returnedStale=!0),l.__staleWhileFetching;if(l.__returned===l)throw s};i.status&&(i.status.fetchDispatched=!0);const c=new Promise(((e,s)=>{const o=this.#b?.(t,r,a);o&&o instanceof Promise&&o.then((t=>e(t)),s),n.signal.addEventListener("abort",(()=>{i.ignoreFetchAbort&&!i.allowStaleOnFetchAbort||(e(),i.allowStaleOnFetchAbort&&(e=t=>h(t,!0)))}))})).then(h,(t=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=t),l(t)))),u=Object.assign(c,{__abortController:n,__staleWhileFetching:r,__returned:void 0});return void 0===e?(this.set(t,u,{...a.options,status:void 0}),e=this.#S.get(t)):this.#E[e]=u,u}#F(t){if(!this.#I)return!1;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof Re}async fetch(t,e={}){const{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:u=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:d=this.allowStaleOnFetchAbort,context:f,forceRefresh:m=!1,status:g,signal:y}=e;if(!this.#I)return g&&(g.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:r,status:g});const w={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:r,ttl:n,noDisposeOnSet:o,size:a,sizeCalculation:h,noUpdateTTL:l,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:u,allowStaleOnFetchAbort:d,ignoreFetchAbort:p,status:g,signal:y};let b=this.#S.get(t);if(void 0===b){g&&(g.fetch="miss");const e=this.#M(t,b,w,f);return e.__returned=e}{const e=this.#E[b];if(this.#F(e)){const t=i&&void 0!==e.__staleWhileFetching;return g&&(g.fetch="inflight",t&&(g.returnedStale=!0)),t?e.__staleWhileFetching:e.__returned=e}const r=this.#G(b);if(!m&&!r)return g&&(g.fetch="hit"),this.#D(b),s&&this.#U(b),g&&this.#q(g,b),e;const n=this.#M(t,b,w,f),o=void 0!==n.__staleWhileFetching&&i;return g&&(g.fetch=r?"stale":"refresh",o&&r&&(g.returnedStale=!0)),o?n.__staleWhileFetching:n.__returned=n}}get(t,e={}){const{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:n}=e,o=this.#S.get(t);if(void 0!==o){const e=this.#E[o],a=this.#F(e);return n&&this.#q(n,o),this.#G(o)?(n&&(n.get="stale"),a?(n&&i&&void 0!==e.__staleWhileFetching&&(n.returnedStale=!0),i?e.__staleWhileFetching:void 0):(r||this.delete(t),n&&i&&(n.returnedStale=!0),i?e:void 0)):(n&&(n.get="hit"),a?e.__staleWhileFetching:(this.#D(o),s&&this.#U(o),e))}n&&(n.get="miss")}#Q(t,e){this.#C[e]=t,this.#_[t]=e}#D(t){t!==this.#A&&(t===this.#k?this.#k=this.#_[t]:this.#Q(this.#C[t],this.#_[t]),this.#Q(this.#A,t),this.#A=t)}delete(t){let e=!1;if(0!==this.#v){const i=this.#S.get(t);if(void 0!==i)if(e=!0,1===this.#v)this.clear();else{this.#Y(i);const e=this.#E[i];this.#F(e)?e.__abortController.abort(new Error("deleted")):(this.#N||this.#j)&&(this.#N&&this.#y?.(e,t,"delete"),this.#j&&this.#P?.push([e,t,"delete"])),this.#S.delete(t),this.#O[i]=void 0,this.#E[i]=void 0,i===this.#A?this.#A=this.#C[i]:i===this.#k?this.#k=this.#_[i]:(this.#_[this.#C[i]]=this.#_[i],this.#C[this.#_[i]]=this.#C[i]),this.#v--,this.#T.push(i)}}if(this.#j&&this.#P?.length){const t=this.#P;let e;for(;e=t?.shift();)this.#w?.(...e)}return e}clear(){for(const t of this.#z({allowStale:!0})){const e=this.#E[t];if(this.#F(e))e.__abortController.abort(new Error("deleted"));else{const i=this.#O[t];this.#N&&this.#y?.(e,i,"delete"),this.#j&&this.#P?.push([e,i,"delete"])}}if(this.#S.clear(),this.#E.fill(void 0),this.#O.fill(void 0),this.#$&&this.#L&&(this.#$.fill(0),this.#L.fill(0)),this.#R&&this.#R.fill(0),this.#k=0,this.#A=0,this.#T.length=0,this.#x=0,this.#v=0,this.#j&&this.#P){const t=this.#P;let e;for(;e=t?.shift();)this.#w?.(...e)}}}const Me="object"==typeof process&&process?process:{stdout:null,stderr:null},De=u.StringDecoder,Be=Symbol("EOF"),ze=Symbol("maybeEmitEnd"),Ge=Symbol("emittedEnd"),We=Symbol("emittingEnd"),He=Symbol("emittedError"),Ve=Symbol("closed"),Ue=Symbol("read"),qe=Symbol("flush"),Ye=Symbol("flushChunk"),Ke=Symbol("encoding"),Ze=Symbol("decoder"),Je=Symbol("flowing"),Xe=Symbol("paused"),Qe=Symbol("resume"),ti=Symbol("buffer"),ei=Symbol("pipes"),ii=Symbol("bufferLength"),si=Symbol("bufferPush"),ri=Symbol("bufferShift"),ni=Symbol("objectMode"),oi=Symbol("destroyed"),ai=Symbol("error"),hi=Symbol("emitData"),li=Symbol("emitEnd"),ci=Symbol("emitEnd2"),ui=Symbol("async"),pi=Symbol("abort"),di=Symbol("aborted"),fi=Symbol("signal"),mi=t=>Promise.resolve().then(t),gi="1"!==global._MP_NO_ITERATOR_SYMBOLS_,yi=gi&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),wi=gi&&Symbol.iterator||Symbol("iterator not implemented");class bi{constructor(t,e,i){this.src=t,this.dest=e,this.opts=i,this.ondrain=()=>t[Qe](),e.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class vi extends bi{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,i){super(t,e,i),this.proxyErrors=t=>e.emit("error",t),t.on("error",this.proxyErrors)}}class xi extends c{constructor(t){super(),this[Je]=!1,this[Xe]=!1,this[ei]=[],this[ti]=[],this[ni]=t&&t.objectMode||!1,this[ni]?this[Ke]=null:this[Ke]=t&&t.encoding||null,"buffer"===this[Ke]&&(this[Ke]=null),this[ui]=t&&!!t.async||!1,this[Ze]=this[Ke]?new De(this[Ke]):null,this[Be]=!1,this[Ge]=!1,this[We]=!1,this[Ve]=!1,this[He]=null,this.writable=!0,this.readable=!0,this[ii]=0,this[oi]=!1,t&&!0===t.debugExposeBuffer&&Object.defineProperty(this,"buffer",{get:()=>this[ti]}),t&&!0===t.debugExposePipes&&Object.defineProperty(this,"pipes",{get:()=>this[ei]}),this[fi]=t&&t.signal,this[di]=!1,this[fi]&&(this[fi].addEventListener("abort",(()=>this[pi]())),this[fi].aborted&&this[pi]())}get bufferLength(){return this[ii]}get encoding(){return this[Ke]}set encoding(t){if(this[ni])throw new Error("cannot set encoding in objectMode");if(this[Ke]&&t!==this[Ke]&&(this[Ze]&&this[Ze].lastNeed||this[ii]))throw new Error("cannot change encoding");this[Ke]!==t&&(this[Ze]=t?new De(t):null,this[ti].length&&(this[ti]=this[ti].map((t=>this[Ze].write(t))))),this[Ke]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[ni]}set objectMode(t){this[ni]=this[ni]||!!t}get async(){return this[ui]}set async(t){this[ui]=this[ui]||!!t}[pi](){this[di]=!0,this.emit("abort",this[fi].reason),this.destroy(this[fi].reason)}get aborted(){return this[di]}set aborted(t){}write(t,e,i){if(this[di])return!1;if(this[Be])throw new Error("write after end");if(this[oi])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;"function"==typeof e&&(i=e,e="utf8"),e||(e="utf8");const s=this[ui]?mi:t=>t();var r;return this[ni]||Buffer.isBuffer(t)||(r=t,!Buffer.isBuffer(r)&&ArrayBuffer.isView(r)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(t=>t instanceof ArrayBuffer||"object"==typeof t&&t.constructor&&"ArrayBuffer"===t.constructor.name&&t.byteLength>=0)(t)?t=Buffer.from(t):"string"!=typeof t&&(this.objectMode=!0)),this[ni]?(this.flowing&&0!==this[ii]&&this[qe](!0),this.flowing?this.emit("data",t):this[si](t),0!==this[ii]&&this.emit("readable"),i&&s(i),this.flowing):t.length?("string"!=typeof t||e===this[Ke]&&!this[Ze].lastNeed||(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[Ke]&&(t=this[Ze].write(t)),this.flowing&&0!==this[ii]&&this[qe](!0),this.flowing?this.emit("data",t):this[si](t),0!==this[ii]&&this.emit("readable"),i&&s(i),this.flowing):(0!==this[ii]&&this.emit("readable"),i&&s(i),this.flowing)}read(t){if(this[oi])return null;if(0===this[ii]||0===t||t>this[ii])return this[ze](),null;this[ni]&&(t=null),this[ti].length>1&&!this[ni]&&(this.encoding?this[ti]=[this[ti].join("")]:this[ti]=[Buffer.concat(this[ti],this[ii])]);const e=this[Ue](t||null,this[ti][0]);return this[ze](),e}[Ue](t,e){return t===e.length||null===t?this[ri]():(this[ti][0]=e.slice(t),e=e.slice(0,t),this[ii]-=t),this.emit("data",e),this[ti].length||this[Be]||this.emit("drain"),e}end(t,e,i){return"function"==typeof t&&(i=t,t=null),"function"==typeof e&&(i=e,e="utf8"),t&&this.write(t,e),i&&this.once("end",i),this[Be]=!0,this.writable=!1,!this.flowing&&this[Xe]||this[ze](),this}[Qe](){this[oi]||(this[Xe]=!1,this[Je]=!0,this.emit("resume"),this[ti].length?this[qe]():this[Be]?this[ze]():this.emit("drain"))}resume(){return this[Qe]()}pause(){this[Je]=!1,this[Xe]=!0}get destroyed(){return this[oi]}get flowing(){return this[Je]}get paused(){return this[Xe]}[si](t){this[ni]?this[ii]+=1:this[ii]+=t.length,this[ti].push(t)}[ri](){return this[ni]?this[ii]-=1:this[ii]-=this[ti][0].length,this[ti].shift()}[qe](t){do{}while(this[Ye](this[ri]())&&this[ti].length);t||this[ti].length||this[Be]||this.emit("drain")}[Ye](t){return this.emit("data",t),this.flowing}pipe(t,e){if(this[oi])return;const i=this[Ge];return e=e||{},t===Me.stdout||t===Me.stderr?e.end=!1:e.end=!1!==e.end,e.proxyErrors=!!e.proxyErrors,i?e.end&&t.end():(this[ei].push(e.proxyErrors?new vi(this,t,e):new bi(this,t,e)),this[ui]?mi((()=>this[Qe]())):this[Qe]()),t}unpipe(t){const e=this[ei].find((e=>e.dest===t));e&&(this[ei].splice(this[ei].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){const i=super.on(t,e);return"data"!==t||this[ei].length||this.flowing?"readable"===t&&0!==this[ii]?super.emit("readable"):(t=>"end"===t||"finish"===t||"prefinish"===t)(t)&&this[Ge]?(super.emit(t),this.removeAllListeners(t)):"error"===t&&this[He]&&(this[ui]?mi((()=>e.call(this,this[He]))):e.call(this,this[He])):this[Qe](),i}get emittedEnd(){return this[Ge]}[ze](){this[We]||this[Ge]||this[oi]||0!==this[ti].length||!this[Be]||(this[We]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ve]&&this.emit("close"),this[We]=!1)}emit(t,e,...i){if("error"!==t&&"close"!==t&&t!==oi&&this[oi])return;if("data"===t)return!(!this[ni]&&!e)&&(this[ui]?mi((()=>this[hi](e))):this[hi](e));if("end"===t)return this[li]();if("close"===t){if(this[Ve]=!0,!this[Ge]&&!this[oi])return;const t=super.emit("close");return this.removeAllListeners("close"),t}if("error"===t){this[He]=e,super.emit(ai,e);const t=!(this[fi]&&!this.listeners("error").length)&&super.emit("error",e);return this[ze](),t}if("resume"===t){const t=super.emit("resume");return this[ze](),t}if("finish"===t||"prefinish"===t){const e=super.emit(t);return this.removeAllListeners(t),e}const s=super.emit(t,e,...i);return this[ze](),s}[hi](t){for(const e of this[ei])!1===e.dest.write(t)&&this.pause();const e=super.emit("data",t);return this[ze](),e}[li](){this[Ge]||(this[Ge]=!0,this.readable=!1,this[ui]?mi((()=>this[ci]())):this[ci]())}[ci](){if(this[Ze]){const t=this[Ze].end();if(t){for(const e of this[ei])e.dest.write(t);super.emit("data",t)}}for(const t of this[ei])t.end();const t=super.emit("end");return this.removeAllListeners("end"),t}collect(){const t=[];this[ni]||(t.dataLength=0);const e=this.promise();return this.on("data",(e=>{t.push(e),this[ni]||(t.dataLength+=e.length)})),e.then((()=>t))}concat(){return this[ni]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then((t=>this[ni]?Promise.reject(new Error("cannot concat in objectMode")):this[Ke]?t.join(""):Buffer.concat(t,t.dataLength)))}promise(){return new Promise(((t,e)=>{this.on(oi,(()=>e(new Error("stream destroyed")))),this.on("error",(t=>e(t))),this.on("end",(()=>t()))}))}[yi](){let t=!1;const e=()=>(this.pause(),t=!0,Promise.resolve({done:!0}));return{next:()=>{if(t)return e();const i=this.read();if(null!==i)return Promise.resolve({done:!1,value:i});if(this[Be])return e();let s=null,r=null;const n=t=>{this.removeListener("data",o),this.removeListener("end",a),this.removeListener(oi,h),e(),r(t)},o=t=>{this.removeListener("error",n),this.removeListener("end",a),this.removeListener(oi,h),this.pause(),s({value:t,done:!!this[Be]})},a=()=>{this.removeListener("error",n),this.removeListener("data",o),this.removeListener(oi,h),e(),s({done:!0})},h=()=>n(new Error("stream destroyed"));return new Promise(((t,e)=>{r=e,s=t,this.once(oi,h),this.once("error",n),this.once("end",a),this.once("data",o)}))},throw:e,return:e,[yi](){return this}}}[wi](){let t=!1;const e=()=>(this.pause(),this.removeListener(ai,e),this.removeListener(oi,e),this.removeListener("end",e),t=!0,{done:!0});return this.once("end",e),this.once(ai,e),this.once(oi,e),{next:()=>{if(t)return e();const i=this.read();return null===i?e():{value:i}},throw:e,return:e,[wi](){return this}}}destroy(t){return this[oi]?(t?this.emit("error",t):this.emit(oi),this):(this[oi]=!0,this[ti].length=0,this[ii]=0,"function"!=typeof this.close||this[Ve]||this.close(),t?this.emit("error",t):this.emit(oi),this)}static isStream(t){return!!t&&(t instanceof xi||t instanceof c||t instanceof i&&("function"==typeof t.pipe||"function"==typeof t.write&&"function"==typeof t.end))}}const Si=n.realpathSync.native,Oi={lstatSync:n.lstatSync,readdir:n.readdir,readdirSync:n.readdirSync,readlinkSync:n.readlinkSync,realpathSync:Si,promises:{lstat:l.lstat,readdir:l.readdir,readlink:l.readlink,realpath:l.realpath}},Ei=t=>t&&t!==Oi&&t!==E?{...Oi,...t,promises:{...Oi.promises,...t.promises||{}}}:Oi,_i=/^\\\\\?\\([a-z]:)\\?$/i,Ci=/[\\\/]/,ki=10,Ai=15,Ti=-16,Pi=128,Ri=256,Li=512,$i=t=>t.isFile()?8:t.isDirectory()?4:t.isSymbolicLink()?ki:t.isCharacterDevice()?2:t.isBlockDevice()?6:t.isSocket()?12:t.isFIFO()?1:0,Ni=new Map,Ii=t=>{const e=Ni.get(t);if(e)return e;const i=t.normalize("NFKD");return Ni.set(t,i),i},ji=new Map,Fi=t=>{const e=ji.get(t);if(e)return e;const i=Ii(t.toLowerCase());return ji.set(t,i),i};class Mi extends Fe{constructor(){super({max:256})}}class Di extends Fe{constructor(t=16384){super({maxSize:t,sizeCalculation:t=>t.length+1})}}class Bi{name;root;roots;parent;nocase;#tt;#et;get dev(){return this.#et}#it;get mode(){return this.#it}#st;get nlink(){return this.#st}#rt;get uid(){return this.#rt}#nt;get gid(){return this.#nt}#ot;get rdev(){return this.#ot}#at;get blksize(){return this.#at}#ht;get ino(){return this.#ht}#v;get size(){return this.#v}#lt;get blocks(){return this.#lt}#ct;get atimeMs(){return this.#ct}#ut;get mtimeMs(){return this.#ut}#pt;get ctimeMs(){return this.#pt}#dt;get birthtimeMs(){return this.#dt}#ft;get atime(){return this.#ft}#mt;get mtime(){return this.#mt}#gt;get ctime(){return this.#gt}#yt;get birthtime(){return this.#yt}#wt;#bt;#vt;#xt;#St;#Ot;#Et;#_t;#Ct;#kt;constructor(t,e=0,i,s,r,n,o){this.name=t,this.#wt=r?Fi(t):Ii(t),this.#Et=1023&e,this.nocase=r,this.roots=s,this.root=i||this,this.#_t=n,this.#vt=o.fullpath,this.#St=o.relative,this.#Ot=o.relativePosix,this.parent=o.parent,this.parent?this.#tt=this.parent.#tt:this.#tt=Ei(o.fs)}depth(){return void 0!==this.#bt?this.#bt:this.parent?this.#bt=this.parent.depth()+1:this.#bt=0}childrenCache(){return this.#_t}resolve(t){if(!t)return this;const e=this.getRootString(t),i=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#At(i):this.#At(i)}#At(t){let e=this;for(const i of t)e=e.child(i);return e}children(){const t=this.#_t.get(this);if(t)return t;const e=Object.assign([],{provisional:0});return this.#_t.set(this,e),this.#Et&=-17,e}child(t,e){if(""===t||"."===t)return this;if(".."===t)return this.parent||this;const i=this.children(),s=this.nocase?Fi(t):Ii(t);for(const t of i)if(t.#wt===s)return t;const r=this.parent?this.sep:"",n=this.#vt?this.#vt+r+t:void 0,o=this.newChild(t,0,{...e,parent:this,fullpath:n});return this.canReaddir()||(o.#Et|=Pi),i.push(o),o}relative(){if(void 0!==this.#St)return this.#St;const t=this.name,e=this.parent;if(!e)return this.#St=this.name;const i=e.relative(),s=i+(i&&e.parent?this.sep:"")+t;return this.#St=s}relativePosix(){if("/"===this.sep)return this.relative();if(void 0!==this.#Ot)return this.#Ot;const t=this.name,e=this.parent;if(!e)return this.#Ot=this.fullpathPosix();const i=e.relativePosix(),s=i+(i&&e.parent?"/":"")+t;return this.#Ot=s}fullpath(){if(void 0!==this.#vt)return this.#vt;const t=this.name,e=this.parent;if(!e)return this.#vt=this.name;const i=e.fullpath()+(e.parent?this.sep:"")+t;return this.#vt=i}fullpathPosix(){if(void 0!==this.#xt)return this.#xt;if("/"===this.sep)return this.#xt=this.fullpath();if(!this.parent){const t=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(t)?this.#xt=`//?/${t}`:this.#xt=t}const t=this.parent,e=t.fullpathPosix(),i=e+(e&&t.parent?"/":"")+this.name;return this.#xt=i}isUnknown(){return 0==(this.#Et&Ai)}isFile(){return 8==(this.#Et&Ai)}isDirectory(){return 4==(this.#Et&Ai)}isCharacterDevice(){return 2==(this.#Et&Ai)}isBlockDevice(){return 6==(this.#Et&Ai)}isFIFO(){return 1==(this.#Et&Ai)}isSocket(){return 12==(this.#Et&Ai)}isSymbolicLink(){return(this.#Et&ki)===ki}lstatCached(){return 32&this.#Et?this:void 0}readlinkCached(){return this.#Ct}realpathCached(){return this.#kt}readdirCached(){const t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#Ct)return!0;if(!this.parent)return!1;const t=this.#Et&Ai;return!(0!==t&&t!==ki||this.#Et&Ri||this.#Et&Pi)}calledReaddir(){return!!(16&this.#Et)}isENOENT(){return!!(this.#Et&Pi)}isNamed(t){return this.nocase?this.#wt===Fi(t):this.#wt===Ii(t)}async readlink(){const t=this.#Ct;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=await this.#tt.promises.readlink(this.fullpath()),e=this.parent.resolve(t);if(e)return this.#Ct=e}catch(t){return void this.#Tt(t.code)}}readlinkSync(){const t=this.#Ct;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=this.#tt.readlinkSync(this.fullpath()),e=this.parent.resolve(t);if(e)return this.#Ct=e}catch(t){return void this.#Tt(t.code)}}#Pt(t){this.#Et|=16;for(let e=t.provisional;e<t.length;e++)t[e].#Rt()}#Rt(){this.#Et&Pi||(this.#Et=(this.#Et|Pi)&Ti,this.#Lt())}#Lt(){const t=this.children();t.provisional=0;for(const e of t)e.#Rt()}#$t(){this.#Et|=Li,this.#Nt()}#Nt(){if(64&this.#Et)return;let t=this.#Et;4==(t&Ai)&&(t&=Ti),this.#Et=64|t,this.#Lt()}#It(t=""){"ENOTDIR"===t||"EPERM"===t?this.#Nt():"ENOENT"===t?this.#Rt():this.children().provisional=0}#jt(t=""){if("ENOTDIR"===t){this.parent.#Nt()}else"ENOENT"===t&&this.#Rt()}#Tt(t=""){let e=this.#Et;e|=Ri,"ENOENT"===t&&(e|=Pi),"EINVAL"!==t&&"UNKNOWN"!==t||(e&=Ti),this.#Et=e,"ENOTDIR"===t&&this.parent&&this.parent.#Nt()}#Ft(t,e){return this.#Mt(t,e)||this.#Dt(t,e)}#Dt(t,e){const i=$i(t),s=this.newChild(t.name,i,{parent:this}),r=s.#Et&Ai;return 4!==r&&r!==ki&&0!==r&&(s.#Et|=64),e.unshift(s),e.provisional++,s}#Mt(t,e){for(let i=e.provisional;i<e.length;i++){const s=e[i];if((this.nocase?Fi(t.name):Ii(t.name))===s.#wt)return this.#Bt(t,s,i,e)}}#Bt(t,e,i,s){const r=e.name;return e.#Et=e.#Et&Ti|$i(t),r!==t.name&&(e.name=t.name),i!==s.provisional&&(i===s.length-1?s.pop():s.splice(i,1),s.unshift(e)),s.provisional++,e}async lstat(){if(0==(this.#Et&Pi))try{return this.#zt(await this.#tt.promises.lstat(this.fullpath())),this}catch(t){this.#jt(t.code)}}lstatSync(){if(0==(this.#Et&Pi))try{return this.#zt(this.#tt.lstatSync(this.fullpath())),this}catch(t){this.#jt(t.code)}}#zt(t){const{atime:e,atimeMs:i,birthtime:s,birthtimeMs:r,blksize:n,blocks:o,ctime:a,ctimeMs:h,dev:l,gid:c,ino:u,mode:p,mtime:d,mtimeMs:f,nlink:m,rdev:g,size:y,uid:w}=t;this.#ft=e,this.#ct=i,this.#yt=s,this.#dt=r,this.#at=n,this.#lt=o,this.#gt=a,this.#pt=h,this.#et=l,this.#nt=c,this.#ht=u,this.#it=p,this.#mt=d,this.#ut=f,this.#st=m,this.#ot=g,this.#v=y,this.#rt=w;const b=$i(t);this.#Et=this.#Et&Ti|b|32,0!==b&&4!==b&&b!==ki&&(this.#Et|=64)}#Gt=[];#Wt=!1;#Ht(t){this.#Wt=!1;const e=this.#Gt.slice();this.#Gt.length=0,e.forEach((e=>e(null,t)))}readdirCB(t,e=!1){if(!this.canReaddir())return void(e?t(null,[]):queueMicrotask((()=>t(null,[]))));const i=this.children();if(this.calledReaddir()){const s=i.slice(0,i.provisional);return void(e?t(null,s):queueMicrotask((()=>t(null,s))))}if(this.#Gt.push(t),this.#Wt)return;this.#Wt=!0;const s=this.fullpath();this.#tt.readdir(s,{withFileTypes:!0},((t,e)=>{if(t)this.#It(t.code),i.provisional=0;else{for(const t of e)this.#Ft(t,i);this.#Pt(i)}this.#Ht(i.slice(0,i.provisional))}))}#Vt;async readdir(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();if(this.#Vt)await this.#Vt;else{let i=()=>{};this.#Vt=new Promise((t=>i=t));try{for(const i of await this.#tt.promises.readdir(e,{withFileTypes:!0}))this.#Ft(i,t);this.#Pt(t)}catch(e){this.#It(e.code),t.provisional=0}this.#Vt=void 0,i()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();try{for(const i of this.#tt.readdirSync(e,{withFileTypes:!0}))this.#Ft(i,t);this.#Pt(t)}catch(e){this.#It(e.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(704&this.#Et)return!1;const t=Ai&this.#Et;return 0===t||4===t||t===ki}shouldWalk(t,e){return 4==(4&this.#Et)&&!(704&this.#Et)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#kt)return this.#kt;if(!(896&this.#Et))try{const t=await this.#tt.promises.realpath(this.fullpath());return this.#kt=this.resolve(t)}catch(t){this.#$t()}}realpathSync(){if(this.#kt)return this.#kt;if(!(896&this.#Et))try{const t=this.#tt.realpathSync(this.fullpath());return this.#kt=this.resolve(t)}catch(t){this.#$t()}}}class zi extends Bi{sep="\\";splitSep=Ci;constructor(t,e=0,i,s,r,n,o){super(t,e,i,s,r,n,o)}newChild(t,e=0,i={}){return new zi(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(t){return r.win32.parse(t).root}getRoot(t){if((t=(t=>t.replace(/\//g,"\\").replace(_i,"$1\\"))(t.toUpperCase()))===this.root.name)return this.root;for(const[e,i]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=i;return this.roots[t]=new Hi(t,this).root}sameRoot(t,e=this.root.name){return(t=t.toUpperCase().replace(/\//g,"\\").replace(_i,"$1\\"))===e}}class Gi extends Bi{splitSep="/";sep="/";constructor(t,e=0,i,s,r,n,o){super(t,e,i,s,r,n,o)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=0,i={}){return new Gi(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}}class Wi{root;rootPath;roots;cwd;#Ut;#qt;#_t;nocase;#tt;constructor(t=process.cwd(),e,i,{nocase:s,childrenCacheSize:r=16384,fs:n=Oi}={}){this.#tt=Ei(n),(t instanceof URL||t.startsWith("file://"))&&(t=h.fileURLToPath(t));const o=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(o),this.#Ut=new Mi,this.#qt=new Mi,this.#_t=new Di(r);const a=o.substring(this.rootPath.length).split(i);if(1!==a.length||a[0]||a.pop(),void 0===s)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=s,this.root=this.newRoot(this.#tt),this.roots[this.rootPath]=this.root;let l=this.root,c=a.length-1;const u=e.sep;let p=this.rootPath,d=!1;for(const t of a){const e=c--;l=l.child(t,{relative:new Array(e).fill("..").join(u),relativePosix:new Array(e).fill("..").join("/"),fullpath:p+=(d?"":u)+t}),d=!0}this.cwd=l}depth(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#_t}resolve(...t){let e="";for(let i=t.length-1;i>=0;i--){const s=t[i];if(s&&"."!==s&&(e=e?`${s}/${e}`:s,this.isAbsolute(s)))break}const i=this.#Ut.get(e);if(void 0!==i)return i;const s=this.cwd.resolve(e).fullpath();return this.#Ut.set(e,s),s}resolvePosix(...t){let e="";for(let i=t.length-1;i>=0;i--){const s=t[i];if(s&&"."!==s&&(e=e?`${s}/${e}`:s,this.isAbsolute(s)))break}const i=this.#qt.get(e);if(void 0!==i)return i;const s=this.cwd.resolve(e).fullpathPosix();return this.#qt.set(e,s),s}relative(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t,t=this.cwd);const{withFileTypes:i}=e;if(t.canReaddir()){const e=await t.readdir();return i?e:e.map((t=>t.name))}return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t,t=this.cwd);const{withFileTypes:i=!0}=e;return t.canReaddir()?i?t.readdirSync():t.readdirSync().map((t=>t.name)):[]}async lstat(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t.withFileTypes,t=this.cwd);const i=await t.readlink();return e?i:i?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t.withFileTypes,t=this.cwd);const i=t.readlinkSync();return e?i:i?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t.withFileTypes,t=this.cwd);const i=await t.realpath();return e?i:i?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t.withFileTypes,t=this.cwd);const i=t.realpathSync();return e?i:i?.fullpath()}async walk(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:n}=e,o=[];r&&!r(t)||o.push(i?t:t.fullpath());const a=new Set,h=(t,e)=>{a.add(t),t.readdirCB(((t,l)=>{if(t)return e(t);let c=l.length;if(!c)return e();const u=()=>{0==--c&&e()};for(const t of l)r&&!r(t)||o.push(i?t:t.fullpath()),s&&t.isSymbolicLink()?t.realpath().then((t=>t?.isUnknown()?t.lstat():t)).then((t=>t?.shouldWalk(a,n)?h(t,u):u())):t.shouldWalk(a,n)?h(t,u):u()}),!0)},l=t;return new Promise(((t,e)=>{h(l,(i=>{if(i)return e(i);t(o)}))}))}walkSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:n}=e,o=[];r&&!r(t)||o.push(i?t:t.fullpath());const a=new Set([t]);for(const t of a){const e=t.readdirSync();for(const t of e){r&&!r(t)||o.push(i?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!s||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(a,n)&&a.add(e)}}return o}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:n}=e;r&&!r(t)||(yield i?t:t.fullpath());const o=new Set([t]);for(const t of o){const e=t.readdirSync();for(const t of e){r&&!r(t)||(yield i?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!s||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(o,n)&&o.add(e)}}}stream(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:n}=e,o=new xi({objectMode:!0});r&&!r(t)||o.write(i?t:t.fullpath());const a=new Set,h=[t];let l=0;const c=()=>{let t=!1;for(;!t;){const e=h.shift();if(!e)return void(0===l&&o.end());l++,a.add(e);const u=(e,d,f=!1)=>{if(e)return o.emit("error",e);if(s&&!f){const t=[];for(const e of d)e.isSymbolicLink()&&t.push(e.realpath().then((t=>t?.isUnknown()?t.lstat():t)));if(t.length)return void Promise.all(t).then((()=>u(null,d,!0)))}for(const e of d)!e||r&&!r(e)||o.write(i?e:e.fullpath())||(t=!0);l--;for(const t of d){const e=t.realpathCached()||t;e.shouldWalk(a,n)&&h.push(e)}t&&!o.flowing?o.once("drain",c):p||c()};let p=!0;e.readdirCB(u,!0),p=!1}};return c(),o}streamSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Bi||(e=t,t=this.cwd);const{withFileTypes:i=!0,follow:s=!1,filter:r,walkFilter:n}=e,o=new xi({objectMode:!0}),a=new Set;r&&!r(t)||o.write(i?t:t.fullpath());const h=[t];let l=0;const c=()=>{let t=!1;for(;!t;){const e=h.shift();if(!e)return void(0===l&&o.end());l++,a.add(e);const c=e.readdirSync();for(const e of c)r&&!r(e)||o.write(i?e:e.fullpath())||(t=!0);l--;for(const t of c){let e=t;if(t.isSymbolicLink()){if(!s||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(a,n)&&h.push(e)}}t&&!o.flowing&&o.once("drain",c)};return c(),o}}class Hi extends Wi{sep="\\";constructor(t=process.cwd(),e={}){const{nocase:i=!0}=e;super(t,r.win32,"\\",{...e,nocase:i}),this.nocase=i;for(let t=this.cwd;t;t=t.parent)t.nocase=this.nocase}parseRootPath(t){return r.win32.parse(t).root.toUpperCase()}newRoot(t){return new zi(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}}class Vi extends Wi{sep="/";constructor(t=process.cwd(),e={}){const{nocase:i=!1}=e;super(t,r.posix,"/",{...e,nocase:i}),this.nocase=i}parseRootPath(t){return"/"}newRoot(t){return new Gi(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}}class Ui extends Vi{constructor(t=process.cwd(),e={}){const{nocase:i=!0}=e;super(t,{...e,nocase:i})}}process.platform;const qi="win32"===process.platform?Hi:"darwin"===process.platform?Ui:Vi;class Yi{#Yt;#Kt;#Zt;length;#Jt;#Xt;#Qt;#te;#ee;#ie;#se=!0;constructor(t,e,i,s){if(!(t.length>=1))throw new TypeError("empty pattern list");if(!(e.length>=1))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#Yt=t,this.#Kt=e,this.#Zt=i,this.#Jt=s,0===this.#Zt)if(this.isUNC()){const[t,e,i,s,...r]=this.#Yt,[n,o,a,h,...l]=this.#Kt;""===r[0]&&(r.shift(),l.shift());const c=[t,e,i,s,""].join("/"),u=[n,o,a,h,""].join("/");this.#Yt=[c,...r],this.#Kt=[u,...l],this.length=this.#Yt.length}else if(this.isDrive()||this.isAbsolute()){const[t,...e]=this.#Yt,[i,...s]=this.#Kt;""===e[0]&&(e.shift(),s.shift());const r=t+"/",n=i+"/";this.#Yt=[r,...e],this.#Kt=[n,...s],this.length=this.#Yt.length}}pattern(){return this.#Yt[this.#Zt]}isString(){return"string"==typeof this.#Yt[this.#Zt]}isGlobstar(){return this.#Yt[this.#Zt]===Se}isRegExp(){return this.#Yt[this.#Zt]instanceof RegExp}globString(){return this.#Qt=this.#Qt||(0===this.#Zt?this.isAbsolute()?this.#Kt[0]+this.#Kt.slice(1).join("/"):this.#Kt.join("/"):this.#Kt.slice(this.#Zt).join("/"))}hasMore(){return this.length>this.#Zt+1}rest(){return void 0!==this.#Xt?this.#Xt:this.hasMore()?(this.#Xt=new Yi(this.#Yt,this.#Kt,this.#Zt+1,this.#Jt),this.#Xt.#ie=this.#ie,this.#Xt.#ee=this.#ee,this.#Xt.#te=this.#te,this.#Xt):this.#Xt=null}isUNC(){const t=this.#Yt;return void 0!==this.#ee?this.#ee:this.#ee="win32"===this.#Jt&&0===this.#Zt&&""===t[0]&&""===t[1]&&"string"==typeof t[2]&&!!t[2]&&"string"==typeof t[3]&&!!t[3]}isDrive(){const t=this.#Yt;return void 0!==this.#te?this.#te:this.#te="win32"===this.#Jt&&0===this.#Zt&&this.length>1&&"string"==typeof t[0]&&/^[a-z]:$/i.test(t[0])}isAbsolute(){const t=this.#Yt;return void 0!==this.#ie?this.#ie:this.#ie=""===t[0]&&t.length>1||this.isDrive()||this.isUNC()}root(){const t=this.#Yt[0];return"string"==typeof t&&this.isAbsolute()&&0===this.#Zt?t:""}checkFollowGlobstar(){return!(0===this.#Zt||!this.isGlobstar()||!this.#se)}markFollowGlobstar(){return!(0===this.#Zt||!this.isGlobstar()||!this.#se)&&(this.#se=!1,!0)}}const Ki="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";class Zi{relative;relativeChildren;absolute;absoluteChildren;constructor(t,{nobrace:e,nocase:i,noext:s,noglobstar:r,platform:n=Ki}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];const o={dot:!0,nobrace:e,nocase:i,noext:s,noglobstar:r,optimizationLevel:2,platform:n,nocomment:!0,nonegate:!0};for(const e of t){const t=new Ce(e,o);for(let e=0;e<t.set.length;e++){const i=t.set[e],s=t.globParts[e],r=new Yi(i,s,0,n),a=new Ce(r.globString(),o),h="**"===s[s.length-1],l=r.isAbsolute();l?this.absolute.push(a):this.relative.push(a),h&&(l?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}}ignored(t){const e=t.fullpath(),i=`${e}/`,s=t.relative()||".",r=`${s}/`;for(const t of this.relative)if(t.match(s)||t.match(r))return!0;for(const t of this.absolute)if(t.match(e)||t.match(i))return!0;return!1}childrenIgnored(t){const e=t.fullpath()+"/",i=(t.relative()||".")+"/";for(const t of this.relativeChildren)if(t.match(i))return!0;for(const t of this.absoluteChildren)t.match(e);return!1}}class Ji{store;constructor(t=new Map){this.store=t}copy(){return new Ji(new Map(this.store))}hasWalked(t,e){return this.store.get(t.fullpath())?.has(e.globString())}storeWalked(t,e){const i=t.fullpath(),s=this.store.get(i);s?s.add(e.globString()):this.store.set(i,new Set([e.globString()]))}}class Xi{store=new Map;add(t,e,i){const s=(e?2:0)|(i?1:0),r=this.store.get(t);this.store.set(t,void 0===r?s:s&r)}entries(){return[...this.store.entries()].map((([t,e])=>[t,!!(2&e),!!(1&e)]))}}class Qi{store=new Map;add(t,e){if(!t.canReaddir())return;const i=this.store.get(t);i?i.find((t=>t.globString()===e.globString()))||i.push(e):this.store.set(t,[e])}get(t){const e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map((t=>[t,this.store.get(t)]))}keys(){return[...this.store.keys()].filter((t=>t.canReaddir()))}}class ts{hasWalkedCache;matches=new Xi;subwalks=new Qi;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new Ji}processPatterns(t,e){this.patterns=e;const i=e.map((e=>[t,e]));for(let[t,e]of i){this.hasWalkedCache.storeWalked(t,e);const i=e.root(),s=e.isAbsolute()&&!1!==this.opts.absolute;if(i){t=t.resolve("/"===i&&void 0!==this.opts.root?this.opts.root:i);const s=e.rest();if(!s){this.matches.add(t,!0,!1);continue}e=s}if(t.isENOENT())continue;let r,n,o=!1;for(;"string"==typeof(r=e.pattern())&&(n=e.rest());){const i=t.resolve(r);if(i.isUnknown()&&".."!==r)break;t=i,e=n,o=!0}if(r=e.pattern(),n=e.rest(),o){if(this.hasWalkedCache.hasWalked(t,e))continue;this.hasWalkedCache.storeWalked(t,e)}if("string"!=typeof r)if(r===Se){(!t.isSymbolicLink()||this.follow||e.checkFollowGlobstar())&&this.subwalks.add(t,e);const i=n?.pattern(),r=n?.rest();if(n&&(""!==i&&"."!==i||r)){if(".."===i){const e=t.parent||t;r?this.hasWalkedCache.hasWalked(e,r)||this.subwalks.add(e,r):this.matches.add(e,s,!0)}}else this.matches.add(t,s,""===i||"."===i)}else r instanceof RegExp&&this.subwalks.add(t,e);else if(n)this.subwalks.add(t,e);else{const e=".."===r||""===r||"."===r;this.matches.add(t.resolve(r),s,e)}}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new ts(this.opts,this.hasWalkedCache)}filterEntries(t,e){const i=this.subwalks.get(t),s=this.child();for(const t of e)for(const e of i){const i=e.isAbsolute(),r=e.pattern(),n=e.rest();r===Se?s.testGlobstar(t,e,n,i):r instanceof RegExp?s.testRegExp(t,r,n,i):s.testString(t,r,n,i)}return s}testGlobstar(t,e,i,s){if(!this.dot&&t.name.startsWith(".")||(e.hasMore()||this.matches.add(t,s,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(i&&e.checkFollowGlobstar()?this.subwalks.add(t,i):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),i){const e=i.pattern();if("string"==typeof e&&".."!==e&&""!==e&&"."!==e)this.testString(t,e,i.rest(),s);else if(".."===e){const e=t.parent||t;this.subwalks.add(e,i)}else e instanceof RegExp&&this.testRegExp(t,e,i.rest(),s)}}testRegExp(t,e,i,s){e.test(t.name)&&(i?this.subwalks.add(t,i):this.matches.add(t,s,!1))}testString(t,e,i,s){t.isNamed(e)&&(i?this.subwalks.add(t,i):this.matches.add(t,s,!1))}}class es{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#re=[];#ne;#oe;signal;maxDepth;constructor(t,e,i){this.patterns=t,this.path=e,this.opts=i,this.#oe=i.posix||"win32"!==i.platform?"/":"\\",i.ignore&&(this.#ne=((t,e)=>"string"==typeof t?new Zi([t],e):Array.isArray(t)?new Zi(t,e):t)(i.ignore,i)),this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",(()=>{this.#re.length=0})))}#ae(t){return this.seen.has(t)||!!this.#ne?.ignored?.(t)}#he(t){return!!this.#ne?.childrenIgnored?.(t)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;let t;for(this.paused=!1;!this.paused&&(t=this.#re.shift());)t()}onResume(t){this.signal?.aborted||(this.paused?this.#re.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||await t.realpath(),!i)return;t=i}const s=t.isUnknown()||this.opts.stat;return this.matchCheckTest(s?await t.lstat():t,e)}matchCheckTest(t,e){return!t||!(this.maxDepth===1/0||t.depth()<=this.maxDepth)||e&&!t.canReaddir()||this.opts.nodir&&t.isDirectory()||this.#ae(t)?void 0:t}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||t.realpathSync(),!i)return;t=i}const s=t.isUnknown()||this.opts.stat;return this.matchCheckTest(s?t.lstatSync():t,e)}matchFinish(t,e){if(this.#ae(t))return;const i=void 0===this.opts.absolute?e:this.opts.absolute;this.seen.add(t);const s=this.opts.mark&&t.isDirectory()?this.#oe:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(i){const e=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(e+s)}else{const e=this.opts.posix?t.relativePosix():t.relative(),i=this.opts.dotRelative&&!e.startsWith(".."+this.#oe)?"."+this.#oe:"";this.matchEmit(e?i+e+s:"."+s)}}async match(t,e,i){const s=await this.matchCheck(t,i);s&&this.matchFinish(s,e)}matchSync(t,e,i){const s=this.matchCheckSync(t,i);s&&this.matchFinish(s,e)}walkCB(t,e,i){this.signal?.aborted&&i(),this.walkCB2(t,e,new ts(this.opts),i)}walkCB2(t,e,i,s){if(this.#he(t))return s();if(this.signal?.aborted&&s(),this.paused)return void this.onResume((()=>this.walkCB2(t,e,i,s)));i.processPatterns(t,e);let r=1;const n=()=>{0==--r&&s()};for(const[t,e,s]of i.matches.entries())this.#ae(t)||(r++,this.match(t,e,s).then((()=>n())));for(const t of i.subwalkTargets()){if(this.maxDepth!==1/0&&t.depth()>=this.maxDepth)continue;r++;const e=t.readdirCached();t.calledReaddir()?this.walkCB3(t,e,i,n):t.readdirCB(((e,s)=>this.walkCB3(t,s,i,n)),!0)}n()}walkCB3(t,e,i,s){i=i.filterEntries(t,e);let r=1;const n=()=>{0==--r&&s()};for(const[t,e,s]of i.matches.entries())this.#ae(t)||(r++,this.match(t,e,s).then((()=>n())));for(const[t,e]of i.subwalks.entries())r++,this.walkCB2(t,e,i.child(),n);n()}walkCBSync(t,e,i){this.signal?.aborted&&i(),this.walkCB2Sync(t,e,new ts(this.opts),i)}walkCB2Sync(t,e,i,s){if(this.#he(t))return s();if(this.signal?.aborted&&s(),this.paused)return void this.onResume((()=>this.walkCB2Sync(t,e,i,s)));i.processPatterns(t,e);let r=1;const n=()=>{0==--r&&s()};for(const[t,e,s]of i.matches.entries())this.#ae(t)||this.matchSync(t,e,s);for(const t of i.subwalkTargets()){if(this.maxDepth!==1/0&&t.depth()>=this.maxDepth)continue;r++;const e=t.readdirSync();this.walkCB3Sync(t,e,i,n)}n()}walkCB3Sync(t,e,i,s){i=i.filterEntries(t,e);let r=1;const n=()=>{0==--r&&s()};for(const[t,e,s]of i.matches.entries())this.#ae(t)||this.matchSync(t,e,s);for(const[t,e]of i.subwalks.entries())r++,this.walkCB2Sync(t,e,i.child(),n);n()}}class is extends es{matches;constructor(t,e,i){super(t,e,i),this.matches=new Set}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise(((t,e)=>{this.walkCB(this.path,this.patterns,(()=>{this.signal?.aborted?e(this.signal.reason):t(this.matches)}))})),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>{if(this.signal?.aborted)throw this.signal.reason})),this.matches}}class ss extends es{results;constructor(t,e,i){super(t,e,i),this.results=new xi({signal:this.signal,objectMode:!0}),this.results.on("drain",(()=>this.resume())),this.results.on("resume",(()=>this.resume()))}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){const t=this.path;return t.isUnknown()?t.lstat().then((()=>{this.walkCB(t,this.patterns,(()=>this.results.end()))})):this.walkCB(t,this.patterns,(()=>this.results.end())),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>this.results.end())),this.results}}const rs="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";class ns{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(t,e){if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=h.fileURLToPath(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth="number"==typeof e.maxDepth?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&void 0!==this.absolute)throw new Error("cannot set absolute and withFileTypes:true");if("string"==typeof t&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||!1===e.allowWindowsEscape,this.windowsPathsNoEscape&&(t=t.map((t=>t.replace(/\\/g,"/")))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map((t=>t.includes("/")?t:`./**/${t}`))}if(this.pattern=t,this.platform=e.platform||rs,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,void 0!==e.nocase&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{const t="win32"===e.platform?Hi:"darwin"===e.platform?Ui:e.platform?Vi:qi;this.scurry=new t(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;const i={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:!0,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map((t=>new Ce(t,i))),[r,n]=s.reduce(((t,e)=>(t[0].push(...e.set),t[1].push(...e.globParts),t)),[[],[]]);this.patterns=r.map(((t,e)=>new Yi(t,n[e],0,this.platform)))}async walk(){return[...await new is(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new is(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new ss(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new ss(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}function os(t,e={}){return new ns(t,e).streamSync()}function as(t,e={}){return new ns(t,e).stream()}function hs(t,e={}){return new ns(t,e).walkSync()}async function ls(t,e={}){return new ns(t,e).walk()}function cs(t,e={}){return new ns(t,e).iterateSync()}function us(t,e={}){return new ns(t,e).iterate()}const ps=os,ds=Object.assign(as,{sync:os}),fs=cs,ms=Object.assign(us,{sync:cs}),gs=Object.assign(hs,{stream:os,iterate:cs}),ys=Object.assign(ls,{glob:ls,globSync:hs,sync:gs,globStream:as,stream:ds,globStreamSync:os,streamSync:ps,globIterate:us,iterate:ms,globIterateSync:cs,iterateSync:fs,Glob:ns,hasMagic:(t,e={})=>{Array.isArray(t)||(t=[t]);for(const i of t)if(new Ce(i,e).hasMagic())return!0;return!1},escape:Qt,unescape:Gt});ys.glob=ys;const ws={chmod:(t,e)=>new Promise(((i,s)=>n.chmod(t,e,((t,...e)=>t?s(t):i(...e))))),mkdir:(t,e)=>new Promise(((i,s)=>n.mkdir(t,e,((t,e)=>t?s(t):i(e))))),readdir:t=>new Promise(((e,i)=>n.readdir(t,{withFileTypes:!0},((t,s)=>t?i(t):e(s))))),rename:(t,e)=>new Promise(((i,s)=>n.rename(t,e,((t,...e)=>t?s(t):i(...e))))),rm:(t,e)=>new Promise(((i,s)=>n.rm(t,e,((t,...e)=>t?s(t):i(...e))))),rmdir:t=>new Promise(((e,i)=>n.rmdir(t,((t,...s)=>t?i(t):e(...s))))),stat:t=>new Promise(((e,i)=>n.stat(t,((t,s)=>t?i(t):e(s))))),lstat:t=>new Promise(((e,i)=>n.lstat(t,((t,s)=>t?i(t):e(s))))),unlink:t=>new Promise(((e,i)=>n.unlink(t,((t,...s)=>t?i(t):e(...s)))))},{readdir:bs}=ws,vs=t=>bs(t).catch((t=>t)),xs=t=>{try{return(t=>n.readdirSync(t,{withFileTypes:!0}))(t)}catch(t){return t}},Ss=async t=>t.catch((t=>{if("ENOENT"!==t.code)throw t})),Os=t=>{try{return t()}catch(t){if("ENOENT"!==t?.code)throw t}},{lstat:Es,rmdir:_s,unlink:Cs}=ws,ks=async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await Ts(t,e,await Es(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},As=(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return Ps(t,e,n.lstatSync(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},Ts=async(t,e,i)=>{if(e?.signal?.aborted)throw e.signal.reason;const s=i.isDirectory()?await vs(t):null;if(!Array.isArray(s)){if(s){if("ENOENT"===s.code)return!0;if("ENOTDIR"!==s.code)throw s}return!(e.filter&&!await e.filter(t,i))&&(await Ss(Cs(t)),!0)}const n=(await Promise.all(s.map((i=>Ts(r.resolve(t,i.name),e,i))))).reduce(((t,e)=>t&&e),!0);return!!n&&((!1!==e.preserveRoot||t!==r.parse(t).root)&&(!(e.filter&&!await e.filter(t,i))&&(await Ss(_s(t)),!0)))},Ps=(t,e,i)=>{if(e?.signal?.aborted)throw e.signal.reason;const s=i.isDirectory()?xs(t):null;if(!Array.isArray(s)){if(s){if("ENOENT"===s.code)return!0;if("ENOTDIR"!==s.code)throw s}return!(e.filter&&!e.filter(t,i))&&(Os((()=>n.unlinkSync(t))),!0)}let o=!0;for(const i of s){const s=r.resolve(t,i.name);o=Ps(s,e,i)&&o}return(!1!==e.preserveRoot||t!==r.parse(t).root)&&(!!o&&(!(e.filter&&!e.filter(t,i))&&(Os((()=>n.rmdirSync(t))),!0)))},{chmod:Rs}=ws,Ls=t=>async e=>{try{return await t(e)}catch(i){const s=i;if("ENOENT"===s?.code)return;if("EPERM"===s?.code){try{await Rs(e,438)}catch(t){const e=t;if("ENOENT"===e?.code)return;throw i}return await t(e)}throw i}},$s=t=>e=>{try{return t(e)}catch(i){const s=i;if("ENOENT"===s?.code)return;if("EPERM"===s?.code){try{n.chmodSync(e,438)}catch(t){const e=t;if("ENOENT"===e?.code)return;throw i}return t(e)}throw i}},Ns=new Set(["EMFILE","ENFILE","EBUSY"]),Is=t=>{const e=async(i,s,r=1,n=0)=>{const o=s.maxBackoff||200,a=s.backoff||1.2,h=s.maxRetries||10;let l=0;for(;;)try{return await t(i)}catch(t){const c=t;if(c?.path===i&&c?.code&&Ns.has(c.code)){if(r=Math.ceil(r*a),(n=r+n)<o)return new Promise(((t,o)=>{setTimeout((()=>{e(i,s,r,n).then(t,o)}),r)}));if(l<h){l++;continue}}throw t}};return e},js=t=>(e,i)=>{const s=i.maxRetries||10;let r=0;for(;;)try{return t(e)}catch(t){const i=t;if(i?.path===e&&i?.code&&Ns.has(i.code)&&r<s){r++;continue}throw t}},{stat:Fs}=ws,Ms="win32"===mt?async t=>{const{root:e}=r.parse(t),i=p.tmpdir(),{root:s}=r.parse(i);if(e.toLowerCase()===s.toLowerCase())return i;const n=r.resolve(e,"/temp");return await(t=>Fs(t).then((t=>t.isDirectory()),(()=>!1)))(n)?n:e}:async()=>p.tmpdir(),Ds="win32"===mt?t=>{const{root:e}=r.parse(t),i=p.tmpdir(),{root:s}=r.parse(i);if(e.toLowerCase()===s.toLowerCase())return i;const o=r.resolve(e,"/temp");return(t=>{try{return n.statSync(t).isDirectory()}catch(t){return!1}})(o)?o:e}:()=>p.tmpdir(),{lstat:Bs,rename:zs,unlink:Gs,rmdir:Ws,chmod:Hs}=ws,Vs=t=>`.${r.basename(t)}.${Math.random()}`,Us=async t=>Gs(t).catch((e=>{if("EPERM"===e.code)return Hs(t,438).then((()=>Gs(t)),(t=>{if("ENOENT"!==t.code)throw e}));if("ENOENT"!==e.code)throw e})),qs=t=>{try{n.unlinkSync(t)}catch(e){if("EPERM"===e?.code)try{return n.chmodSync(t,438)}catch(t){if("ENOENT"===t?.code)return;throw e}else if("ENOENT"===e?.code)return;throw e}},Ys=async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await Ks(t,e,await Bs(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},Ks=async(t,e,i)=>{if(e?.signal?.aborted)throw e.signal.reason;if(!e.tmp)return Ks(t,{...e,tmp:await Ms(t)},i);if(t===e.tmp&&r.parse(t).root!==t)throw new Error("cannot delete temp directory used for deletion");const s=i.isDirectory()?await vs(t):null;if(!Array.isArray(s)){if(s){if("ENOENT"===s.code)return!0;if("ENOTDIR"!==s.code)throw s}return!(e.filter&&!await e.filter(t,i))&&(await Ss(Zs(t,e.tmp,Us)),!0)}const n=(await Promise.all(s.map((i=>Ks(r.resolve(t,i.name),e,i))))).reduce(((t,e)=>t&&e),!0);return!!n&&((!1!==e.preserveRoot||t!==r.parse(t).root)&&(!(e.filter&&!await e.filter(t,i))&&(await Ss(Zs(t,e.tmp,Ws)),!0)))},Zs=async(t,e,i)=>{const s=r.resolve(e,Vs(t));return await zs(t,s),await i(s)},Js=(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return Xs(t,e,n.lstatSync(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},Xs=(t,e,i)=>{if(e?.signal?.aborted)throw e.signal.reason;if(!e.tmp)return Xs(t,{...e,tmp:Ds(t)},i);const s=e.tmp;if(t===e.tmp&&r.parse(t).root!==t)throw new Error("cannot delete temp directory used for deletion");const o=i.isDirectory()?xs(t):null;if(!Array.isArray(o)){if(o){if("ENOENT"===o.code)return!0;if("ENOTDIR"!==o.code)throw o}return!(e.filter&&!e.filter(t,i))&&(Os((()=>Qs(t,s,qs))),!0)}let a=!0;for(const i of o){const s=r.resolve(t,i.name);a=Xs(s,e,i)&&a}return!!a&&((!1!==e.preserveRoot||t!==r.parse(t).root)&&(!(e.filter&&!e.filter(t,i))&&(Os((()=>Qs(t,s,n.rmdirSync))),!0)))},Qs=(t,e,i)=>{const s=r.resolve(e,Vs(t));return n.renameSync(t,s),i(s)},{unlink:tr,rmdir:er,lstat:ir}=ws,sr=Is(Ls(tr)),rr=js($s(n.unlinkSync)),nr=Is(Ls(er)),or=js($s(n.rmdirSync)),ar=Symbol("start"),hr=Symbol("child"),lr=Symbol("finish"),cr=async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await pr(t,e,await ir(t),ar)}catch(t){if("ENOENT"===t?.code)return!0;throw t}},ur=(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return dr(t,e,n.lstatSync(t),ar)}catch(t){if("ENOENT"===t?.code)return!0;throw t}},pr=async(t,e,i,s=ar)=>{if(e?.signal?.aborted)throw e.signal.reason;const n=i.isDirectory()?await vs(t):null;if(!Array.isArray(n)){if(n){if("ENOENT"===n.code)return!0;if("ENOTDIR"!==n.code)throw n}return!(e.filter&&!await e.filter(t,i))&&(await Ss(sr(t,e)),!0)}const o=s===ar?hr:s,a=(await Promise.all(n.map((i=>pr(r.resolve(t,i.name),e,i,o))))).reduce(((t,e)=>t&&e),!0);if(s===ar)return pr(t,e,i,lr);if(s===lr){if(!1===e.preserveRoot&&t===r.parse(t).root)return!1;if(!a)return!1;if(e.filter&&!await e.filter(t,i))return!1;await Ss((async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;const{filter:i,...s}=e;try{return await nr(t,s)}catch(e){if("ENOTEMPTY"===e?.code)return await Ys(t,s);throw e}})(t,e))}return!0},dr=(t,e,i,s=ar)=>{const n=i.isDirectory()?xs(t):null;if(!Array.isArray(n)){if(n){if("ENOENT"===n.code)return!0;if("ENOTDIR"!==n.code)throw n}return!(e.filter&&!e.filter(t,i))&&(Os((()=>rr(t,e))),!0)}let o=!0;for(const i of n){const n=s===ar?hr:s,a=r.resolve(t,i.name);o=dr(a,e,i,n)&&o}if(s===ar)return dr(t,e,i,lr);if(s===lr){if(!1===e.preserveRoot&&t===r.parse(t).root)return!1;if(!o)return!1;if(e.filter&&!e.filter(t,i))return!1;Os((()=>{((t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;const{filter:i,...s}=e;try{return or(t,s)}catch(e){const i=e;if("ENOTEMPTY"===i?.code)return Js(t,s);throw e}})(t,e)}))}return!0},fr="win32"===mt?cr:ks,mr="win32"===mt?ur:As,{rm:gr}=ws,yr=async(t,e)=>(await gr(t,{...e,force:!0,recursive:!0}),!0),wr=(t,e)=>(n.rmSync(t,{...e,force:!0,recursive:!0}),!0),br=(process.env.__TESTING_RIMRAF_NODE_VERSION__||process.version).replace(/^v/,"").split("."),vr=+br[0]>14||14==+br[0]&&+br[1]>=14,xr=vr&&"win32"!==mt?t=>!t?.signal&&!t?.filter:()=>!1,Sr=vr&&"win32"!==mt?t=>!t?.signal&&!t?.filter:()=>!1,Or=(t,e)=>void 0===t||typeof t===e,Er=t=>{if(!(t=>!!t&&"object"==typeof t&&Or(t.preserveRoot,"boolean")&&Or(t.tmp,"string")&&Or(t.maxRetries,"number")&&Or(t.retryDelay,"number")&&Or(t.backoff,"number")&&Or(t.maxBackoff,"number")&&(Or(t.glob,"boolean")||t.glob&&"object"==typeof t.glob)&&Or(t.filter,"function"))(t))throw new Error("invalid rimraf options")},_r=t=>async(e,i)=>{const s=((t={})=>ft(t))(i);return s.glob&&(e=await ys(e,s.glob)),Array.isArray(e)?!!(await Promise.all(e.map((e=>t(gt(e,s),s))))).reduce(((t,e)=>t&&e),!0):!!await t(gt(e,s),s)},Cr=t=>(e,i)=>{const s=((t={})=>ft(t))(i);return s.glob&&(e=hs(e,s.glob)),Array.isArray(e)?!!e.map((e=>t(gt(e,s),s))).reduce(((t,e)=>t&&e),!0):!!t(gt(e,s),s)},kr=Cr(wr),Ar=Object.assign(_r(yr),{sync:kr}),Tr=Cr(mr),Pr=Object.assign(_r(fr),{sync:Tr}),Rr=Cr(ur),Lr=Object.assign(_r(cr),{sync:Rr}),$r=Cr(As),Nr=Object.assign(_r(ks),{sync:$r}),Ir=Cr(Js),jr=Object.assign(_r(Ys),{sync:Ir}),Fr=Cr(((t,e)=>Sr(e)?wr(t,e):mr(t,e))),Mr=_r(((t,e)=>xr(e)?yr(t,e):fr(t,e))),Dr=Object.assign(Mr,{rimraf:Mr,sync:Fr,rimrafSync:Fr,manual:Pr,manualSync:Tr,native:Ar,nativeSync:kr,posix:Nr,posixSync:$r,windows:Lr,windowsSync:Rr,moveRemove:jr,moveRemoveSync:Ir});Dr.rimraf=Dr;var Br,zr={},Gr={exports:{}},Wr={exports:{}};const Hr=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,Vr=()=>{const t={enabled:"undefined"!=typeof process&&"0"!==process.env.FORCE_COLOR,visible:!0,styles:{},keys:{}},e=(t,e,i)=>"function"==typeof t?t(e):t.wrap(e,i),i=(i,s)=>{if(""===i||null==i)return"";if(!1===t.enabled)return i;if(!1===t.visible)return"";let r=""+i,n=r.includes("\n"),o=s.length;for(o>0&&s.includes("unstyle")&&(s=[...new Set(["unstyle",...s])].reverse());o-- >0;)r=e(t.styles[s[o]],r,n);return r},s=(e,s,r)=>{t.styles[e]=(t=>{let e=t.open=`[${t.codes[0]}m`,i=t.close=`[${t.codes[1]}m`,s=t.regex=new RegExp(`\\u001b\\[${t.codes[1]}m`,"g");return t.wrap=(t,r)=>{t.includes(i)&&(t=t.replace(s,i+e));let n=e+t+i;return r?n.replace(/\r*\n/g,`${i}$&${e}`):n},t})({name:e,codes:s}),(t.keys[r]||(t.keys[r]=[])).push(e),Reflect.defineProperty(t,e,{configurable:!0,enumerable:!0,set(i){t.alias(e,i)},get(){let s=t=>i(t,s.stack);return Reflect.setPrototypeOf(s,t),s.stack=this.stack?this.stack.concat(e):[e],s}})};return s("reset",[0,0],"modifier"),s("bold",[1,22],"modifier"),s("dim",[2,22],"modifier"),s("italic",[3,23],"modifier"),s("underline",[4,24],"modifier"),s("inverse",[7,27],"modifier"),s("hidden",[8,28],"modifier"),s("strikethrough",[9,29],"modifier"),s("black",[30,39],"color"),s("red",[31,39],"color"),s("green",[32,39],"color"),s("yellow",[33,39],"color"),s("blue",[34,39],"color"),s("magenta",[35,39],"color"),s("cyan",[36,39],"color"),s("white",[37,39],"color"),s("gray",[90,39],"color"),s("grey",[90,39],"color"),s("bgBlack",[40,49],"bg"),s("bgRed",[41,49],"bg"),s("bgGreen",[42,49],"bg"),s("bgYellow",[43,49],"bg"),s("bgBlue",[44,49],"bg"),s("bgMagenta",[45,49],"bg"),s("bgCyan",[46,49],"bg"),s("bgWhite",[47,49],"bg"),s("blackBright",[90,39],"bright"),s("redBright",[91,39],"bright"),s("greenBright",[92,39],"bright"),s("yellowBright",[93,39],"bright"),s("blueBright",[94,39],"bright"),s("magentaBright",[95,39],"bright"),s("cyanBright",[96,39],"bright"),s("whiteBright",[97,39],"bright"),s("bgBlackBright",[100,49],"bgBright"),s("bgRedBright",[101,49],"bgBright"),s("bgGreenBright",[102,49],"bgBright"),s("bgYellowBright",[103,49],"bgBright"),s("bgBlueBright",[104,49],"bgBright"),s("bgMagentaBright",[105,49],"bgBright"),s("bgCyanBright",[106,49],"bgBright"),s("bgWhiteBright",[107,49],"bgBright"),t.ansiRegex=Hr,t.hasColor=t.hasAnsi=e=>(t.ansiRegex.lastIndex=0,"string"==typeof e&&""!==e&&t.ansiRegex.test(e)),t.alias=(e,s)=>{let r="string"==typeof s?t[s]:s;if("function"!=typeof r)throw new TypeError("Expected alias to be the name of an existing color (string) or a function");r.stack||(Reflect.defineProperty(r,"name",{value:e}),t.styles[e]=r,r.stack=[e]),Reflect.defineProperty(t,e,{configurable:!0,enumerable:!0,set(i){t.alias(e,i)},get(){let e=t=>i(t,e.stack);return Reflect.setPrototypeOf(e,t),e.stack=this.stack?this.stack.concat(r.stack):r.stack,e}})},t.theme=e=>{if(null===(i=e)||"object"!=typeof i||Array.isArray(i))throw new TypeError("Expected theme to be an object");var i;for(let i of Object.keys(e))t.alias(i,e[i]);return t},t.alias("unstyle",(e=>"string"==typeof e&&""!==e?(t.ansiRegex.lastIndex=0,e.replace(t.ansiRegex,"")):"")),t.alias("noop",(t=>t)),t.none=t.clear=t.noop,t.stripColor=t.unstyle,t.symbols=(Br||(Br=1,function(t){const e="undefined"!=typeof process&&"Hyper"===process.env.TERM_PROGRAM,i="undefined"!=typeof process&&"win32"===process.platform,s="undefined"!=typeof process&&"linux"===process.platform,r={ballotDisabled:"☒",ballotOff:"☐",ballotOn:"☑",bullet:"•",bulletWhite:"◦",fullBlock:"█",heart:"❤",identicalTo:"≡",line:"─",mark:"※",middot:"·",minus:"－",multiplication:"×",obelus:"÷",pencilDownRight:"✎",pencilRight:"✏",pencilUpRight:"✐",percent:"%",pilcrow2:"❡",pilcrow:"¶",plusMinus:"±",question:"?",section:"§",starsOff:"☆",starsOn:"★",upDownArrow:"↕"},n=Object.assign({},r,{check:"√",cross:"×",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"»",radioOff:"( )",radioOn:"(*)",warning:"‼"}),o=Object.assign({},r,{ballotCross:"✘",check:"✔",cross:"✖",ellipsisLarge:"⋯",ellipsis:"…",info:"ℹ",questionFull:"？",questionSmall:"﹖",pointer:s?"▸":"❯",pointerSmall:s?"‣":"›",radioOff:"◯",radioOn:"◉",warning:"⚠"});t.exports=i&&!e?n:o,Reflect.defineProperty(t.exports,"common",{enumerable:!1,value:r}),Reflect.defineProperty(t.exports,"windows",{enumerable:!1,value:n}),Reflect.defineProperty(t.exports,"other",{enumerable:!1,value:o})}(Wr)),Wr.exports),t.define=s,t};Gr.exports=Vr(),Gr.exports.create=Vr;var Ur=Gr.exports;!function(t){const e=Object.prototype.toString,i=Ur;let s=!1,r=[];const n={yellow:"blue",cyan:"red",green:"magenta",black:"white",blue:"yellow",red:"cyan",magenta:"green",white:"black"};t.longest=(t,e)=>t.reduce(((t,i)=>Math.max(t,e?i[e].length:i.length)),0),t.hasColor=t=>!!t&&i.hasColor(t);const o=t.isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t);t.nativeType=t=>e.call(t).slice(8,-1).toLowerCase().replace(/\s/g,""),t.isAsyncFn=e=>"asyncfunction"===t.nativeType(e),t.isPrimitive=t=>null!=t&&"object"!=typeof t&&"function"!=typeof t,t.resolve=(t,e,...i)=>"function"==typeof e?e.call(t,...i):e,t.scrollDown=(t=[])=>[...t.slice(1),t[0]],t.scrollUp=(t=[])=>[t.pop(),...t],t.reorder=(t=[])=>{let e=t.slice();return e.sort(((t,e)=>t.index>e.index?1:t.index<e.index?-1:0)),e},t.swap=(t,e,i)=>{let s=t.length,r=i===s?0:i<0?s-1:i,n=t[e];t[e]=t[r],t[r]=n},t.width=(t,e=80)=>{let i=t&&t.columns?t.columns:e;return t&&"function"==typeof t.getWindowSize&&(i=t.getWindowSize()[0]),"win32"===process.platform?i-1:i},t.height=(t,e=20)=>{let i=t&&t.rows?t.rows:e;return t&&"function"==typeof t.getWindowSize&&(i=t.getWindowSize()[1]),i},t.wordWrap=(t,e={})=>{if(!t)return t;"number"==typeof e&&(e={width:e});let{indent:i="",newline:s="\n"+i,width:r=80}=e,n=(s+i).match(/[^\S\n]/g)||[];r-=n.length;let o=`.{1,${r}}([\\s\\u200B]+|$)|[^\\s\\u200B]+?([\\s\\u200B]+|$)`,a=t.trim(),h=new RegExp(o,"g"),l=a.match(h)||[];return l=l.map((t=>t.replace(/\n$/,""))),e.padEnd&&(l=l.map((t=>t.padEnd(r," ")))),e.padStart&&(l=l.map((t=>t.padStart(r," ")))),i+l.join(s)},t.unmute=t=>{let e=t.stack.find((t=>i.keys.color.includes(t)));return e?i[e]:t.stack.find((t=>"bg"===t.slice(2)))?i[e.slice(2)]:t=>t},t.pascal=t=>t?t[0].toUpperCase()+t.slice(1):"",t.inverse=e=>{if(!e||!e.stack)return e;let s=e.stack.find((t=>i.keys.color.includes(t)));if(s){let r=i["bg"+t.pascal(s)];return r?r.black:e}let r=e.stack.find((t=>"bg"===t.slice(0,2)));return r?i[r.slice(2).toLowerCase()]||e:i.none},t.complement=e=>{if(!e||!e.stack)return e;let s=e.stack.find((t=>i.keys.color.includes(t))),r=e.stack.find((t=>"bg"===t.slice(0,2)));if(s&&!r)return i[n[s]||s];if(r){let s=r.slice(2).toLowerCase(),o=n[s];return o&&i["bg"+t.pascal(o)]||e}return i.none},t.meridiem=t=>{let e=t.getHours(),i=t.getMinutes(),s=e>=12?"pm":"am";return e%=12,(0===e?12:e)+":"+(i<10?"0"+i:i)+" "+s},t.set=(e={},i="",s)=>i.split(".").reduce(((e,i,r,n)=>{let o=n.length-1>r?e[i]||{}:s;return!t.isObject(o)&&r<n.length-1&&(o={}),e[i]=o}),e),t.get=(t={},e="",i)=>{let s=null==t[e]?e.split(".").reduce(((t,e)=>t&&t[e]),t):t[e];return null==s?i:s},t.mixin=(e,i)=>{if(!o(e))return i;if(!o(i))return e;for(let s of Object.keys(i)){let r=Object.getOwnPropertyDescriptor(i,s);if(r.hasOwnProperty("value"))if(e.hasOwnProperty(s)&&o(r.value)){let n=Object.getOwnPropertyDescriptor(e,s);o(n.value)?e[s]=t.merge({},e[s],i[s]):Reflect.defineProperty(e,s,r)}else Reflect.defineProperty(e,s,r);else Reflect.defineProperty(e,s,r)}return e},t.merge=(...e)=>{let i={};for(let s of e)t.mixin(i,s);return i},t.mixinEmitter=(e,i)=>{let s=i.constructor.prototype;for(let r of Object.keys(s)){let n=s[r];"function"==typeof n?t.define(e,r,n.bind(i)):t.define(e,r,n)}},t.onExit=t=>{const e=(t,e)=>{s||(s=!0,r.forEach((t=>t())),!0===t&&process.exit(128+e))};0===r.length&&(process.once("SIGTERM",e.bind(null,!0,15)),process.once("SIGINT",e.bind(null,!0,2)),process.once("exit",e)),r.push(t)},t.define=(t,e,i)=>{Reflect.defineProperty(t,e,{value:i})},t.defineExport=(t,e,i)=>{let s;Reflect.defineProperty(t,e,{enumerable:!0,configurable:!0,set(t){s=t},get:()=>s?s():i()})}}(zr);var qr,Yr,Kr,Zr,Jr,Xr,Qr,tn,en,sn,rn,nn,on,an={};function hn(){return qr||(qr=1,an.ctrl={a:"first",b:"backward",c:"cancel",d:"deleteForward",e:"last",f:"forward",g:"reset",i:"tab",k:"cutForward",l:"reset",n:"newItem",m:"cancel",j:"submit",p:"search",r:"remove",s:"save",u:"undo",w:"cutLeft",x:"toggleCursor",v:"paste"},an.shift={up:"shiftUp",down:"shiftDown",left:"shiftLeft",right:"shiftRight",tab:"prev"},an.fn={up:"pageUp",down:"pageDown",left:"pageLeft",right:"pageRight",delete:"deleteForward"},an.option={b:"backward",f:"forward",d:"cutRight",left:"cutLeft",up:"altUp",down:"altDown"},an.keys={pageup:"pageUp",pagedown:"pageDown",home:"home",end:"end",cancel:"cancel",delete:"deleteForward",backspace:"delete",down:"down",enter:"submit",escape:"cancel",left:"left",space:"space",number:"number",return:"submit",right:"right",tab:"next",up:"up"}),an}function ln(){if(Jr)return Zr;function t(t,e,i={}){let s=t.timers[e]={name:e,start:Date.now(),ms:0,tick:0},r=i.interval||120;s.frames=i.frames||[],s.loading=!0;let n=setInterval((()=>{s.ms=Date.now()-s.start,s.tick++,t.render()}),r);return s.stop=()=>{s.loading=!1,clearInterval(n)},Reflect.defineProperty(s,"interval",{value:n}),t.once("close",(()=>s.stop())),s.stop}return Jr=1,Zr=e=>{e.timers=e.timers||{};let i=e.options.timers;if(i)for(let s of Object.keys(i)){let r=i[s];"number"==typeof r&&(r={interval:r}),t(e,s,r)}},Zr}function cn(){if(on)return nn;on=1;const t=function(){if(en)return tn;en=1;const t=zr,e=Ur,i={default:e.noop,noop:e.noop,set inverse(t){this._inverse=t},get inverse(){return this._inverse||t.inverse(this.primary)},set complement(t){this._complement=t},get complement(){return this._complement||t.complement(this.primary)},primary:e.cyan,success:e.green,danger:e.magenta,strong:e.bold,warning:e.yellow,muted:e.dim,disabled:e.gray,dark:e.dim.gray,underline:e.underline,set info(t){this._info=t},get info(){return this._info||this.primary},set em(t){this._em=t},get em(){return this._em||this.primary.underline},set heading(t){this._heading=t},get heading(){return this._heading||this.muted.underline},set pending(t){this._pending=t},get pending(){return this._pending||this.primary},set submitted(t){this._submitted=t},get submitted(){return this._submitted||this.success},set cancelled(t){this._cancelled=t},get cancelled(){return this._cancelled||this.danger},set typing(t){this._typing=t},get typing(){return this._typing||this.dim},set placeholder(t){this._placeholder=t},get placeholder(){return this._placeholder||this.primary.dim},set highlight(t){this._highlight=t},get highlight(){return this._highlight||this.inverse},merge:(s={})=>{s.styles&&"boolean"==typeof s.styles.enabled&&(e.enabled=s.styles.enabled),s.styles&&"boolean"==typeof s.styles.visible&&(e.visible=s.styles.visible);let r=t.merge({},i,s.styles);delete r.merge;for(let t of Object.keys(e))r.hasOwnProperty(t)||Reflect.defineProperty(r,t,{get:()=>e[t]});for(let t of Object.keys(e.styles))r.hasOwnProperty(t)||Reflect.defineProperty(r,t,{get:()=>e[t]});return r}};return tn=i}(),e=function(){if(rn)return sn;rn=1;const t="win32"===process.platform,e=Ur,i=zr,s={...e.symbols,upDownDoubleArrow:"⇕",upDownDoubleArrow2:"⬍",upDownArrow:"↕",asterisk:"*",asterism:"⁂",bulletWhite:"◦",electricArrow:"⌁",ellipsisLarge:"⋯",ellipsisSmall:"…",fullBlock:"█",identicalTo:"≡",indicator:e.symbols.check,leftAngle:"‹",mark:"※",minus:"−",multiplication:"×",obelus:"÷",percent:"%",pilcrow:"¶",pilcrow2:"❡",pencilUpRight:"✐",pencilDownRight:"✎",pencilRight:"✏",plus:"+",plusMinus:"±",pointRight:"☞",rightAngle:"›",section:"§",hexagon:{off:"⬡",on:"⬢",disabled:"⬢"},ballot:{on:"☑",off:"☐",disabled:"☒"},stars:{on:"★",off:"☆",disabled:"☆"},folder:{on:"▼",off:"▶",disabled:"▶"},prefix:{pending:e.symbols.question,submitted:e.symbols.check,cancelled:e.symbols.cross},separator:{pending:e.symbols.pointerSmall,submitted:e.symbols.middot,cancelled:e.symbols.middot},radio:{off:t?"( )":"◯",on:t?"(*)":"◉",disabled:t?"(|)":"Ⓘ"},numbers:["⓪","①","②","③","④","⑤","⑥","⑦","⑧","⑨","⑩","⑪","⑫","⑬","⑭","⑮","⑯","⑰","⑱","⑲","⑳","㉑","㉒","㉓","㉔","㉕","㉖","㉗","㉘","㉙","㉚","㉛","㉜","㉝","㉞","㉟","㊱","㊲","㊳","㊴","㊵","㊶","㊷","㊸","㊹","㊺","㊻","㊼","㊽","㊾","㊿"]};return s.merge=t=>{let r=i.merge({},e.symbols,s,t.symbols);return delete r.merge,r},sn=s}(),i=zr;return nn=s=>{s.options=i.merge({},s.options.theme,s.options),s.symbols=e.merge(s.options),s.styles=t.merge(s.options)},nn}var un,pn,dn,fn={exports:{}};function mn(){return un||(un=1,function(t,e){const i="Apple_Terminal"===process.env.TERM_PROGRAM,s=Ur,r=zr,n=t.exports=e,o="[";let a=!1;const h=n.code={bell:"",beep:"",beginning:`${o}G`,down:`${o}J`,esc:o,getPosition:`${o}6n`,hide:`${o}?25l`,line:`${o}2K`,lineEnd:`${o}K`,lineStart:`${o}1K`,restorePosition:o+(i?"8":"u"),savePosition:o+(i?"7":"s"),screen:`${o}2J`,show:`${o}?25h`,up:`${o}1J`},l=n.cursor={get hidden(){return a},hide:()=>(a=!0,h.hide),show:()=>(a=!1,h.show),forward:(t=1)=>`${o}${t}C`,backward:(t=1)=>`${o}${t}D`,nextLine:(t=1)=>`${o}E`.repeat(t),prevLine:(t=1)=>`${o}F`.repeat(t),up:(t=1)=>t?`${o}${t}A`:"",down:(t=1)=>t?`${o}${t}B`:"",right:(t=1)=>t?`${o}${t}C`:"",left:(t=1)=>t?`${o}${t}D`:"",to:(t,e)=>e?`${o}${e+1};${t+1}H`:`${o}${t+1}G`,move(t=0,e=0){let i="";return i+=t<0?l.left(-t):t>0?l.right(t):"",i+=e<0?l.up(-e):e>0?l.down(e):"",i},restore(t={}){let{after:e,cursor:i,initial:s,input:o,prompt:a,size:h,value:l}=t;if(s=r.isPrimitive(s)?String(s):"",o=r.isPrimitive(o)?String(o):"",l=r.isPrimitive(l)?String(l):"",h){let t=n.cursor.up(h)+n.cursor.to(a.length),e=o.length-i;return e>0&&(t+=n.cursor.left(e)),t}if(l||e){let t=!o&&s?-s.length:-o.length+i;return e&&(t-=e.length),""===o&&s&&!a.includes(s)&&(t+=s.length),n.cursor.move(t)}}},c=n.erase={screen:h.screen,up:h.up,down:h.down,line:h.line,lineEnd:h.lineEnd,lineStart:h.lineStart,lines(t){let e="";for(let i=0;i<t;i++)e+=n.erase.line+(i<t-1?n.cursor.up(1):"");return t&&(e+=n.code.beginning),e}};n.clear=(t="",e=process.stdout.columns)=>{if(!e)return c.line+l.to(0);let i=t.split(/\r?\n/),r=0;for(let t of i)r+=1+Math.floor(Math.max((n=t,[...s.unstyle(n)].length-1),0)/e);var n;return(c.line+l.prevLine()).repeat(r-1)+c.line+l.to(0)}}(fn,fn.exports)),fn.exports}function gn(){if(dn)return pn;dn=1;const t=i,e=Ur,s=function(){if(Kr)return Yr;Kr=1;const t=f,e=hn(),i=/^(?:\x1b)([a-zA-Z0-9])$/,s=/^(?:\x1b+)(O|N|\[|\[\[)(?:(\d+)(?:;(\d+))?([~^$])|(?:1;)?(\d+)?([a-zA-Z]))/,r={OP:"f1",OQ:"f2",OR:"f3",OS:"f4","[11~":"f1","[12~":"f2","[13~":"f3","[14~":"f4","[[A":"f1","[[B":"f2","[[C":"f3","[[D":"f4","[[E":"f5","[15~":"f5","[17~":"f6","[18~":"f7","[19~":"f8","[20~":"f9","[21~":"f10","[23~":"f11","[24~":"f12","[A":"up","[B":"down","[C":"right","[D":"left","[E":"clear","[F":"end","[H":"home",OA:"up",OB:"down",OC:"right",OD:"left",OE:"clear",OF:"end",OH:"home","[1~":"home","[2~":"insert","[3~":"delete","[4~":"end","[5~":"pageup","[6~":"pagedown","[[5~":"pageup","[[6~":"pagedown","[7~":"home","[8~":"end","[a":"up","[b":"down","[c":"right","[d":"left","[e":"clear","[2$":"insert","[3$":"delete","[5$":"pageup","[6$":"pagedown","[7$":"home","[8$":"end",Oa:"up",Ob:"down",Oc:"right",Od:"left",Oe:"clear","[2^":"insert","[3^":"delete","[5^":"pageup","[6^":"pagedown","[7^":"home","[8^":"end","[Z":"tab"},n=(t="",e={})=>{let n,o={name:e.name,ctrl:!1,meta:!1,shift:!1,option:!1,sequence:t,raw:t,...e};if(Buffer.isBuffer(t)?t[0]>127&&void 0===t[1]?(t[0]-=128,t=""+String(t)):t=String(t):void 0!==t&&"string"!=typeof t?t=String(t):t||(t=o.sequence||""),o.sequence=o.sequence||t||o.name,"\r"===t)o.raw=void 0,o.name="return";else if("\n"===t)o.name="enter";else if("\t"===t)o.name="tab";else if("\b"===t||""===t||""===t||"\b"===t)o.name="backspace",o.meta=""===t.charAt(0);else if(""===t||""===t)o.name="escape",o.meta=2===t.length;else if(" "===t||" "===t)o.name="space",o.meta=2===t.length;else if(t<="")o.name=String.fromCharCode(t.charCodeAt(0)+"a".charCodeAt(0)-1),o.ctrl=!0;else if(1===t.length&&t>="0"&&t<="9")o.name="number";else if(1===t.length&&t>="a"&&t<="z")o.name=t;else if(1===t.length&&t>="A"&&t<="Z")o.name=t.toLowerCase(),o.shift=!0;else if(n=i.exec(t))o.meta=!0,o.shift=/^[A-Z]$/.test(n[1]);else if(n=s.exec(t)){let e=[...t];""===e[0]&&""===e[1]&&(o.option=!0);let i=[n[1],n[2],n[4],n[6]].filter(Boolean).join(""),s=(n[3]||n[5]||1)-1;o.ctrl=!!(4&s),o.meta=!!(10&s),o.shift=!!(1&s),o.code=i,o.name=r[i],o.shift=function(t){return["[a","[b","[c","[d","[e","[2$","[3$","[5$","[6$","[7$","[8$","[Z"].includes(t)}(i)||o.shift,o.ctrl=function(t){return["Oa","Ob","Oc","Od","Oe","[2^","[3^","[5^","[6^","[7^","[8^"].includes(t)}(i)||o.ctrl}return o};return n.listen=(e={},i)=>{let{stdin:s}=e;if(!s||s!==process.stdin&&!s.isTTY)throw new Error("Invalid stream passed");let r=t.createInterface({terminal:!0,input:s});t.emitKeypressEvents(s,r);let o=(t,e)=>i(t,n(t,e),r),a=s.isRaw;return s.isTTY&&s.setRawMode(!0),s.on("keypress",o),r.resume(),()=>{s.isTTY&&s.setRawMode(a),s.removeListener("keypress",o),r.pause(),r.close()}},n.action=(t,i,s)=>{let r={...e,...s};return i.ctrl?(i.action=r.ctrl[i.name],i):i.option&&r.option?(i.action=r.option[i.name],i):i.shift?(i.action=r.shift[i.name],i):(i.action=r.keys[i.name],i)},Yr=n}(),r=ln(),n=function(){if(Qr)return Xr;Qr=1;const{define:t,width:e}=zr;return Xr=class{constructor(i){let s=i.options;t(this,"_prompt",i),this.type=i.type,this.name=i.name,this.message="",this.header="",this.footer="",this.error="",this.hint="",this.input="",this.cursor=0,this.index=0,this.lines=0,this.tick=0,this.prompt="",this.buffer="",this.width=e(s.stdout||process.stdout),Object.assign(this,s),this.name=this.name||this.message,this.message=this.message||this.name,this.symbols=i.symbols,this.styles=i.styles,this.required=new Set,this.cancelled=!1,this.submitted=!1}clone(){let t={...this};return t.status=this.status,t.buffer=Buffer.from(t.buffer),delete t.clone,t}set color(t){this._color=t}get color(){let t=this.prompt.styles;if(this.cancelled)return t.cancelled;if(this.submitted)return t.submitted;let e=this._color||t[this.status];return"function"==typeof e?e:t.pending}set loading(t){this._loading=t}get loading(){return"boolean"==typeof this._loading?this._loading:!!this.loadingChoices&&"choices"}get status(){return this.cancelled?"cancelled":this.submitted?"submitted":"pending"}},Xr}(),o=cn(),a=zr,h=mn();class l extends t{constructor(t={}){super(),this.name=t.name,this.type=t.type,this.options=t,o(this),r(this),this.state=new n(this),this.initial=[t.initial,t.default].find((t=>null!=t)),this.stdout=t.stdout||process.stdout,this.stdin=t.stdin||process.stdin,this.scale=t.scale||1,this.term=this.options.term||process.env.TERM_PROGRAM,this.margin=function(t){"number"==typeof t&&(t=[t,t,t,t]);let e=[].concat(t||[]),i=t=>t%2==0?"\n":" ",s=[];for(let t=0;t<4;t++){let r=i(t);e[t]?s.push(r.repeat(e[t])):s.push("")}return s}(this.options.margin),this.setMaxListeners(0),function(t){let e=e=>void 0===t[e]||"function"==typeof t[e],i=["actions","choices","initial","margin","roles","styles","symbols","theme","timers","value"],s=["body","footer","error","header","hint","indicator","message","prefix","separator","skip"];for(let r of Object.keys(t.options)){if(i.includes(r))continue;if(/^on[A-Z]/.test(r))continue;let n=t.options[r];"function"==typeof n&&e(r)?s.includes(r)||(t[r]=n.bind(t)):"function"!=typeof t[r]&&(t[r]=n)}}(this)}async keypress(t,e={}){this.keypressed=!0;let i=s.action(t,s(t,e),this.options.actions);this.state.keypress=i,this.emit("keypress",t,i),this.emit("state",this.state.clone());let r=this.options[i.action]||this[i.action]||this.dispatch;if("function"==typeof r)return await r.call(this,t,i);this.alert()}alert(){delete this.state.alert,!1===this.options.show?this.emit("alert"):this.stdout.write(h.code.beep)}cursorHide(){this.stdout.write(h.cursor.hide()),a.onExit((()=>this.cursorShow()))}cursorShow(){this.stdout.write(h.cursor.show())}write(t){t&&(this.stdout&&!1!==this.state.show&&this.stdout.write(t),this.state.buffer+=t)}clear(t=0){let e=this.state.buffer;this.state.buffer="",(e||t)&&!1!==this.options.show&&this.stdout.write(h.cursor.down(t)+h.clear(e,this.width))}restore(){if(this.state.closed||!1===this.options.show)return;let{prompt:t,after:e,rest:i}=this.sections(),{cursor:s,initial:r="",input:n="",value:o=""}=this,a={after:e,cursor:s,initial:r,input:n,prompt:t,size:this.state.size=i.length,value:o},l=h.cursor.restore(a);l&&this.stdout.write(l)}sections(){let{buffer:t,input:i,prompt:s}=this.state;s=e.unstyle(s);let r=e.unstyle(t),n=r.indexOf(s),o=r.slice(0,n),a=r.slice(n).split("\n"),h=a[0],l=a[a.length-1],c=(s+(i?" "+i:"")).length,u=c<h.length?h.slice(c+1):"";return{header:o,prompt:h,after:u,rest:a.slice(1),last:l}}async submit(){this.state.submitted=!0,this.state.validating=!0,this.options.onSubmit&&await this.options.onSubmit.call(this,this.name,this.value,this);let t=this.state.error||await this.validate(this.value,this.state);if(!0!==t){let e="\n"+this.symbols.pointer+" ";return e+="string"==typeof t?t.trim():"Invalid input",this.state.error="\n"+this.styles.danger(e),this.state.submitted=!1,await this.render(),await this.alert(),this.state.validating=!1,void(this.state.error=void 0)}this.state.validating=!1,await this.render(),await this.close(),this.value=await this.result(this.value),this.emit("submit",this.value)}async cancel(t){this.state.cancelled=this.state.submitted=!0,await this.render(),await this.close(),"function"==typeof this.options.onCancel&&await this.options.onCancel.call(this,this.name,this.value,this),this.emit("cancel",await this.error(t))}async close(){this.state.closed=!0;try{let t=this.sections(),e=Math.ceil(t.prompt.length/this.width);t.rest&&this.write(h.cursor.down(t.rest.length)),this.write("\n".repeat(e))}catch(t){}this.emit("close")}start(){this.stop||!1===this.options.show||(this.stop=s.listen(this,this.keypress.bind(this)),this.once("close",this.stop))}async skip(){return this.skipped=!0===this.options.skip,"function"==typeof this.options.skip&&(this.skipped=await this.options.skip.call(this,this.name,this.value)),this.skipped}async initialize(){let{format:t,options:e,result:i}=this;if(this.format=()=>t.call(this,this.value),this.result=()=>i.call(this,this.value),"function"==typeof e.initial&&(this.initial=await e.initial.call(this,this)),"function"==typeof e.onRun&&await e.onRun.call(this,this),"function"==typeof e.onSubmit){let t=e.onSubmit.bind(this),i=this.submit.bind(this);delete this.options.onSubmit,this.submit=async()=>(await t(this.name,this.value,this),i())}await this.start(),await this.render()}render(){throw new Error("expected prompt to have a custom render method")}run(){return new Promise((async(t,e)=>{if(this.once("submit",t),this.once("cancel",e),await this.skip())return this.render=()=>{},this.submit();await this.initialize(),this.emit("run")}))}async element(t,e,i){let{options:s,state:r,symbols:n,timers:o}=this,a=o&&o[t];r.timer=a;let h=s[t]||r[t]||n[t],l=e&&null!=e[t]?e[t]:await h;if(""===l)return l;let c=await this.resolve(l,r,e,i);return!c&&e&&e[t]?this.resolve(h,r,e,i):c}async prefix(){let t=await this.element("prefix")||this.symbols,e=this.timers&&this.timers.prefix,i=this.state;if(i.timer=e,a.isObject(t)&&(t=t[i.status]||t.pending),!a.hasColor(t)){return(this.styles[i.status]||this.styles.pending)(t)}return t}async message(){let t=await this.element("message");return a.hasColor(t)?t:this.styles.strong(t)}async separator(){let t=await this.element("separator")||this.symbols,e=this.timers&&this.timers.separator,i=this.state;i.timer=e;let s=t[i.status]||t.pending||i.separator,r=await this.resolve(s,i);return a.isObject(r)&&(r=r[i.status]||r.pending),a.hasColor(r)?r:this.styles.muted(r)}async pointer(t,e){let i=await this.element("pointer",t,e);if("string"==typeof i&&a.hasColor(i))return i;if(i){let t=this.styles,s=this.index===e,r=s?t.primary:t=>t,n=await this.resolve(i[s?"on":"off"]||i,this.state),o=a.hasColor(n)?n:r(n);return s?o:" ".repeat(n.length)}}async indicator(t,e){let i=await this.element("indicator",t,e);if("string"==typeof i&&a.hasColor(i))return i;if(i){let e=this.styles,s=!0===t.enabled,r=s?e.success:e.dark,n=i[s?"on":"off"]||i;return a.hasColor(n)?n:r(n)}return""}body(){return null}footer(){if("pending"===this.state.status)return this.element("footer")}header(){if("pending"===this.state.status)return this.element("header")}async hint(){if("pending"===this.state.status&&!this.isValue(this.state.input)){let t=await this.element("hint");return a.hasColor(t)?t:this.styles.muted(t)}}error(t){return this.state.submitted?"":t||this.state.error}format(t){return t}result(t){return t}validate(t){return!0!==this.options.required||this.isValue(t)}isValue(t){return null!=t&&""!==t}resolve(t,...e){return a.resolve(this,t,...e)}get base(){return l.prototype}get style(){return this.styles[this.state.status]}get height(){return this.options.rows||a.height(this.stdout,25)}get width(){return this.options.columns||a.width(this.stdout,80)}get size(){return{width:this.width,height:this.height}}set cursor(t){this.state.cursor=t}get cursor(){return this.state.cursor}set input(t){this.state.input=t}get input(){return this.state.input}set value(t){this.state.value=t}get value(){let{input:t,value:e}=this.state,i=[e,t].find(this.isValue.bind(this));return this.isValue(i)?i:this.initial}static get prompt(){return t=>new this(t).run()}}return pn=l}var yn,wn,bn,vn,xn,Sn,On,En,_n,Cn,kn,An,Tn,Pn,Rn,Ln,$n,Nn,In,jn,Fn,Mn,Dn,Bn,zn,Gn,Wn,Hn,Vn,Un,qn,Yn,Kn,Zn,Jn,Xn,Qn,to,eo,io,so,ro,no,oo,ao,ho,lo,co,uo,po,fo,mo,go,yo,wo,bo,vo,xo,So,Oo={};function Eo(){if(vn)return bn;vn=1;const t=Ur,e=gn(),i=function(){if(wn)return yn;wn=1;const t=zr,e={default:(t,e)=>e,checkbox(t,e){throw new Error("checkbox role is not implemented yet")},editable(t,e){throw new Error("editable role is not implemented yet")},expandable(t,e){throw new Error("expandable role is not implemented yet")},heading:(t,e)=>(e.disabled="",e.indicator=[e.indicator," "].find((t=>null!=t)),e.message=e.message||"",e),input(t,e){throw new Error("input role is not implemented yet")},option:(t,i)=>e.default(t,i),radio(t,e){throw new Error("radio role is not implemented yet")},separator:(t,e)=>(e.disabled="",e.indicator=[e.indicator," "].find((t=>null!=t)),e.message=e.message||t.symbols.line.repeat(5),e),spacer:(t,e)=>e};return yn=(i,s={})=>{let r=t.merge({},e,s.roles);return r[i]||r.default}}(),s=zr,{reorder:r,scrollUp:n,scrollDown:o,isObject:a,swap:h}=s;function l(t,e){if(e instanceof Promise)return e;if("function"==typeof e){if(s.isAsyncFn(e))return e;e=e.call(t,t)}for(let i of e){if(Array.isArray(i.choices)){let e=i.choices.filter((e=>!t.isDisabled(e)));i.enabled=e.every((t=>!0===t.enabled))}!0===t.isDisabled(i)&&delete i.enabled}return e}return bn=class extends e{constructor(t){super(t),this.cursorHide(),this.maxSelected=t.maxSelected||1/0,this.multiple=t.multiple||!1,this.initial=t.initial||0,this.delay=t.delay||0,this.longest=0,this.num=""}async initialize(){"function"==typeof this.options.initial&&(this.initial=await this.options.initial.call(this)),await this.reset(!0),await super.initialize()}async reset(){let{choices:t,initial:e,autofocus:i,suggest:s}=this.options;if(this.state._choices=[],this.state.choices=[],this.choices=await Promise.all(await this.toChoices(t)),this.choices.forEach((t=>t.enabled=!1)),"function"!=typeof s&&0===this.selectable.length)throw new Error("At least one choice must be selectable");a(e)&&(e=Object.keys(e)),Array.isArray(e)?(null!=i&&(this.index=this.findIndex(i)),e.forEach((t=>this.enable(this.find(t)))),await this.render()):(null!=i&&(e=i),"string"==typeof e&&(e=this.findIndex(e)),"number"==typeof e&&e>-1&&(this.index=Math.max(0,Math.min(e,this.choices.length)),this.enable(this.find(this.index)))),this.isDisabled(this.focused)&&await this.down()}async toChoices(t,e){this.state.loadingChoices=!0;let i=[],s=0,r=async(t,e)=>{"function"==typeof t&&(t=await t.call(this)),t instanceof Promise&&(t=await t);for(let n=0;n<t.length;n++){let o=t[n]=await this.toChoice(t[n],s++,e);i.push(o),o.choices&&await r(o.choices,o)}return i};return r(t,e).then((t=>(this.state.loadingChoices=!1,t)))}async toChoice(e,r,n){if("function"==typeof e&&(e=await e.call(this,this)),e instanceof Promise&&(e=await e),"string"==typeof e&&(e={name:e}),e.normalized)return e;e.normalized=!0;let o=e.value,a=i(e.role,this.options);if("string"!=typeof(e=a(this,e)).disabled||e.hint||(e.hint=e.disabled,e.disabled=!0),!0===e.disabled&&null==e.hint&&(e.hint="(disabled)"),null!=e.index)return e;e.name=e.name||e.key||e.title||e.value||e.message,e.message=e.message||e.name||"",e.value=[e.value,e.name].find(this.isValue.bind(this)),e.input="",e.index=r,e.cursor=0,s.define(e,"parent",n),e.level=n?n.level+1:1,null==e.indent&&(e.indent=n?n.indent+"  ":e.indent||""),e.path=n?n.path+"."+e.name:e.name,e.enabled=!(!this.multiple||this.isDisabled(e)||!e.enabled&&!this.isSelected(e)),this.isDisabled(e)||(this.longest=Math.max(this.longest,t.unstyle(e.message).length));let h={...e};return e.reset=(t=h.input,i=h.value)=>{for(let t of Object.keys(h))e[t]=h[t];e.input=t,e.value=i},null==o&&"function"==typeof e.initial&&(e.input=await e.initial.call(this,this.state,e,r)),e}async onChoice(t,e){this.emit("choice",t,e,this),"function"==typeof t.onChoice&&await t.onChoice.call(this,this.state,t,e)}async addChoice(t,e,i){let s=await this.toChoice(t,e,i);return this.choices.push(s),this.index=this.choices.length-1,this.limit=this.choices.length,s}async newItem(t,e,i){let s={name:"New choice name?",editable:!0,newChoice:!0,...t},r=await this.addChoice(s,e,i);return r.updateChoice=()=>{delete r.newChoice,r.name=r.message=r.input,r.input="",r.cursor=0},this.render()}indent(t){return null==t.indent?t.level>1?"  ".repeat(t.level-1):"":t.indent}dispatch(t,e){if(this.multiple&&this[e.name])return this[e.name]();this.alert()}focus(t,e){return"boolean"!=typeof e&&(e=t.enabled),e&&!t.enabled&&this.selected.length>=this.maxSelected?this.alert():(this.index=t.index,t.enabled=e&&!this.isDisabled(t),t)}space(){return this.multiple?(this.toggle(this.focused),this.render()):this.alert()}a(){if(this.maxSelected<this.choices.length)return this.alert();let t=this.selectable.every((t=>t.enabled));return this.choices.forEach((e=>e.enabled=!t)),this.render()}i(){return this.choices.length-this.selected.length>this.maxSelected?this.alert():(this.choices.forEach((t=>t.enabled=!t.enabled)),this.render())}g(t=this.focused){return this.choices.some((t=>!!t.parent))?(this.toggle(t.parent&&!t.choices?t.parent:t),this.render()):this.a()}toggle(t,e){if(!t.enabled&&this.selected.length>=this.maxSelected)return this.alert();"boolean"!=typeof e&&(e=!t.enabled),t.enabled=e,t.choices&&t.choices.forEach((t=>this.toggle(t,e)));let i=t.parent;for(;i;){let t=i.choices.filter((t=>this.isDisabled(t)));i.enabled=t.every((t=>!0===t.enabled)),i=i.parent}return l(this,this.choices),this.emit("toggle",t,this),t}enable(t){return this.selected.length>=this.maxSelected?this.alert():(t.enabled=!this.isDisabled(t),t.choices&&t.choices.forEach(this.enable.bind(this)),t)}disable(t){return t.enabled=!1,t.choices&&t.choices.forEach(this.disable.bind(this)),t}number(t){this.num+=t;let e=t=>{let e=Number(t);if(e>this.choices.length-1)return this.alert();let i=this.focused,s=this.choices.find((t=>e===t.index));if(!s.enabled&&this.selected.length>=this.maxSelected)return this.alert();if(-1===this.visible.indexOf(s)){let t=r(this.choices),e=t.indexOf(s);if(i.index>e){let i=t.slice(e,e+this.limit),s=t.filter((t=>!i.includes(t)));this.choices=i.concat(s)}else{let i=e-this.limit+1;this.choices=t.slice(i).concat(t.slice(0,i))}}return this.index=this.choices.indexOf(s),this.toggle(this.focused),this.render()};return clearTimeout(this.numberTimeout),new Promise((t=>{let i=this.choices.length,s=this.num,r=(i=!1,r)=>{clearTimeout(this.numberTimeout),i&&(r=e(s)),this.num="",t(r)};return"0"===s||1===s.length&&Number(s+"0")>i?r(!0):Number(s)>i?r(!1,this.alert()):void(this.numberTimeout=setTimeout((()=>r(!0)),this.delay))}))}home(){return this.choices=r(this.choices),this.index=0,this.render()}end(){let t=this.choices.length-this.limit,e=r(this.choices);return this.choices=e.slice(t).concat(e.slice(0,t)),this.index=this.limit-1,this.render()}first(){return this.index=0,this.render()}last(){return this.index=this.visible.length-1,this.render()}prev(){return this.visible.length<=1?this.alert():this.up()}next(){return this.visible.length<=1?this.alert():this.down()}right(){return this.cursor>=this.input.length?this.alert():(this.cursor++,this.render())}left(){return this.cursor<=0?this.alert():(this.cursor--,this.render())}up(){let t=this.choices.length,e=this.visible.length,i=this.index;return!1===this.options.scroll&&0===i?this.alert():t>e&&0===i?this.scrollUp():(this.index=(i-1%t+t)%t,this.isDisabled()?this.up():this.render())}down(){let t=this.choices.length,e=this.visible.length,i=this.index;return!1===this.options.scroll&&i===e-1?this.alert():t>e&&i===e-1?this.scrollDown():(this.index=(i+1)%t,this.isDisabled()?this.down():this.render())}scrollUp(t=0){return this.choices=n(this.choices),this.index=t,this.isDisabled()?this.up():this.render()}scrollDown(t=this.visible.length-1){return this.choices=o(this.choices),this.index=t,this.isDisabled()?this.down():this.render()}async shiftUp(){return!0===this.options.sort?(this.sorting=!0,this.swap(this.index-1),await this.up(),void(this.sorting=!1)):this.scrollUp(this.index)}async shiftDown(){return!0===this.options.sort?(this.sorting=!0,this.swap(this.index+1),await this.down(),void(this.sorting=!1)):this.scrollDown(this.index)}pageUp(){return this.visible.length<=1?this.alert():(this.limit=Math.max(this.limit-1,0),this.index=Math.min(this.limit-1,this.index),this._limit=this.limit,this.isDisabled()?this.up():this.render())}pageDown(){return this.visible.length>=this.choices.length?this.alert():(this.index=Math.max(0,this.index),this.limit=Math.min(this.limit+1,this.choices.length),this._limit=this.limit,this.isDisabled()?this.down():this.render())}swap(t){h(this.choices,this.index,t)}isDisabled(t=this.focused){return!(!t||!["disabled","collapsed","hidden","completing","readonly"].some((e=>!0===t[e])))||t&&"heading"===t.role}isEnabled(t=this.focused){if(Array.isArray(t))return t.every((t=>this.isEnabled(t)));if(t.choices){let e=t.choices.filter((t=>!this.isDisabled(t)));return t.enabled&&e.every((t=>this.isEnabled(t)))}return t.enabled&&!this.isDisabled(t)}isChoice(t,e){return t.name===e||t.index===Number(e)}isSelected(t){return Array.isArray(this.initial)?this.initial.some((e=>this.isChoice(t,e))):this.isChoice(t,this.initial)}map(t=[],e="value"){return[].concat(t||[]).reduce(((t,i)=>(t[i]=this.find(i,e),t)),{})}filter(t,e){let i="function"==typeof t?t:(e,i)=>[e.name,i].includes(t),s=(this.options.multiple?this.state._choices:this.choices).filter(i);return e?s.map((t=>t[e])):s}find(t,e){if(a(t))return e?t[e]:t;let i="function"==typeof t?t:(e,i)=>[e.name,i].includes(t),s=this.choices.find(i);return s?e?s[e]:s:void 0}findIndex(t){return this.choices.indexOf(this.find(t))}async submit(){let t=this.focused;if(!t)return this.alert();if(t.newChoice)return t.input?(t.updateChoice(),this.render()):this.alert();if(this.choices.some((t=>t.newChoice)))return this.alert();let{reorder:e,sort:i}=this.options,r=!0===this.multiple,n=this.selected;return void 0===n?this.alert():(Array.isArray(n)&&!1!==e&&!0!==i&&(n=s.reorder(n)),this.value=r?n.map((t=>t.name)):n.name,super.submit())}set choices(t=[]){this.state._choices=this.state._choices||[],this.state.choices=t;for(let e of t)this.state._choices.some((t=>t.name===e.name))||this.state._choices.push(e);if(!this._initial&&this.options.initial){this._initial=!0;let t=this.initial;if("string"==typeof t||"number"==typeof t){let e=this.find(t);e&&(this.initial=e.index,this.focus(e,!0))}}}get choices(){return l(this,this.state.choices||[])}set visible(t){this.state.visible=t}get visible(){return(this.state.visible||this.choices).slice(0,this.limit)}set limit(t){this.state.limit=t}get limit(){let{state:t,options:e,choices:i}=this,s=t.limit||this._limit||e.limit||i.length;return Math.min(s,this.height)}set value(t){super.value=t}get value(){return"string"!=typeof super.value&&super.value===this.initial?this.input:super.value}set index(t){this.state.index=t}get index(){return Math.max(0,this.state?this.state.index:0)}get enabled(){return this.filter(this.isEnabled.bind(this))}get focused(){let t=this.choices[this.index];return t&&this.state.submitted&&!0!==this.multiple&&(t.enabled=!0),t}get selectable(){return this.choices.filter((t=>!this.isDisabled(t)))}get selected(){return this.multiple?this.enabled:this.focused}},bn}function _o(){if(Sn)return xn;Sn=1;const t=Eo(),e=zr;return xn=class extends t{constructor(t){super(t),this.emptyError=this.options.emptyError||"No items were selected"}async dispatch(t,e){if(this.multiple)return this[e.name]?await this[e.name](t,e):await super.dispatch(t,e);this.alert()}separator(){if(this.options.separator)return super.separator();let t=this.styles.muted(this.symbols.ellipsis);return this.state.submitted?super.separator():t}pointer(t,e){return!this.multiple||this.options.pointer?super.pointer(t,e):""}indicator(t,e){return this.multiple?super.indicator(t,e):""}choiceMessage(t,i){let s=this.resolve(t.message,this.state,t,i);return"heading"!==t.role||e.hasColor(s)||(s=this.styles.strong(s)),this.resolve(s,this.state,t,i)}choiceSeparator(){return":"}async renderChoice(t,i){await this.onChoice(t,i);let s=this.index===i,r=await this.pointer(t,i),n=await this.indicator(t,i)+(t.pad||""),o=await this.resolve(t.hint,this.state,t,i);o&&!e.hasColor(o)&&(o=this.styles.muted(o));let a=this.indent(t),h=await this.choiceMessage(t,i),l=()=>[this.margin[3],a+r+n,h,this.margin[1],o].filter(Boolean).join(" ");return"heading"===t.role?l():t.disabled?(e.hasColor(h)||(h=this.styles.disabled(h)),l()):(s&&(h=this.styles.em(h)),l())}async renderChoices(){if("choices"===this.state.loading)return this.styles.warning("Loading choices");if(this.state.submitted)return"";let t=this.visible.map((async(t,e)=>await this.renderChoice(t,e))),e=await Promise.all(t);e.length||e.push(this.styles.danger("No matching choices"));let i,s=this.margin[0]+e.join("\n");return this.options.choicesHeader&&(i=await this.resolve(this.options.choicesHeader,this.state)),[i,s].filter(Boolean).join("\n")}format(){return!this.state.submitted||this.state.cancelled?"":Array.isArray(this.selected)?this.selected.map((t=>this.styles.primary(t.name))).join(", "):this.styles.primary(this.selected.name)}async render(){let{submitted:t,size:e}=this.state,i="",s=await this.header(),r=await this.prefix(),n=await this.separator(),o=await this.message();!1!==this.options.promptLine&&(i=[r,o,n,""].join(" "),this.state.prompt=i);let a=await this.format(),h=await this.error()||await this.hint(),l=await this.renderChoices(),c=await this.footer();a&&(i+=a),h&&!i.includes(h)&&(i+=" "+h),t&&!a&&!l.trim()&&this.multiple&&null!=this.emptyError&&(i+=this.styles.danger(this.emptyError)),this.clear(e),this.write([s,i,l,c].filter(Boolean).join("\n")),this.write(this.margin[2]),this.restore()}},xn}function Co(){if(Cn)return _n;Cn=1;const t=zr;return _n=(e,i={})=>{e.cursorHide();let{input:s="",initial:r="",pos:n,showCursor:o=!0,color:a}=i,h=a||e.styles.placeholder,l=t.inverse(e.styles.primary),c=t=>l(e.styles.black(t)),u=s,p=c(" ");if(e.blink&&!0===e.blink.off&&(c=t=>t,p=""),o&&0===n&&""===r&&""===s)return c(" ");if(o&&0===n&&(s===r||""===s))return c(r[0])+h(r.slice(1));r=t.isPrimitive(r)?`${r}`:"",s=t.isPrimitive(s)?`${s}`:"";let d=r&&r.startsWith(s)&&r!==s,f=d?c(r[s.length]):p;if(n!==s.length&&!0===o&&(u=s.slice(0,n)+c(s[n])+s.slice(n+1),f=""),!1===o&&(f=""),d){let t=e.styles.unstyle(u+f);return u+f+h(r.slice(t.length))}return u+f},_n}function ko(){if(An)return kn;An=1;const t=Ur,e=_o(),i=Co();return kn=class extends e{constructor(t){super({...t,multiple:!0}),this.type="form",this.initial=this.options.initial,this.align=[this.options.align,"right"].find((t=>null!=t)),this.emptyError="",this.values={}}async reset(t){return await super.reset(),!0===t&&(this._index=this.index),this.index=this._index,this.values={},this.choices.forEach((t=>t.reset&&t.reset())),this.render()}dispatch(t){return!!t&&this.append(t)}append(t){let e=this.focused;if(!e)return this.alert();let{cursor:i,input:s}=e;return e.value=e.input=s.slice(0,i)+t+s.slice(i),e.cursor++,this.render()}delete(){let t=this.focused;if(!t||t.cursor<=0)return this.alert();let{cursor:e,input:i}=t;return t.value=t.input=i.slice(0,e-1)+i.slice(e),t.cursor--,this.render()}deleteForward(){let t=this.focused;if(!t)return this.alert();let{cursor:e,input:i}=t;if(void 0===i[e])return this.alert();let s=`${i}`.slice(0,e)+`${i}`.slice(e+1);return t.value=t.input=s,this.render()}right(){let t=this.focused;return t?t.cursor>=t.input.length?this.alert():(t.cursor++,this.render()):this.alert()}left(){let t=this.focused;return t?t.cursor<=0?this.alert():(t.cursor--,this.render()):this.alert()}space(t,e){return this.dispatch(t,e)}number(t,e){return this.dispatch(t,e)}next(){let t=this.focused;if(!t)return this.alert();let{initial:e,input:i}=t;return e&&e.startsWith(i)&&i!==e?(t.value=t.input=e,t.cursor=t.value.length,this.render()):super.next()}prev(){let t=this.focused;return t?0===t.cursor?super.prev():(t.value=t.input="",t.cursor=0,this.render()):this.alert()}separator(){return""}format(t){return this.state.submitted?"":super.format(t)}pointer(){return""}indicator(t){return t.input?"⦿":"⊙"}async choiceSeparator(t,e){let i=await this.resolve(t.separator,this.state,t,e)||":";return i?" "+this.styles.disabled(i):""}async renderChoice(e,s){await this.onChoice(e,s);let{state:r,styles:n}=this,{cursor:o,initial:a="",name:h,hint:l,input:c=""}=e,{muted:u,submitted:p,primary:d,danger:f}=n,m=l,g=this.index===s,y=e.validate||(()=>!0),w=await this.choiceSeparator(e,s),b=e.message;"right"===this.align&&(b=b.padStart(this.longest+1," ")),"left"===this.align&&(b=b.padEnd(this.longest+1," "));let v=this.values[h]=c||a,x=c?"success":"dark";!0!==await y.call(e,v,this.state)&&(x="danger");let S=(0,n[x])(await this.indicator(e,s))+(e.pad||""),O=this.indent(e),E=()=>[O,S,b+w,c,m].filter(Boolean).join(" ");if(r.submitted)return b=t.unstyle(b),c=p(c),m="",E();if(e.format)c=await e.format.call(this,c,e,s);else{let t=this.styles.muted;c=i(this,{input:c,initial:a,pos:o,showCursor:g,color:t})}return this.isValue(c)||(c=this.styles.muted(this.symbols.ellipsis)),e.result&&(this.values[h]=await e.result.call(this,v,e,s)),g&&(b=d(b)),e.error?c+=(c?" ":"")+f(e.error.trim()):e.hint&&(c+=(c?" ":"")+u(e.hint.trim())),E()}async submit(){return this.value=this.values,super.base.submit.call(this)}},kn}function Ao(){if(Pn)return Tn;Pn=1;const t=ko(),e=()=>{throw new Error("expected prompt to have a custom authenticate method")},i=(s=e)=>class extends t{constructor(t){super(t)}async submit(){this.value=await s.call(this,this.values,this.state),super.base.submit.call(this)}static create(t){return i(t)}};return Tn=i()}function To(){if(Nn)return $n;Nn=1;const t=gn(),{isPrimitive:e,hasColor:i}=zr;return $n=class extends t{constructor(t){super(t),this.cursorHide()}async initialize(){let t=await this.resolve(this.initial,this.state);this.input=await this.cast(t),await super.initialize()}dispatch(t){return this.isValue(t)?(this.input=t,this.submit()):this.alert()}format(t){let{styles:e,state:i}=this;return i.submitted?e.success(t):e.primary(t)}cast(t){return this.isTrue(t)}isTrue(t){return/^[ty1]/i.test(t)}isFalse(t){return/^[fn0]/i.test(t)}isValue(t){return e(t)&&(this.isTrue(t)||this.isFalse(t))}async hint(){if("pending"===this.state.status){let t=await this.element("hint");return i(t)?t:this.styles.muted(t)}}async render(){let{input:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=[i,await this.message(),this.styles.muted(this.default),s].filter(Boolean).join(" ");this.state.prompt=r;let n=await this.header(),o=this.value=this.cast(t),a=await this.format(o),h=await this.error()||await this.hint(),l=await this.footer();h&&!r.includes(h)&&(a+=" "+h),r+=" "+a,this.clear(e),this.write([n,r,l].filter(Boolean).join("\n")),this.restore()}set value(t){super.value=t}get value(){return this.cast(super.value)}},$n}function Po(){if(Bn)return Dn;Bn=1;const t=gn(),e=Co(),{isPrimitive:i}=zr;return Dn=class extends t{constructor(t){super(t),this.initial=i(this.initial)?String(this.initial):"",this.initial&&this.cursorHide(),this.state.prevCursor=0,this.state.clipboard=[]}async keypress(t,e={}){let i=this.state.prevKeypress;return this.state.prevKeypress=e,!0!==this.options.multiline||"return"!==e.name||i&&"return"===i.name?super.keypress(t,e):this.append("\n",e)}moveCursor(t){this.cursor+=t}reset(){return this.input=this.value="",this.cursor=0,this.render()}dispatch(t,e){if(!t||e.ctrl||e.code)return this.alert();this.append(t)}append(t){let{cursor:e,input:i}=this.state;this.input=`${i}`.slice(0,e)+t+`${i}`.slice(e),this.moveCursor(String(t).length),this.render()}insert(t){this.append(t)}delete(){let{cursor:t,input:e}=this.state;if(t<=0)return this.alert();this.input=`${e}`.slice(0,t-1)+`${e}`.slice(t),this.moveCursor(-1),this.render()}deleteForward(){let{cursor:t,input:e}=this.state;if(void 0===e[t])return this.alert();this.input=`${e}`.slice(0,t)+`${e}`.slice(t+1),this.render()}cutForward(){let t=this.cursor;if(this.input.length<=t)return this.alert();this.state.clipboard.push(this.input.slice(t)),this.input=this.input.slice(0,t),this.render()}cutLeft(){let t=this.cursor;if(0===t)return this.alert();let e=this.input.slice(0,t),i=this.input.slice(t),s=e.split(" ");this.state.clipboard.push(s.pop()),this.input=s.join(" "),this.cursor=this.input.length,this.input+=i,this.render()}paste(){if(!this.state.clipboard.length)return this.alert();this.insert(this.state.clipboard.pop()),this.render()}toggleCursor(){this.state.prevCursor?(this.cursor=this.state.prevCursor,this.state.prevCursor=0):(this.state.prevCursor=this.cursor,this.cursor=0),this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.input.length-1,this.render()}next(){let t=null!=this.initial?String(this.initial):"";if(!t||!t.startsWith(this.input))return this.alert();this.input=this.initial,this.cursor=this.initial.length,this.render()}prev(){if(!this.input)return this.alert();this.reset()}backward(){return this.left()}forward(){return this.right()}right(){return this.cursor>=this.input.length?this.alert():(this.moveCursor(1),this.render())}left(){return this.cursor<=0?this.alert():(this.moveCursor(-1),this.render())}isValue(t){return!!t}async format(t=this.value){let i=await this.resolve(this.initial,this.state);return this.state.submitted?this.styles.submitted(t||i):e(this,{input:t,initial:i,pos:this.cursor})}async render(){let t=this.state.size,e=await this.prefix(),i=await this.separator(),s=[e,await this.message(),i].filter(Boolean).join(" ");this.state.prompt=s;let r=await this.header(),n=await this.format(),o=await this.error()||await this.hint(),a=await this.footer();o&&!n.includes(o)&&(n+=" "+o),s+=" "+n,this.clear(t),this.write([r,s,a].filter(Boolean).join("\n")),this.restore()}},Dn}function Ro(){if(Gn)return zn;Gn=1;const t=t=>(t=>t.filter(((e,i)=>t.lastIndexOf(e)===i)))(t).filter(Boolean);return zn=(e,i={},s="")=>{let r,n,{past:o=[],present:a=""}=i;switch(e){case"prev":case"undo":return r=o.slice(0,o.length-1),n=o[o.length-1]||"",{past:t([s,...r]),present:n};case"next":case"redo":return r=o.slice(1),n=o[0]||"",{past:t([...r,s]),present:n};case"save":return{past:t([...o,s]),present:""};case"remove":return n=t(o.filter((t=>t!==s))),a="",n.length&&(a=n.pop()),{past:n,present:a};default:throw new Error(`Invalid action: "${e}"`)}}}function Lo(){if(Hn)return Wn;Hn=1;const t=Po(),e=Ro();return Wn=class extends t{constructor(t){super(t);let e=this.options.history;if(e&&e.store){let t=e.values||this.initial;this.autosave=!!e.autosave,this.store=e.store,this.data=this.store.get("values")||{past:[],present:t},this.initial=this.data.present||this.data.past[this.data.past.length-1]}}completion(t){return this.store?(this.data=e(t,this.data,this.input),this.data.present?(this.input=this.data.present,this.cursor=this.input.length,this.render()):this.alert()):this.alert()}altUp(){return this.completion("prev")}altDown(){return this.completion("next")}prev(){return this.save(),super.prev()}save(){this.store&&(this.data=e("save",this.data,this.input),this.store.set("values",this.data))}submit(){return this.store&&!0===this.autosave&&this.save(),super.submit()}}}function $o(){if(Xn)return Jn;Xn=1;const t=Po();return Jn=class extends t{constructor(t={}){super({style:"number",...t}),this.min=this.isValue(t.min)?this.toNumber(t.min):-1/0,this.max=this.isValue(t.max)?this.toNumber(t.max):1/0,this.delay=null!=t.delay?t.delay:1e3,this.float=!1!==t.float,this.round=!0===t.round||!1===t.float,this.major=t.major||10,this.minor=t.minor||1,this.initial=null!=t.initial?t.initial:"",this.input=String(this.initial),this.cursor=this.input.length,this.cursorShow()}append(t){return!/[-+.]/.test(t)||"."===t&&this.input.includes(".")?this.alert("invalid number"):super.append(t)}number(t){return super.append(t)}next(){return this.input&&this.input!==this.initial?this.alert():this.isValue(this.initial)?(this.input=this.initial,this.cursor=String(this.initial).length,this.render()):this.alert()}up(t){let e=t||this.minor,i=this.toNumber(this.input);return i>this.max+e?this.alert():(this.input=`${i+e}`,this.render())}down(t){let e=t||this.minor,i=this.toNumber(this.input);return i<this.min-e?this.alert():(this.input=""+(i-e),this.render())}shiftDown(){return this.down(this.major)}shiftUp(){return this.up(this.major)}format(t=this.input){return"function"==typeof this.options.format?this.options.format.call(this,t):this.styles.info(t)}toNumber(t=""){return this.float?+t:Math.round(+t)}isValue(t){return/^[-+]?[0-9]+((\.)|(\.[0-9]+))?$/.test(t)}submit(){let t=[this.input,this.initial].find((t=>this.isValue(t)));return this.value=this.toNumber(t||0),super.submit()}},Jn}function No(){if(oo)return no;oo=1;const t=Ur;class e{constructor(t){this.name=t.key,this.field=t.field||{},this.value=((t="")=>"string"==typeof t?t.replace(/^['"]|['"]$/g,""):"")(t.initial||this.field.initial||""),this.message=t.message||this.name,this.cursor=0,this.input="",this.lines=[]}}function i(t,e,i,s){return(i,r,n,o)=>"function"==typeof n.field[t]?n.field[t].call(e,i,r,n,o):[s,i].find((t=>e.isValue(t)))}return no=async s=>{let r=s.options,n=new Set(!0===r.required?[]:r.required||[]),o={...r.values,...r.initial},{tabstops:a,items:h,keys:l}=await(async(t={},i={},s=(t=>t))=>{let r=new Set,n=t.fields||[],o=t.template,a=[],h=[],l=[],c=1;"function"==typeof o&&(o=await o());let u=-1,p=()=>o[++u],d=()=>o[u+1],f=t=>{t.line=c,a.push(t)};for(f({type:"bos",value:""});u<o.length-1;){let t=p();if(/^[^\S\n ]$/.test(t)){f({type:"text",value:t});continue}if("\n"===t){f({type:"newline",value:t}),c++;continue}if("\\"===t){t+=p(),f({type:"text",value:t});continue}if(("$"===t||"#"===t||"{"===t)&&"{"===d()){t+=p();let o,a={type:"template",open:t,inner:"",close:"",value:t};for(;o=p();){if("}"===o){"}"===d()&&(o+=p()),a.value+=o,a.close=o;break}":"===o?(a.initial="",a.key=a.inner):void 0!==a.initial&&(a.initial+=o),a.value+=o,a.inner+=o}a.template=a.open+(a.initial||a.inner)+a.close,a.key=a.key||a.inner,i.hasOwnProperty(a.key)&&(a.initial=i[a.key]),a=s(a),f(a),l.push(a.key),r.add(a.key);let c=h.find((t=>t.name===a.key));a.field=n.find((t=>t.name===a.key)),c||(c=new e(a),h.push(c)),c.lines.push(a.line-1);continue}let o=a[a.length-1];"text"===o.type&&o.line===c?o.value+=t:f({type:"text",value:t})}return f({type:"eos",value:""}),{input:o,tabstops:a,unique:r,keys:l,items:h}})(r,o),c=i("result",s),u=i("format",s),p=i("validate",s,r,!0),d=s.isValue.bind(s);return async(e={},i=!1)=>{let o=0;e.required=n,e.items=h,e.keys=l,e.output="";let f=async(t,e,i,s)=>{let r=await p(t,e,i,s);return!1===r?"Invalid field "+i.name:r};for(let n of a){let a=n.value,l=n.key;if("template"===n.type){if("template"===n.type){let p=h.find((t=>t.name===l));!0===r.required&&e.required.add(p.name);let m=[p.input,e.values[p.value],p.value,a].find(d),g=(p.field||{}).message||n.inner;if(i){let i=await f(e.values[l],e,p,o);if(i&&"string"==typeof i||!1===i){e.invalid.set(l,i);continue}e.invalid.delete(l);let s=await c(e.values[l],e,p,o);e.output+=t.unstyle(s);continue}p.placeholder=!1;let y=a;a=await u(a,e,p,o),m!==a?(e.values[l]=m,a=s.styles.typing(m),e.missing.delete(g)):(e.values[l]=void 0,m=`<${g}>`,a=s.styles.primary(m),p.placeholder=!0,e.required.has(l)&&e.missing.add(g)),e.missing.has(g)&&e.validating&&(a=s.styles.warning(m)),e.invalid.has(l)&&e.validating&&(a=s.styles.danger(m)),o===e.index&&(a=y!==a?s.styles.underline(a):s.styles.heading(t.unstyle(a))),o++}a&&(e.output+=a)}else a&&(e.output+=a)}let m=e.output.split("\n").map((t=>" "+t)),g=h.length,y=0;for(let t of h)e.invalid.has(t.name)&&t.lines.forEach((t=>{" "===m[t][0]&&(m[t]=e.styles.danger(e.symbols.bullet)+m[t].slice(1))})),s.isValue(e.values[t.name])&&y++;return e.completed=(y/g*100).toFixed(0),e.output=m.join("\n"),e.output}},no}function Io(){if(po)return uo;po=1;const t=Eo();function e(t,e={}){if(Array.isArray(e.scale))return e.scale.map((t=>({...t})));let i=[];for(let e=1;e<t+1;e++)i.push({i:e,selected:!1});return i}return uo=class extends t{constructor(t={}){if(super(t),this.emptyError=t.emptyError||"No items were selected",this.term=process.env.TERM_PROGRAM,!this.options.header){let t=["","4 - Strongly Agree","3 - Agree","2 - Neutral","1 - Disagree","0 - Strongly Disagree",""];t=t.map((t=>this.styles.muted(t))),this.state.header=t.join("\n   ")}}async toChoices(...t){if(this.createdScales)return!1;this.createdScales=!0;let i=await super.toChoices(...t);for(let t of i)t.scale=e(5,this.options),t.scaleIdx=2;return i}dispatch(){this.alert()}space(){let t=this.focused,e=t.scale[t.scaleIdx],i=e.selected;return t.scale.forEach((t=>t.selected=!1)),e.selected=!i,this.render()}indicator(){return""}pointer(){return""}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;return t.scaleIdx>=t.scale.length-1?this.alert():(t.scaleIdx++,this.render())}left(){let t=this.focused;return t.scaleIdx<=0?this.alert():(t.scaleIdx--,this.render())}indent(){return"   "}async renderChoice(t,e){await this.onChoice(t,e);let i=this.index===e,s="Hyper"===this.term,r=s?9:8,n=s?"":" ",o=this.symbols.line.repeat(r),a=" ".repeat(r+(s?0:1)),h=t=>(t?this.styles.success("◉"):"◯")+n,l=e+1+".",c=i?this.styles.heading:this.styles.noop,u=await this.resolve(t.message,this.state,t,e),p=this.indent(t),d=p+t.scale.map(((e,i)=>h(i===t.scaleIdx))).join(o),f=p+t.scale.map(((e,i)=>(e=>e===t.scaleIdx?c(e):e)(i))).join(a);return i&&(d=this.styles.cyan(d),f=this.styles.cyan(f)),[[l,u].filter(Boolean).join(" "),d,f," "].filter(Boolean).join("\n")}async renderChoices(){if(this.state.submitted)return"";let t=this.visible.map((async(t,e)=>await this.renderChoice(t,e))),e=await Promise.all(t);return e.length||e.push(this.styles.danger("No matching choices")),e.join("\n")}format(){if(this.state.submitted){return this.choices.map((t=>this.styles.info(t.scaleIdx))).join(", ")}return""}async render(){let{submitted:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=[i,await this.message(),s].filter(Boolean).join(" ");this.state.prompt=r;let n=await this.header(),o=await this.format(),a=await this.error()||await this.hint(),h=await this.renderChoices(),l=await this.footer();!o&&a||(r+=" "+o),a&&!r.includes(a)&&(r+=" "+a),t&&!o&&!h&&this.multiple&&"form"!==this.type&&(r+=this.styles.danger(this.emptyError)),this.clear(e),this.write([r,n,h,l].filter(Boolean).join("\n")),this.restore()}submit(){this.value={};for(let t of this.choices)this.value[t.name]=t.scaleIdx;return this.base.submit.call(this)}},uo}function jo(){return vo||(vo=1,function(t){const e=zr,i=(i,s)=>{e.defineExport(t,i,s),e.defineExport(t,i.toLowerCase(),s)};i("AutoComplete",(()=>function(){if(En)return On;En=1;const t=_o();return On=class extends t{constructor(t){super(t),this.cursorShow()}moveCursor(t){this.state.cursor+=t}dispatch(t){return this.append(t)}space(t){return this.options.multiple?super.space(t):this.append(t)}append(t){let{cursor:e,input:i}=this.state;return this.input=i.slice(0,e)+t+i.slice(e),this.moveCursor(1),this.complete()}delete(){let{cursor:t,input:e}=this.state;return e?(this.input=e.slice(0,t-1)+e.slice(t),this.moveCursor(-1),this.complete()):this.alert()}deleteForward(){let{cursor:t,input:e}=this.state;return void 0===e[t]?this.alert():(this.input=`${e}`.slice(0,t)+`${e}`.slice(t+1),this.complete())}number(t){return this.append(t)}async complete(){this.completing=!0,this.choices=await this.suggest(this.input,this.state._choices),this.state.limit=void 0,this.index=Math.min(Math.max(this.visible.length-1,0),this.index),await this.render(),this.completing=!1}suggest(t=this.input,e=this.state._choices){if("function"==typeof this.options.suggest)return this.options.suggest.call(this,t,e);let i=t.toLowerCase();return e.filter((t=>t.message.toLowerCase().includes(i)))}pointer(){return""}format(){if(!this.focused)return this.input;if(this.options.multiple&&this.state.submitted)return this.selected.map((t=>this.styles.primary(t.message))).join(", ");if(this.state.submitted){let t=this.value=this.input=this.focused.value;return this.styles.primary(t)}return this.input}async render(){if("pending"!==this.state.status)return super.render();let t=this.options.highlight?this.options.highlight.bind(this):this.styles.placeholder,e=((t,e)=>{let i=t.toLowerCase();return t=>{let s=t.toLowerCase().indexOf(i),r=e(t.slice(s,s+i.length));return s>=0?t.slice(0,s)+r+t.slice(s+i.length):t}})(this.input,t),i=this.choices;this.choices=i.map((t=>({...t,message:e(t.message)}))),await super.render(),this.choices=i}submit(){return this.options.multiple&&(this.value=this.selected.map((t=>t.name))),super.submit()}},On}())),i("BasicAuth",(()=>function(){if(Ln)return Rn;Ln=1;const t=Ao();function e(t,e){return t.username===this.options.username&&t.password===this.options.password}const i=(s=e)=>{const r=[{name:"username",message:"username"},{name:"password",message:"password",format(t){return this.options.showPassword?t:(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(t.length))}}];class n extends(t.create(s)){constructor(t){super({...t,choices:r})}static create(t){return i(t)}}return n};return Rn=i()}())),i("Confirm",(()=>function(){if(jn)return In;jn=1;const t=To();return In=class extends t{constructor(t){super(t),this.default=this.options.default||(this.initial?"(Y/n)":"(y/N)")}}}())),i("Editable",(()=>function(){if(Mn)return Fn;Mn=1;const t=_o(),e=ko().prototype;return Fn=class extends t{constructor(t){super({...t,multiple:!0}),this.align=[this.options.align,"left"].find((t=>null!=t)),this.emptyError="",this.values={}}dispatch(t,i){let s=this.focused,r=s.parent||{};return s.editable||r.editable||"a"!==t&&"i"!==t?e.dispatch.call(this,t,i):super[t]()}append(t,i){return e.append.call(this,t,i)}delete(t,i){return e.delete.call(this,t,i)}space(t){return this.focused.editable?this.append(t):super.space()}number(t){return this.focused.editable?this.append(t):super.number(t)}next(){return this.focused.editable?e.next.call(this):super.next()}prev(){return this.focused.editable?e.prev.call(this):super.prev()}async indicator(t,e){let i=t.indicator||"",s=t.editable?i:super.indicator(t,e);return await this.resolve(s,this.state,t,e)||""}indent(t){return"heading"===t.role?"":t.editable?" ":"  "}async renderChoice(t,i){return t.indent="",t.editable?e.renderChoice.call(this,t,i):super.renderChoice(t,i)}error(){return""}footer(){return this.state.error}async validate(){let t=!0;for(let e of this.choices){if("function"!=typeof e.validate)continue;if("heading"===e.role)continue;let i=e.parent?this.value[e.parent.name]:this.value;if(e.editable?i=e.value===e.name?e.initial||"":e.value:this.isDisabled(e)||(i=!0===e.enabled),t=await e.validate(i,this.state),!0!==t)break}return!0!==t&&(this.state.error="string"==typeof t?t:"Invalid Input"),t}submit(){if(!0===this.focused.newChoice)return super.submit();if(this.choices.some((t=>t.newChoice)))return this.alert();this.value={};for(let t of this.choices){let e=t.parent?this.value[t.parent.name]:this.value;"heading"!==t.role?t.editable?e[t.name]=t.value===t.name?t.initial||"":t.value:this.isDisabled(t)||(e[t.name]=!0===t.enabled):this.value[t.name]={}}return this.base.submit.call(this)}}}())),i("Form",(()=>ko())),i("Input",(()=>Lo())),i("Invisible",(()=>function(){if(Un)return Vn;Un=1;const t=Po();return Vn=class extends t{format(){return""}}}())),i("List",(()=>function(){if(Yn)return qn;Yn=1;const t=Po();return qn=class extends t{constructor(t={}){super(t),this.sep=this.options.separator||/, */,this.initial=t.initial||""}split(t=this.value){return t?String(t).split(this.sep):[]}format(){let t=this.state.submitted?this.styles.primary:t=>t;return this.list.map(t).join(", ")}async submit(t){let e=this.state.error||await this.validate(this.list,this.state);return!0!==e?(this.state.error=e,super.submit()):(this.value=this.list,super.submit())}get list(){return this.split()}},qn}())),i("MultiSelect",(()=>function(){if(Zn)return Kn;Zn=1;const t=_o();return Kn=class extends t{constructor(t){super({...t,multiple:!0})}}}())),i("Numeral",(()=>to?Qn:(to=1,Qn=$o()))),i("Password",(()=>function(){if(io)return eo;io=1;const t=Po();return eo=class extends t{constructor(t){super(t),this.cursorShow()}format(t=this.input){return this.keypressed?(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(t.length)):""}},eo}())),i("Scale",(()=>function(){if(ro)return so;ro=1;const t=Ur,e=Eo(),i=zr;return so=class extends e{constructor(t={}){super(t),this.widths=[].concat(t.messageWidth||50),this.align=[].concat(t.align||"left"),this.linebreak=t.linebreak||!1,this.edgeLength=t.edgeLength||3,this.newline=t.newline||"\n   ";let e=t.startNumber||1;"number"==typeof this.scale&&(this.scaleKey=!1,this.scale=Array(this.scale).fill(0).map(((t,i)=>({name:i+e}))))}async reset(){return this.tableized=!1,await super.reset(),this.render()}tableize(){if(!0===this.tableized)return;this.tableized=!0;let t=0;for(let e of this.choices){t=Math.max(t,e.message.length),e.scaleIndex=e.initial||2,e.scale=[];for(let t=0;t<this.scale.length;t++)e.scale.push({index:t})}this.widths[0]=Math.min(this.widths[0],t+3)}async dispatch(t,e){if(this.multiple)return this[e.name]?await this[e.name](t,e):await super.dispatch(t,e);this.alert()}heading(t,e,i){return this.styles.strong(t)}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;return t.scaleIndex>=this.scale.length-1?this.alert():(t.scaleIndex++,this.render())}left(){let t=this.focused;return t.scaleIndex<=0?this.alert():(t.scaleIndex--,this.render())}indent(){return""}format(){return this.state.submitted?this.choices.map((t=>this.styles.info(t.index))).join(", "):""}pointer(){return""}renderScaleKey(){return!1===this.scaleKey||this.state.submitted?"":["",...this.scale.map((t=>`   ${t.name} - ${t.message}`))].map((t=>this.styles.muted(t))).join("\n")}renderScaleHeading(t){let e=this.scale.map((t=>t.name));"function"==typeof this.options.renderScaleHeading&&(e=this.options.renderScaleHeading.call(this,t));let i=this.scaleLength-e.join("").length,s=Math.round(i/(e.length-1)),r=e.map((t=>this.styles.strong(t))).join(" ".repeat(s)),n=" ".repeat(this.widths[0]);return this.margin[3]+n+this.margin[1]+r}scaleIndicator(t,e,i){if("function"==typeof this.options.scaleIndicator)return this.options.scaleIndicator.call(this,t,e,i);let s=t.scaleIndex===e.index;return e.disabled?this.styles.hint(this.symbols.radio.disabled):s?this.styles.success(this.symbols.radio.on):this.symbols.radio.off}renderScale(t,e){let i=t.scale.map((i=>this.scaleIndicator(t,i,e))),s="Hyper"===this.term?"":" ";return i.join(s+this.symbols.line.repeat(this.edgeLength))}async renderChoice(e,s){await this.onChoice(e,s);let r=this.index===s,n=await this.pointer(e,s),o=await e.hint;o&&!i.hasColor(o)&&(o=this.styles.muted(o));let a=t=>this.margin[3]+t.replace(/\s+$/,"").padEnd(this.widths[0]," "),h=this.newline,l=this.indent(e),c=await this.resolve(e.message,this.state,e,s),u=await this.renderScale(e,s),p=this.margin[1]+this.margin[3];this.scaleLength=t.unstyle(u).length,this.widths[0]=Math.min(this.widths[0],this.width-this.scaleLength-p.length);let d=i.wordWrap(c,{width:this.widths[0],newline:h}).split("\n").map((t=>a(t)+this.margin[1]));return r&&(u=this.styles.info(u),d=d.map((t=>this.styles.info(t)))),d[0]+=u,this.linebreak&&d.push(""),[l+n,d.join("\n")].filter(Boolean)}async renderChoices(){if(this.state.submitted)return"";this.tableize();let t=this.visible.map((async(t,e)=>await this.renderChoice(t,e))),e=await Promise.all(t),i=await this.renderScaleHeading();return this.margin[0]+[i,...e.map((t=>t.join(" ")))].join("\n")}async render(){let{submitted:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=await this.message(),n="";!1!==this.options.promptLine&&(n=[i,r,s,""].join(" "),this.state.prompt=n);let o=await this.header(),a=await this.format(),h=await this.renderScaleKey(),l=await this.error()||await this.hint(),c=await this.renderChoices(),u=await this.footer(),p=this.emptyError;a&&(n+=a),l&&!n.includes(l)&&(n+=" "+l),t&&!a&&!c.trim()&&this.multiple&&null!=p&&(n+=this.styles.danger(p)),this.clear(e),this.write([o,n,h,c,u].filter(Boolean).join("\n")),this.state.submitted||this.write(this.margin[2]),this.restore()}submit(){this.value={};for(let t of this.choices)this.value[t.name]=t.scaleIndex;return this.base.submit.call(this)}},so}())),i("Select",(()=>_o())),i("Snippet",(()=>function(){if(ho)return ao;ho=1;const t=Ur,e=No(),i=gn();return ao=class extends i{constructor(t){super(t),this.cursorHide(),this.reset(!0)}async initialize(){this.interpolate=await e(this),await super.initialize()}async reset(t){this.state.keys=[],this.state.invalid=new Map,this.state.missing=new Set,this.state.completed=0,this.state.values={},!0!==t&&(await this.initialize(),await this.render())}moveCursor(t){let e=this.getItem();this.cursor+=t,e.cursor+=t}dispatch(t,e){e.code||e.ctrl||null==t||!this.getItem()?this.alert():this.append(t,e)}append(t,e){let i=this.getItem(),s=i.input.slice(0,this.cursor),r=i.input.slice(this.cursor);this.input=i.input=`${s}${t}${r}`,this.moveCursor(1),this.render()}delete(){let t=this.getItem();if(this.cursor<=0||!t.input)return this.alert();let e=t.input.slice(this.cursor),i=t.input.slice(0,this.cursor-1);this.input=t.input=`${i}${e}`,this.moveCursor(-1),this.render()}increment(t){return t>=this.state.keys.length-1?0:t+1}decrement(t){return t<=0?this.state.keys.length-1:t-1}first(){this.state.index=0,this.render()}last(){this.state.index=this.state.keys.length-1,this.render()}right(){if(this.cursor>=this.input.length)return this.alert();this.moveCursor(1),this.render()}left(){if(this.cursor<=0)return this.alert();this.moveCursor(-1),this.render()}prev(){this.state.index=this.decrement(this.state.index),this.getItem(),this.render()}next(){this.state.index=this.increment(this.state.index),this.getItem(),this.render()}up(){this.prev()}down(){this.next()}format(t){let e=this.state.completed<100?this.styles.warning:this.styles.success;return!0===this.state.submitted&&100!==this.state.completed&&(e=this.styles.danger),e(`${this.state.completed}% completed`)}async render(){let{index:t,keys:e=[],submitted:i,size:s}=this.state,r=[this.options.newline,"\n"].find((t=>null!=t)),n=await this.prefix(),o=await this.separator(),a=[n,await this.message(),o].filter(Boolean).join(" ");this.state.prompt=a;let h=await this.header(),l=await this.error()||"",c=await this.hint()||"",u=i?"":await this.interpolate(this.state),p=this.state.key=e[t]||"",d=await this.format(p),f=await this.footer();d&&(a+=" "+d),c&&!d&&0===this.state.completed&&(a+=" "+c),this.clear(s);let m=[h,a,u,f,l.trim()];this.write(m.filter(Boolean).join(r)),this.restore()}getItem(t){let{items:e,keys:i,index:s}=this.state,r=e.find((t=>t.name===i[s]));return r&&null!=r.input&&(this.input=r.input,this.cursor=r.cursor),r}async submit(){"function"!=typeof this.interpolate&&await this.initialize(),await this.interpolate(this.state,!0);let{invalid:e,missing:i,output:s,values:r}=this.state;if(e.size){let t="";for(let[i,s]of e)t+=`Invalid ${i}: ${s}\n`;return this.state.error=t,super.submit()}if(i.size)return this.state.error="Required: "+[...i.keys()].join(", "),super.submit();let n=t.unstyle(s).split("\n").map((t=>t.slice(1))).join("\n");return this.value={values:r,result:n},super.submit()}},ao}())),i("Sort",(()=>function(){if(co)return lo;co=1;const t="(Use <shift>+<up/down> to sort)",e=_o();return lo=class extends e{constructor(e){super({...e,reorder:!1,sort:!0,multiple:!0}),this.state.hint=[this.options.hint,t].find(this.isValue.bind(this))}indicator(){return""}async renderChoice(t,e){let i=await super.renderChoice(t,e),s=this.symbols.identicalTo+" ",r=this.index===e&&this.sorting?this.styles.muted(s):"  ";return!1===this.options.drag&&(r=""),!0===this.options.numbered?r+`${e+1} - `+i:r+i}get selected(){return this.choices}submit(){return this.value=this.choices.map((t=>t.value)),super.submit()}}}())),i("Survey",(()=>Io())),i("Text",(()=>mo?fo:(mo=1,fo=Lo()))),i("Toggle",(()=>function(){if(yo)return go;yo=1;const t=To();return go=class extends t{async initialize(){await super.initialize(),this.value=this.initial=!!this.options.initial,this.disabled=this.options.disabled||"no",this.enabled=this.options.enabled||"yes",await this.render()}reset(){this.value=this.initial,this.render()}delete(){this.alert()}toggle(){this.value=!this.value,this.render()}enable(){if(!0===this.value)return this.alert();this.value=!0,this.render()}disable(){if(!1===this.value)return this.alert();this.value=!1,this.render()}up(){this.toggle()}down(){this.toggle()}right(){this.toggle()}left(){this.toggle()}next(){this.toggle()}prev(){this.toggle()}dispatch(t="",e){switch(t.toLowerCase()){case" ":return this.toggle();case"1":case"y":case"t":return this.enable();case"0":case"n":case"f":return this.disable();default:return this.alert()}}format(){let t=t=>this.styles.primary.underline(t);return[this.value?this.disabled:t(this.disabled),this.value?t(this.enabled):this.enabled].join(this.styles.muted(" / "))}async render(){let{size:t}=this.state,e=await this.header(),i=await this.prefix(),s=await this.separator(),r=await this.message(),n=await this.format(),o=await this.error()||await this.hint(),a=await this.footer(),h=[i,r,s,n].join(" ");this.state.prompt=h,o&&!h.includes(o)&&(h+=" "+o),this.clear(t),this.write([e,h,a].filter(Boolean).join("\n")),this.write(this.margin[2]),this.restore()}},go}())),i("Quiz",(()=>function(){if(bo)return wo;bo=1;const t=_o();return wo=class extends t{constructor(t){if(super(t),"number"!=typeof this.options.correctChoice||this.options.correctChoice<0)throw new Error("Please specify the index of the correct answer from the list of choices")}async toChoices(t,e){let i=await super.toChoices(t,e);if(i.length<2)throw new Error("Please give at least two choices to the user");if(this.options.correctChoice>i.length)throw new Error("Please specify the index of the correct answer from the list of choices");return i}check(t){return t.index===this.options.correctChoice}async result(t){return{selectedAnswer:t,correctAnswer:this.options.choices[this.options.correctChoice].value,correct:await this.check(this.state)}}},wo}()))}(Oo)),Oo}const Fo=d,Mo=i,Do=zr;class Bo extends Mo{constructor(t,e){super(),this.options=Do.merge({},t),this.answers={...e}}register(t,e){if(Do.isObject(t)){for(let e of Object.keys(t))this.register(e,t[e]);return this}Fo.equal(typeof e,"function","expected a function");let i=t.toLowerCase();return e.prototype instanceof this.Prompt?this.prompts[i]=e:this.prompts[i]=e(this.Prompt,this),this}async prompt(t=[]){for(let e of[].concat(t))try{"function"==typeof e&&(e=await e.call(this)),await this.ask(Do.merge({},this.options,e))}catch(t){return Promise.reject(t)}return this.answers}async ask(t){"function"==typeof t&&(t=await t.call(this));let e=Do.merge({},this.options,t),{type:i,name:s}=t,{set:r,get:n}=Do;if("function"==typeof i&&(i=await i.call(this,t,this.answers)),!i)return this.answers[s];Fo(this.prompts[i],`Prompt "${i}" is not registered`);let o=new this.prompts[i](e),a=n(this.answers,s);o.state.answers=this.answers,o.enquirer=this,s&&o.on("submit",(t=>{this.emit("answer",s,t,o),r(this.answers,s,t)}));let h=o.emit.bind(o);return o.emit=(...t)=>(this.emit.call(this,...t),h(...t)),this.emit("prompt",o,this),e.autofill&&null!=a?(o.value=o.input=a,"show"===e.autofill&&await o.submit()):a=o.value=await o.run(),a}use(t){return t.call(this,this),this}set Prompt(t){this._Prompt=t}get Prompt(){return this._Prompt||this.constructor.Prompt}get prompts(){return this.constructor.prompts}static set Prompt(t){this._Prompt=t}static get Prompt(){return this._Prompt||gn()}static get prompts(){return jo()}static get types(){return So?xo:(So=1,xo={ArrayPrompt:Eo(),AuthPrompt:Ao(),BooleanPrompt:To(),NumberPrompt:$o(),StringPrompt:Po()})}static get prompt(){const t=(e,...i)=>{let s=new this(...i),r=s.emit.bind(s);return s.emit=(...e)=>(t.emit(...e),r(...e)),s.prompt(e)};return Do.mixinEmitter(t,new Mo),t}}Do.mixinEmitter(Bo,new Mo);const zo=Bo.prompts;for(let t of Object.keys(zo)){let e=t.toLowerCase(),i=e=>new zo[t](e).run();Bo.prompt[e]=i,Bo[e]=i,Bo[t]||Reflect.defineProperty(Bo,t,{get:()=>zo[t]})}const Go=t=>{Do.defineExport(Bo,t,(()=>Bo.types[t]))};Go("ArrayPrompt"),Go("AuthPrompt"),Go("BooleanPrompt"),Go("NumberPrompt"),Go("StringPrompt");var Wo,Ho,Vo,Uo,qo,Yo=Bo,Ko={exports:{}};qo="win32"===process.platform||_.TESTING_WINDOWS?function(){if(Ho)return Wo;Ho=1,Wo=i,i.sync=function(i,s){return e(t.statSync(i),i,s)};var t=n;function e(t,e,i){return!(!t.isSymbolicLink()&&!t.isFile())&&function(t,e){var i=void 0!==e.pathExt?e.pathExt:process.env.PATHEXT;if(!i)return!0;if(-1!==(i=i.split(";")).indexOf(""))return!0;for(var s=0;s<i.length;s++){var r=i[s].toLowerCase();if(r&&t.substr(-r.length).toLowerCase()===r)return!0}return!1}(e,i)}function i(i,s,r){t.stat(i,(function(t,n){r(t,!t&&e(n,i,s))}))}return Wo}():function(){if(Uo)return Vo;Uo=1,Vo=e,e.sync=function(e,s){return i(t.statSync(e),s)};var t=n;function e(e,s,r){t.stat(e,(function(t,e){r(t,!t&&i(e,s))}))}function i(t,e){return t.isFile()&&function(t,e){var i=t.mode,s=t.uid,r=t.gid,n=void 0!==e.uid?e.uid:process.getuid&&process.getuid(),o=void 0!==e.gid?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),h=parseInt("010",8);return i&parseInt("001",8)||i&h&&r===o||i&a&&s===n||i&(a|h)&&0===n}(t,e)}return Vo}();var Zo=Jo;function Jo(t,e,i){if("function"==typeof e&&(i=e,e={}),!i){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(i,s){Jo(t,e||{},(function(t,e){t?s(t):i(e)}))}))}qo(t,e||{},(function(t,s){t&&("EACCES"===t.code||e&&e.ignoreErrors)&&(t=null,s=!1),i(t,s)}))}Jo.sync=function(t,e){try{return qo.sync(t,e||{})}catch(t){if(e&&e.ignoreErrors||"EACCES"===t.code)return!1;throw t}};const Xo="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,Qo=r,ta=Xo?";":":",ea=Zo,ia=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),sa=(t,e)=>{const i=e.colon||ta,s=t.match(/\//)||Xo&&t.match(/\\/)?[""]:[...Xo?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(i)],r=Xo?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",n=Xo?r.split(i):[""];return Xo&&-1!==t.indexOf(".")&&""!==n[0]&&n.unshift(""),{pathEnv:s,pathExt:n,pathExtExe:r}},ra=(t,e,i)=>{"function"==typeof e&&(i=e,e={}),e||(e={});const{pathEnv:s,pathExt:r,pathExtExe:n}=sa(t,e),o=[],a=i=>new Promise(((r,n)=>{if(i===s.length)return e.all&&o.length?r(o):n(ia(t));const a=s[i],l=/^".*"$/.test(a)?a.slice(1,-1):a,c=Qo.join(l,t),u=!l&&/^\.[\\\/]/.test(t)?t.slice(0,2)+c:c;r(h(u,i,0))})),h=(t,i,s)=>new Promise(((l,c)=>{if(s===r.length)return l(a(i+1));const u=r[s];ea(t+u,{pathExt:n},((r,n)=>{if(!r&&n){if(!e.all)return l(t+u);o.push(t+u)}return l(h(t,i,s+1))}))}));return i?a(0).then((t=>i(null,t)),i):a(0)};var na=ra;ra.sync=(t,e)=>{e=e||{};const{pathEnv:i,pathExt:s,pathExtExe:r}=sa(t,e),n=[];for(let o=0;o<i.length;o++){const a=i[o],h=/^".*"$/.test(a)?a.slice(1,-1):a,l=Qo.join(h,t),c=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+l:l;for(let t=0;t<s.length;t++){const i=c+s[t];try{if(ea.sync(i,{pathExt:r})){if(!e.all)return i;n.push(i)}}catch(t){}}}if(e.all&&n.length)return n;if(e.nothrow)return null;throw ia(t)};var oa={exports:{}};const aa=(t={})=>{const e=t.env||process.env;return"win32"!==(t.platform||process.platform)?"PATH":Object.keys(e).reverse().find((t=>"PATH"===t.toUpperCase()))||"Path"};oa.exports=aa,oa.exports.default=aa;var ha=oa.exports;const la=r,ca=na,ua=ha;function pa(t,e){const i=t.options.env||process.env,s=process.cwd(),r=null!=t.options.cwd,n=r&&void 0!==process.chdir&&!process.chdir.disabled;if(n)try{process.chdir(t.options.cwd)}catch(t){}let o;try{o=ca.sync(t.command,{path:i[ua({env:i})],pathExt:e?la.delimiter:void 0})}catch(t){}finally{n&&process.chdir(s)}return o&&(o=la.resolve(r?t.options.cwd:"",o)),o}var da=function(t){return pa(t)||pa(t,!0)},fa={};const ma=/([()\][%!^"`<>&|;, *?])/g;fa.command=function(t){return t=t.replace(ma,"^$1")},fa.argument=function(t,e){return t=(t=`"${t=(t=(t=`${t}`).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(ma,"^$1"),e&&(t=t.replace(ma,"^$1")),t};const ga=/^#!(.*)/;const ya=n,wa=(t="")=>{const e=t.match(ga);if(!e)return null;const[i,s]=e[0].replace(/#! ?/,"").split(" "),r=i.split("/").pop();return"env"===r?s:s?`${r} ${s}`:r};var ba=function(t){const e=Buffer.alloc(150);let i;try{i=ya.openSync(t,"r"),ya.readSync(i,e,0,150,0),ya.closeSync(i)}catch(t){}return wa(e.toString())};const va=r,xa=da,Sa=fa,Oa=ba,Ea="win32"===process.platform,_a=/\.(?:com|exe)$/i,Ca=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function ka(t){if(!Ea)return t;const e=function(t){t.file=xa(t);const e=t.file&&Oa(t.file);return e?(t.args.unshift(t.file),t.command=e,xa(t)):t.file}(t),i=!_a.test(e);if(t.options.forceShell||i){const i=Ca.test(e);t.command=va.normalize(t.command),t.command=Sa.command(t.command),t.args=t.args.map((t=>Sa.argument(t,i)));const s=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${s}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}var Aa=function(t,e,i){e&&!Array.isArray(e)&&(i=e,e=null);const s={command:t,args:e=e?e.slice(0):[],options:i=Object.assign({},i),file:void 0,original:{command:t,args:e}};return i.shell?s:ka(s)};const Ta="win32"===process.platform;function Pa(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function Ra(t,e){return Ta&&1===t&&!e.file?Pa(e.original,"spawn"):null}var La={hookChildProcess:function(t,e){if(!Ta)return;const i=t.emit;t.emit=function(s,r){if("exit"===s){const s=Ra(r,e);if(s)return i.call(t,"error",s)}return i.apply(t,arguments)}},verifyENOENT:Ra,verifyENOENTSync:function(t,e){return Ta&&1===t&&!e.file?Pa(e.original,"spawnSync"):null},notFoundError:Pa};const $a=s,Na=Aa,Ia=La;function ja(t,e,i){const s=Na(t,e,i),r=$a.spawn(s.command,s.args,s.options);return Ia.hookChildProcess(r,s),r}Ko.exports=ja,Ko.exports.spawn=ja,Ko.exports.sync=function(t,e,i){const s=Na(t,e,i),r=$a.spawnSync(s.command,s.args,s.options);return r.error=r.error||Ia.verifyENOENTSync(r.status,s),r},Ko.exports._parse=Na,Ko.exports._enoent=Ia;var Fa=C(Ko.exports);function Ma(t={}){const{env:e=process.env,platform:i=process.platform}=t;return"win32"!==i?"PATH":Object.keys(e).reverse().find((t=>"PATH"===t.toUpperCase()))||"Path"}function Da({env:t=y.env,...i}={}){const s=Ma({env:t={...t}});return i.path=t[s],t[s]=function(t={}){const{cwd:i=y.cwd(),path:s=y.env[Ma()],execPath:r=y.execPath}=t;let n;const o=i instanceof URL?w.fileURLToPath(i):i;let a=e.resolve(o);const h=[];for(;n!==a;)h.push(e.join(a,"node_modules/.bin")),n=a,a=e.resolve(a,"..");return h.push(e.resolve(o,r,"..")),[...h,s].join(e.delimiter)}(i),t}const Ba=(t,e,i,s)=>{if("length"===i||"prototype"===i)return;if("arguments"===i||"caller"===i)return;const r=Object.getOwnPropertyDescriptor(t,i),n=Object.getOwnPropertyDescriptor(e,i);!za(r,n)&&s||Object.defineProperty(t,i,n)},za=function(t,e){return void 0===t||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},Ga=(t,e)=>`/* Wrapped ${t}*/\n${e}`,Wa=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Ha=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");function Va(t,e,{ignoreNonConfigurable:i=!1}={}){const{name:s}=t;for(const s of Reflect.ownKeys(e))Ba(t,e,s,i);return((t,e)=>{const i=Object.getPrototypeOf(e);i!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,i)})(t,e),((t,e,i)=>{const s=""===i?"":`with ${i.trim()}() `,r=Ga.bind(null,s,e.toString());Object.defineProperty(r,"name",Ha),Object.defineProperty(t,"toString",{...Wa,value:r})})(t,e,s),t}const Ua=new WeakMap,qa=(t,e={})=>{if("function"!=typeof t)throw new TypeError("Expected a function");let i,s=0;const r=t.displayName||t.name||"<anonymous>",n=function(...o){if(Ua.set(n,++s),1===s)i=t.apply(this,o),t=null;else if(!0===e.throw)throw new Error(`Function \`${r}\` can only be called once`);return i};return Va(n,t),Ua.set(n,s),n};qa.callCount=t=>{if(!Ua.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return Ua.get(t)};const Ya=(t,e)=>({name:`SIGRT${e+1}`,number:Ka+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),Ka=34,Za=64,Ja=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}],Xa=()=>{const t=(()=>{const t=Za-Ka+1;return Array.from({length:t},Ya)})();return[...Ja,...t].map(Qa)},Qa=({name:t,number:e,description:i,action:s,forced:r=!1,standard:n})=>{const{signals:{[t]:o}}=b.constants,a=void 0!==o;return{name:t,number:a?o:e,description:i,supported:a,action:s,forced:r,standard:n}},th=({name:t,number:e,description:i,supported:s,action:r,forced:n,standard:o})=>[t,{name:t,number:e,description:i,supported:s,action:r,forced:n,standard:o}],eh=(()=>{const t=Xa();return Object.fromEntries(t.map(th))})(),ih=(t,e)=>{const i=sh(t,e);if(void 0===i)return{};const{name:s,description:r,supported:n,action:o,forced:a,standard:h}=i;return{[t]:{name:s,number:t,description:r,supported:n,action:o,forced:a,standard:h}}},sh=(t,e)=>{const i=e.find((({name:e})=>b.constants.signals[e]===t));return void 0!==i?i:e.find((e=>e.number===t))};(()=>{const t=Xa(),e=Za+1,i=Array.from({length:e},((e,i)=>ih(i,t)));Object.assign({},...i)})();const rh=({stdout:t,stderr:e,all:i,error:s,signal:r,exitCode:n,command:o,escapedCommand:a,timedOut:h,isCanceled:l,killed:c,parsed:{options:{timeout:u}}})=>{n=null===n?void 0:n;const p=void 0===(r=null===r?void 0:r)?void 0:eh[r].description,d=(({timedOut:t,timeout:e,errorCode:i,signal:s,signalDescription:r,exitCode:n,isCanceled:o})=>t?`timed out after ${e} milliseconds`:o?"was canceled":void 0!==i?`failed with ${i}`:void 0!==s?`was killed with ${s} (${r})`:void 0!==n?`failed with exit code ${n}`:"failed")({timedOut:h,timeout:u,errorCode:s&&s.code,signal:r,signalDescription:p,exitCode:n,isCanceled:l}),f=`Command ${d}: ${o}`,m="[object Error]"===Object.prototype.toString.call(s),g=m?`${f}\n${s.message}`:f,y=[g,e,t].filter(Boolean).join("\n");return m?(s.originalMessage=s.message,s.message=y):s=new Error(y),s.shortMessage=g,s.command=o,s.escapedCommand=a,s.exitCode=n,s.signal=r,s.signalDescription=p,s.stdout=t,s.stderr=e,void 0!==i&&(s.all=i),"bufferedData"in s&&delete s.bufferedData,s.failed=!0,s.timedOut=Boolean(h),s.isCanceled=l,s.killed=c&&!h,s},nh=["stdin","stdout","stderr"],oh=t=>{if(!t)return;const{stdio:e}=t;if(void 0===e)return nh.map((e=>t[e]));if((t=>nh.some((e=>void 0!==t[e])))(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${nh.map((t=>`\`${t}\``)).join(", ")}`);if("string"==typeof e)return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);const i=Math.max(e.length,nh.length);return Array.from({length:i},((t,i)=>e[i]))};var ah,hh={exports:{}},lh={exports:{}};var ch=_.process;const uh=function(t){return t&&"object"==typeof t&&"function"==typeof t.removeListener&&"function"==typeof t.emit&&"function"==typeof t.reallyExit&&"function"==typeof t.listeners&&"function"==typeof t.kill&&"number"==typeof t.pid&&"function"==typeof t.on};if(uh(ch)){var ph,dh=d,fh=(ah||(ah=1,(Ch=lh).exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&Ch.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&Ch.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")),lh.exports),mh=/^win/i.test(ch.platform),gh=i;"function"!=typeof gh&&(gh=gh.EventEmitter),ch.__signal_exit_emitter__?ph=ch.__signal_exit_emitter__:((ph=ch.__signal_exit_emitter__=new gh).count=0,ph.emitted={}),ph.infinite||(ph.setMaxListeners(1/0),ph.infinite=!0),hh.exports=function(t,e){if(!uh(_.process))return function(){};dh.equal(typeof t,"function","a callback must be provided for exit handler"),!1===vh&&xh();var i="exit";e&&e.alwaysLast&&(i="afterexit");return ph.on(i,t),function(){ph.removeListener(i,t),0===ph.listeners("exit").length&&0===ph.listeners("afterexit").length&&yh()}};var yh=function(){vh&&uh(_.process)&&(vh=!1,fh.forEach((function(t){try{ch.removeListener(t,bh[t])}catch(t){}})),ch.emit=Eh,ch.reallyExit=Sh,ph.count-=1)};hh.exports.unload=yh;var wh=function(t,e,i){ph.emitted[t]||(ph.emitted[t]=!0,ph.emit(t,e,i))},bh={};fh.forEach((function(t){bh[t]=function(){uh(_.process)&&(ch.listeners(t).length===ph.count&&(yh(),wh("exit",null,t),wh("afterexit",null,t),mh&&"SIGHUP"===t&&(t="SIGINT"),ch.kill(ch.pid,t)))}})),hh.exports.signals=function(){return fh};var vh=!1,xh=function(){!vh&&uh(_.process)&&(vh=!0,ph.count+=1,fh=fh.filter((function(t){try{return ch.on(t,bh[t]),!0}catch(t){return!1}})),ch.emit=_h,ch.reallyExit=Oh)};hh.exports.load=xh;var Sh=ch.reallyExit,Oh=function(t){uh(_.process)&&(ch.exitCode=t||0,wh("exit",ch.exitCode,null),wh("afterexit",ch.exitCode,null),Sh.call(ch,ch.exitCode))},Eh=ch.emit,_h=function(t,e){if("exit"===t&&uh(_.process)){void 0!==e&&(ch.exitCode=e);var i=Eh.apply(this,arguments);return wh("exit",ch.exitCode,null),wh("afterexit",ch.exitCode,null),i}return Eh.apply(this,arguments)}}else hh.exports=function(){return function(){}};var Ch,kh=C(hh.exports);const Ah=(t,e="SIGTERM",i={})=>{const s=t(e);return Th(t,e,i,s),s},Th=(t,e,i,s)=>{if(!Ph(e,i,s))return;const r=Lh(i),n=setTimeout((()=>{t("SIGKILL")}),r);n.unref&&n.unref()},Ph=(t,{forceKillAfterTimeout:e},i)=>Rh(t)&&!1!==e&&i,Rh=t=>t===b.constants.signals.SIGTERM||"string"==typeof t&&"SIGTERM"===t.toUpperCase(),Lh=({forceKillAfterTimeout:t=!0})=>{if(!0===t)return 5e3;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);return t},$h=(t,e)=>{t.kill()&&(e.isCanceled=!0)},Nh=(t,{timeout:e,killSignal:i="SIGTERM"},s)=>{if(0===e||void 0===e)return s;let r;const n=new Promise(((s,n)=>{r=setTimeout((()=>{((t,e,i)=>{t.kill(e),i(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))})(t,i,n)}),e)})),o=s.finally((()=>{clearTimeout(r)}));return Promise.race([n,o])};function Ih(t){return null!==t&&"object"==typeof t&&"function"==typeof t.pipe}function jh(t){return Ih(t)&&!1!==t.writable&&"function"==typeof t._write&&"object"==typeof t._writableState}const Fh=(e,i,s)=>{if("string"==typeof s)return e[i].pipe(t.createWriteStream(s)),e;if(jh(s))return e[i].pipe(s),e;if(!(t=>t instanceof g.ChildProcess&&"function"==typeof t.then)(s))throw new TypeError("The second argument must be a string, a stream or an Execa child process.");if(!jh(s.stdin))throw new TypeError("The target child process's stdin must be available.");return e[i].pipe(s.stdin),s};var Mh={exports:{}};const{PassThrough:Dh}=c;const{constants:Bh}=v,zh=c,{promisify:Gh}=a,Wh=t=>{t={...t};const{array:e}=t;let{encoding:i}=t;const s="buffer"===i;let r=!1;e?r=!(i||s):i=i||"utf8",s&&(i=null);const n=new Dh({objectMode:r});i&&n.setEncoding(i);let o=0;const a=[];return n.on("data",(t=>{a.push(t),r?o=a.length:o+=t.length})),n.getBufferedValue=()=>e?a:s?Buffer.concat(a,o):a.join(""),n.getBufferedLength=()=>o,n},Hh=Gh(zh.pipeline);class Vh extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function Uh(t,e){if(!t)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};const{maxBuffer:i}=e,s=Wh(e);return await new Promise(((e,r)=>{const n=t=>{t&&s.getBufferedLength()<=Bh.MAX_LENGTH&&(t.bufferedData=s.getBufferedValue()),r(t)};(async()=>{try{await Hh(t,s),e()}catch(t){n(t)}})(),s.on("data",(()=>{s.getBufferedLength()>i&&n(new Vh)}))})),s.getBufferedValue()}Mh.exports=Uh,Mh.exports.buffer=(t,e)=>Uh(t,{...e,encoding:"buffer"}),Mh.exports.array=(t,e)=>Uh(t,{...e,array:!0}),Mh.exports.MaxBufferError=Vh;var qh=C(Mh.exports);const{PassThrough:Yh}=c;var Kh=function(){var t=[],e=new Yh({objectMode:!0});return e.setMaxListeners(0),e.add=i,e.isEmpty=function(){return 0==t.length},e.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(i),e;function i(r){return Array.isArray(r)?(r.forEach(i),this):(t.push(r),r.once("end",s.bind(null,r)),r.once("error",e.emit.bind(e,"error")),r.pipe(e,{end:!1}),this)}function s(i){!(t=t.filter((function(t){return t!==i}))).length&&e.readable&&e.end()}},Zh=C(Kh);const Jh=({input:e,inputFile:i})=>"string"!=typeof i?e:((t=>{if(void 0!==t)throw new TypeError("The `input` and `inputFile` options cannot be both set.")})(e),t.createReadStream(i)),Xh=async(t,e)=>{if(t&&void 0!==e){t.destroy();try{return await e}catch(t){return t.bufferedData}}},Qh=(t,{encoding:e,buffer:i,maxBuffer:s})=>{if(t&&i)return e?qh(t,{encoding:e,maxBuffer:s}):qh.buffer(t,{maxBuffer:s})},tl=(async()=>{})().constructor.prototype,el=["then","catch","finally"].map((t=>[t,Reflect.getOwnPropertyDescriptor(tl,t)])),il=(t,e)=>{for(const[i,s]of el){const r="function"==typeof e?(...t)=>Reflect.apply(s.value,e(),t):s.value.bind(e);Reflect.defineProperty(t,i,{...s,value:r})}},sl=(t,e=[])=>Array.isArray(e)?[t,...e]:[t],rl=/^[\w.-]+$/,nl=/"/g,ol=(t,e)=>sl(t,e).map((t=>(t=>"string"!=typeof t||rl.test(t)?t:`"${t.replace(nl,'\\"')}"`)(t))).join(" "),al=x.debuglog("execa").enabled,hl=(t,e)=>String(t).padStart(e,"0"),ll=(t,{verbose:e})=>{e&&y.stderr.write(`[${(()=>{const t=new Date;return`${hl(t.getHours(),2)}:${hl(t.getMinutes(),2)}:${hl(t.getSeconds(),2)}.${hl(t.getMilliseconds(),3)}`})()}] ${t}\n`)},cl=(t,i,s={})=>{const r=Fa._parse(t,i,s);return t=r.command,i=r.args,(s={maxBuffer:1e8,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:(s=r.options).cwd||y.cwd(),execPath:y.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,verbose:al,...s}).env=(({env:t,extendEnv:e,preferLocal:i,localDir:s,execPath:r})=>{const n=e?{...y.env,...t}:t;return i?Da({env:n,cwd:s,execPath:r}):n})(s),s.stdio=oh(s),"win32"===y.platform&&"cmd"===e.basename(t,".exe")&&i.unshift("/q"),{file:t,args:i,options:s,parsed:r}},ul=(t,e,i)=>"string"==typeof e||m.Buffer.isBuffer(e)?t.stripFinalNewline?function(t){const e="string"==typeof t?"\n":"\n".charCodeAt(),i="string"==typeof t?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,-1)),t[t.length-1]===i&&(t=t.slice(0,-1)),t}(e):e:void 0===i?void 0:"";function pl(t,e,i){const s=cl(t,e,i),r=((t,e)=>sl(t,e).join(" "))(t,e),n=ol(t,e);let o;ll(n,s.options),(({timeout:t})=>{if(void 0!==t&&(!Number.isFinite(t)||t<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`)})(s.options);try{o=g.spawn(s.file,s.args,s.options)}catch(t){const e=new g.ChildProcess,i=Promise.reject(rh({error:t,stdout:"",stderr:"",all:"",command:r,escapedCommand:n,parsed:s,timedOut:!1,isCanceled:!1,killed:!1}));return il(e,i),e}const a=(t=>new Promise(((e,i)=>{t.on("exit",((t,i)=>{e({exitCode:t,signal:i})})),t.on("error",(t=>{i(t)})),t.stdin&&t.stdin.on("error",(t=>{i(t)}))})))(o),h=Nh(o,s.options,a),l=(async(t,{cleanup:e,detached:i},s)=>{if(!e||i)return s;const r=kh((()=>{t.kill()}));return s.finally((()=>{r()}))})(o,s.options,h);o.kill=Ah.bind(null,o.kill.bind(o)),o.cancel=$h.bind(null,o,{isCanceled:!1});const c=qa((async()=>{const[{error:t,exitCode:e,signal:i,timedOut:a},h,c,u]=await(async({stdout:t,stderr:e,all:i},{encoding:s,buffer:r,maxBuffer:n},o)=>{const a=Qh(t,{encoding:s,buffer:r,maxBuffer:n}),h=Qh(e,{encoding:s,buffer:r,maxBuffer:n}),l=Qh(i,{encoding:s,buffer:r,maxBuffer:2*n});try{return await Promise.all([o,a,h,l])}catch(s){return Promise.all([{error:s,signal:s.signal,timedOut:s.timedOut},Xh(t,a),Xh(e,h),Xh(i,l)])}})(o,s.options,l),p=ul(s.options,h),d=ul(s.options,c),f=ul(s.options,u);if(t||0!==e||null!==i){const h=rh({error:t,exitCode:e,signal:i,stdout:p,stderr:d,all:f,command:r,escapedCommand:n,parsed:s,timedOut:a,isCanceled:!!s.options.signal&&s.options.signal.aborted,killed:o.killed});if(!s.options.reject)return h;throw h}return{command:r,escapedCommand:n,exitCode:0,stdout:p,stderr:d,all:f,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}));return((t,e)=>{const i=Jh(e);void 0!==i&&(Ih(i)?i.pipe(t.stdin):t.stdin.end(i))})(o,s.options),o.all=((t,{all:e})=>{if(!e||!t.stdout&&!t.stderr)return;const i=Zh();return t.stdout&&i.add(t.stdout),t.stderr&&i.add(t.stderr),i})(o,s.options),(t=>{null!==t.stdout&&(t.pipeStdout=Fh.bind(void 0,t,"stdout")),null!==t.stderr&&(t.pipeStderr=Fh.bind(void 0,t,"stderr")),void 0!==t.all&&(t.pipeAll=Fh.bind(void 0,t,"all"))})(o),il(o,c),o}var dl={};function fl(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function ml(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?fl(Object(i),!0).forEach((function(e){gl(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):fl(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function gl(t,e,i){return e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(dl,"__esModule",{value:!0});var yl=y,wl=b,bl=S;const vl=(t=0)=>e=>`[${e+t}m`,xl=(t=0)=>e=>`[${38+t};5;${e}m`,Sl=(t=0)=>(e,i,s)=>`[${38+t};2;${e};${i};${s}m`,Ol={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},El=Object.keys(Ol.modifier),_l=Object.keys(Ol.color),Cl=Object.keys(Ol.bgColor),kl=[..._l,...Cl];const Al=function(){const t=new Map;for(const[e,i]of Object.entries(Ol)){for(const[e,s]of Object.entries(i))Ol[e]={open:`[${s[0]}m`,close:`[${s[1]}m`},i[e]=Ol[e],t.set(s[0],s[1]);Object.defineProperty(Ol,e,{value:i,enumerable:!1})}return Object.defineProperty(Ol,"codes",{value:t,enumerable:!1}),Ol.color.close="[39m",Ol.bgColor.close="[49m",Ol.color.ansi=vl(),Ol.color.ansi256=xl(),Ol.color.ansi16m=Sl(),Ol.bgColor.ansi=vl(10),Ol.bgColor.ansi256=xl(10),Ol.bgColor.ansi16m=Sl(10),Object.defineProperties(Ol,{rgbToAnsi256:{value:(t,e,i)=>t===e&&e===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(e/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value(t){const e=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!e)return[0,0,0];let[i]=e;3===i.length&&(i=[...i].map((t=>t+t)).join(""));const s=Number.parseInt(i,16);return[s>>16&255,s>>8&255,255&s]},enumerable:!1},hexToAnsi256:{value:t=>Ol.rgbToAnsi256(...Ol.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return t-8+90;let e,i,s;if(t>=232)e=(10*(t-232)+8)/255,i=e,s=e;else{const r=(t-=16)%36;e=Math.floor(t/36)/5,i=Math.floor(r/6)/5,s=r%6/5}const r=2*Math.max(e,i,s);if(0===r)return 30;let n=30+(Math.round(s)<<2|Math.round(i)<<1|Math.round(e));return 2===r&&(n+=60),n},enumerable:!1},rgbToAnsi:{value:(t,e,i)=>Ol.ansi256ToAnsi(Ol.rgbToAnsi256(t,e,i)),enumerable:!1},hexToAnsi:{value:t=>Ol.ansi256ToAnsi(Ol.hexToAnsi256(t)),enumerable:!1}}),Ol}();function Tl(t,e=(globalThis.Deno?globalThis.Deno.args:yl.argv)){const i=t.startsWith("-")?"":1===t.length?"-":"--",s=e.indexOf(i+t),r=e.indexOf("--");return-1!==s&&(-1===r||s<r)}const{env:Pl}=yl;let Rl;function Ll(t,{streamIsTTY:e,sniffFlags:i=!0}={}){const s=function(){if("FORCE_COLOR"in Pl)return"true"===Pl.FORCE_COLOR?1:"false"===Pl.FORCE_COLOR?0:0===Pl.FORCE_COLOR.length?1:Math.min(Number.parseInt(Pl.FORCE_COLOR,10),3)}();void 0!==s&&(Rl=s);const r=i?Rl:s;if(0===r)return 0;if(i){if(Tl("color=16m")||Tl("color=full")||Tl("color=truecolor"))return 3;if(Tl("color=256"))return 2}if("TF_BUILD"in Pl&&"AGENT_NAME"in Pl)return 1;if(t&&!e&&void 0===r)return 0;const n=r||0;if("dumb"===Pl.TERM)return n;if("win32"===yl.platform){const t=wl.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in Pl)return"GITHUB_ACTIONS"in Pl?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some((t=>t in Pl))||"codeship"===Pl.CI_NAME?1:n;if("TEAMCITY_VERSION"in Pl)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Pl.TEAMCITY_VERSION)?1:0;if("truecolor"===Pl.COLORTERM)return 3;if("xterm-kitty"===Pl.TERM)return 3;if("TERM_PROGRAM"in Pl){const t=Number.parseInt((Pl.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Pl.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Pl.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Pl.TERM)||"COLORTERM"in Pl?1:n}function $l(t,e={}){return function(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}(Ll(t,ml({streamIsTTY:t&&t.isTTY},e)))}Tl("no-color")||Tl("no-colors")||Tl("color=false")||Tl("color=never")?Rl=0:(Tl("color")||Tl("colors")||Tl("color=true")||Tl("color=always"))&&(Rl=1);const Nl={stdout:$l({isTTY:bl.isatty(1)}),stderr:$l({isTTY:bl.isatty(2)})};function Il(t,e,i){let s=t.indexOf(e);if(-1===s)return t;const r=e.length;let n=0,o="";do{o+=t.slice(n,s)+e+i,n=s+r,s=t.indexOf(e,n)}while(-1!==s);return o+=t.slice(n),o}const{stdout:jl,stderr:Fl}=Nl,Ml=Symbol("GENERATOR"),Dl=Symbol("STYLER"),Bl=Symbol("IS_EMPTY"),zl=["ansi","ansi","ansi256","ansi16m"],Gl=Object.create(null);const Wl=t=>{const e=(...t)=>t.join(" ");return((t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const i=jl?jl.level:0;t.level=void 0===e.level?i:e.level})(e,t),Object.setPrototypeOf(e,Hl.prototype),e};function Hl(t){return Wl(t)}Object.setPrototypeOf(Hl.prototype,Function.prototype);for(const[t,e]of Object.entries(Al))Gl[t]={get(){const i=Kl(this,Yl(e.open,e.close,this[Dl]),this[Bl]);return Object.defineProperty(this,t,{value:i}),i}};Gl.visible={get(){const t=Kl(this,this[Dl],!0);return Object.defineProperty(this,"visible",{value:t}),t}};const Vl=(t,e,i,...s)=>"rgb"===t?"ansi16m"===e?Al[i].ansi16m(...s):"ansi256"===e?Al[i].ansi256(Al.rgbToAnsi256(...s)):Al[i].ansi(Al.rgbToAnsi(...s)):"hex"===t?Vl("rgb",e,i,...Al.hexToRgb(...s)):Al[i][t](...s),Ul=["rgb","hex","ansi256"];for(const t of Ul){Gl[t]={get(){const{level:e}=this;return function(...i){const s=Yl(Vl(t,zl[e],"color",...i),Al.color.close,this[Dl]);return Kl(this,s,this[Bl])}}};Gl["bg"+t[0].toUpperCase()+t.slice(1)]={get(){const{level:e}=this;return function(...i){const s=Yl(Vl(t,zl[e],"bgColor",...i),Al.bgColor.close,this[Dl]);return Kl(this,s,this[Bl])}}}}const ql=Object.defineProperties((()=>{}),ml(ml({},Gl),{},{level:{enumerable:!0,get(){return this[Ml].level},set(t){this[Ml].level=t}}})),Yl=(t,e,i)=>{let s,r;return void 0===i?(s=t,r=e):(s=i.openAll+t,r=e+i.closeAll),{open:t,close:e,openAll:s,closeAll:r,parent:i}},Kl=(t,e,i)=>{const s=(...t)=>Zl(s,1===t.length?""+t[0]:t.join(" "));return Object.setPrototypeOf(s,ql),s[Ml]=t,s[Dl]=e,s[Bl]=i,s},Zl=(t,e)=>{if(t.level<=0||!e)return t[Bl]?"":e;let i=t[Dl];if(void 0===i)return e;const{openAll:s,closeAll:r}=i;if(e.includes(""))for(;void 0!==i;)e=Il(e,i.close,i.open),i=i.parent;const n=e.indexOf("\n");return-1!==n&&(e=function(t,e,i,s){let r=0,n="";do{const o="\r"===t[s-1];n+=t.slice(r,o?s-1:s)+e+(o?"\r\n":"\n")+i,r=s+1,s=t.indexOf("\n",r)}while(-1!==s);return n+=t.slice(r),n}(e,r,s,n)),s+e+r};Object.defineProperties(Hl.prototype,Gl);const Jl=Hl(),Xl=Hl({level:Fl?Fl.level:0});dl.Chalk=class{constructor(t){return Wl(t)}},dl.backgroundColorNames=Cl,dl.backgroundColors=Cl,dl.chalkStderr=Xl,dl.colorNames=kl,dl.colors=kl;var Ql=dl.default=Jl;dl.foregroundColorNames=_l,dl.foregroundColors=_l,dl.modifierNames=El,dl.modifiers=El,dl.supportsColor=jl,dl.supportsColorStderr=Fl;var tc={error:function(...t){console.log(Ql.redBright(...t))},warn:function(...t){console.log(Ql.yellowBright(...t))},info:function(...t){console.log(Ql.blueBright(...t))},success:function(...t){console.log(Ql.greenBright(...t))},log:function(...t){console.log(...t)}};const ec=()=>{const e=[];return t.existsSync("package-lock.json")?e.push("npm"):t.existsSync("yarn.lock")?e.push("yarn"):t.existsSync("pnpm-lock.yaml")&&e.push("pnpm"),e},ic=(t,e,i={})=>{try{return pl(t,e,{stdio:"inherit",...i})}catch(t){return Promise.reject(t)}},sc=t=>tc.success("\n",t);async function rc(t){const{yes:e}=await Yo.prompt([{type:"confirm",name:"yes",message:"install packages?",initial:!0}]);if(!e)return!1;process.chdir(t);const i=await nc();await async function(t){try{const{stdout:e}=await ic("which",[t],{stdout:"ignore"});return!!e}catch(t){return!1}}(i)||await ic("npm",["install","-g",i]),sc(`${i} version`),await ic(i,["--version"]);try{await ic(i,["install","--prefer-offline"])}catch(t){await ic(i,["install"])}return sc("Dependency installation successful!"),!0}async function nc(t=!0){let e="npm";const i=ec();if(1===i.length)e=i[0];else if(i.length>1)if(t){const{result:t}=await Yo.prompt({type:"select",name:"result",message:"Select cmd type",choices:i});e=t}else e=`(${i.join(" | ")})`;return e}const oc=e.resolve(__dirname,"..","package.json"),ac=JSON.parse(t.readFileSync(oc,"utf-8"));st.name(ac.name).version(ac.version).description(ac.description),st.command("create <project-name>").option("-g, --git <git url>","git clone url").action((async(i,s)=>{sc(`Start creating project: ${i}`);try{const r=await async function(t){const e=await Yo.prompt([{type:"input",name:"name",message:"Project name:",initial:()=>t,validate:t=>!!/^(?:@[a-z0-9-*~][a-z0-9-*._~]*)?[a-z0-9-~][a-z0-9-._~]*$/.test(t)||"The project name does not meet the specifications: ^(?:@[a-z0-9-*~][a-z0-9-*._~]*)?[a-z0-9-~][a-z0-9-._~]*$"},{type:"input",name:"description",message:"description:",validate:t=>!!/^.{0,100}$/.test(t)||"The description must not exceed 100 characters"},{type:"input",name:"author",message:"author:",validate:t=>!!/^.{0,50}$/.test(t)||"The author must not exceed 50 characters"}]);return e}(i),{name:n,description:o,author:a}=r,h=e.resolve(i);t.existsSync(h)&&await async function(t,e){const{action:i}=await Yo.prompt([{type:"toggle",name:"action",message:`Delete existing directory <${t}>?`,initial:!0,stdin:process.stdin}]);return i?(sc(`Delete directory: '${t}'`),await Dr(e),Promise.resolve()):Promise.reject("Cancelled creation")}(i,h),sc("Clone remote warehouse..."),await ic("git",["clone",s.git||"https://github.com/wc19950724/vue3-base.git",h]);const l=e.resolve(h,".git");await Dr(l);const c=e.resolve(h,"package.json"),u=t.readFileSync(c,"utf8"),p=JSON.parse(u);p.name=n,p.author=a,p.description=o,t.writeFileSync(c,JSON.stringify(p,null,2)+"\n"),sc("Project created successfully!");const d=await rc(h),f=await nc(!1);tc.log("\n"),tc.info(`\tcd ${n}`),!d&&tc.info(`\t${f} install`);const m=(i=>{const s=t.readFileSync(e.resolve(i),"utf8");return JSON.parse(s).scripts||{}})(c);for(const t in m)tc.info(`\t${f} ${t}`);tc.log("\n")}catch(t){t&&tc.error("Project creation failed: ",t)}})),st.parse(process.argv);
